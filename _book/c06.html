<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 6 Descriptive analyses in srvyr | Tidy Survey Book</title>
  <meta name="description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  <meta name="generator" content="bookdown 0.30 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 6 Descriptive analyses in srvyr | Tidy Survey Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  <meta name="github-repo" content="tidy-survey-r/tidy-survey-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 6 Descriptive analyses in srvyr | Tidy Survey Book" />
  
  <meta name="twitter:description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  

<meta name="author" content="Stephanie Zimmer, Rebecca Powell, and Isabella Velásquez" />


<meta name="date" content="2022-12-04" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="c05.html"/>
<link rel="next" href="c07.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#why-read-this-book"><i class="fa fa-check"></i>Why read this book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#structure-of-the-book"><i class="fa fa-check"></i>Structure of the book</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#software-information-and-conventions"><i class="fa fa-check"></i>Software information and conventions</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#acknowledgments"><i class="fa fa-check"></i>Acknowledgments</a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="c01.html"><a href="c01.html"><i class="fa fa-check"></i><b>1</b> Introduction</a></li>
<li class="chapter" data-level="2" data-path="c02.html"><a href="c02.html"><i class="fa fa-check"></i><b>2</b> Introducing survey data</a></li>
<li class="chapter" data-level="3" data-path="c03.html"><a href="c03.html"><i class="fa fa-check"></i><b>3</b> Understanding survey data files</a></li>
<li class="chapter" data-level="4" data-path="c04.html"><a href="c04.html"><i class="fa fa-check"></i><b>4</b> Introducing the srvyr package</a></li>
<li class="chapter" data-level="5" data-path="c05.html"><a href="c05.html"><i class="fa fa-check"></i><b>5</b> Specifying sample designs in srvyr</a></li>
<li class="chapter" data-level="6" data-path="c06.html"><a href="c06.html"><i class="fa fa-check"></i><b>6</b> Descriptive analyses in srvyr</a>
<ul>
<li class="chapter" data-level="6.1" data-path="c06.html"><a href="c06.html#goals"><i class="fa fa-check"></i><b>6.1</b> Goals</a></li>
<li class="chapter" data-level="6.2" data-path="c06.html"><a href="c06.html#introduction"><i class="fa fa-check"></i><b>6.2</b> Introduction</a></li>
<li class="chapter" data-level="6.3" data-path="c06.html"><a href="c06.html#overview-of-descriptive-analysis-using-srvyr-package"><i class="fa fa-check"></i><b>6.3</b> Overview of descriptive analysis using <code>srvyr</code> package</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="c06.html"><a href="c06.html#a-brief-refresher-on-the-dplyrsummarize-function"><i class="fa fa-check"></i><b>6.3.1</b> A brief refresher on the <code>dplyr::summarize()</code> function</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="c06.html"><a href="c06.html#setup"><i class="fa fa-check"></i><b>6.4</b> Setup</a></li>
<li class="chapter" data-level="6.5" data-path="c06.html"><a href="c06.html#categorical-data"><i class="fa fa-check"></i><b>6.5</b> Categorical data</a>
<ul>
<li class="chapter" data-level="6.5.1" data-path="c06.html"><a href="c06.html#count-observations-using-survey-methods-with-survey_count"><i class="fa fa-check"></i><b>6.5.1</b> Count observations using survey methods with <code>survey_count()</code></a></li>
</ul></li>
<li class="chapter" data-level="6.6" data-path="c06.html"><a href="c06.html#calculate-totals-using-survey-methods-using-survey_total"><i class="fa fa-check"></i><b>6.6</b> Calculate totals using survey methods using <code>survey_total()</code></a></li>
<li class="chapter" data-level="6.7" data-path="c06.html"><a href="c06.html#calculate-meanproportion-using-survey-methods-with-survey_mean-and-survey_prop"><i class="fa fa-check"></i><b>6.7</b> Calculate mean/proportion using survey methods with <code>survey_mean()</code> and <code>survey_prop()</code></a></li>
<li class="chapter" data-level="6.8" data-path="c06.html"><a href="c06.html#other-functions-that-use-survey-methods"><i class="fa fa-check"></i><b>6.8</b> Other functions that use survey methods</a></li>
<li class="chapter" data-level="6.9" data-path="c06.html"><a href="c06.html#conditional-proportions-with-more-than-one-group"><i class="fa fa-check"></i><b>6.9</b> Conditional proportions with more than one group</a></li>
<li class="chapter" data-level="6.10" data-path="c06.html"><a href="c06.html#joint-proportions-with-more-than-one-group"><i class="fa fa-check"></i><b>6.10</b> Joint proportions with more than one group</a></li>
<li class="chapter" data-level="6.11" data-path="c06.html"><a href="c06.html#proportions-with-design-effects"><i class="fa fa-check"></i><b>6.11</b> Proportions with design effects</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="c07.html"><a href="c07.html"><i class="fa fa-check"></i><b>7</b> Statistical testing</a></li>
<li class="chapter" data-level="8" data-path="c08.html"><a href="c08.html"><i class="fa fa-check"></i><b>8</b> Modeling</a></li>
<li class="chapter" data-level="9" data-path="c09.html"><a href="c09.html"><i class="fa fa-check"></i><b>9</b> Presenting results</a></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="A" data-path="more-to-say.html"><a href="more-to-say.html"><i class="fa fa-check"></i><b>A</b> More to Say</a></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tidy Survey Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c06" class="section level1 hasAnchor" number="6">
<h1><span class="header-section-number">Chapter 6</span> Descriptive analyses in srvyr<a href="c06.html#c06" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="goals" class="section level2 hasAnchor" number="6.1">
<h2><span class="header-section-number">6.1</span> Goals<a href="c06.html#goals" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="introduction" class="section level2 hasAnchor" number="6.2">
<h2><span class="header-section-number">6.2</span> Introduction<a href="c06.html#introduction" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Descriptive analysis allows you to investigate your dataset and gain insight into the information it contains. Common descriptive analyses include calculating mean, median of numeric data or proportions in categorical data.</p>
<!--TODO: Add more, particularly on how it's on the analyst to pick the right way of doing descriptive analysis based on the data-->
</div>
<div id="overview-of-descriptive-analysis-using-srvyr-package" class="section level2 hasAnchor" number="6.3">
<h2><span class="header-section-number">6.3</span> Overview of descriptive analysis using <code>srvyr</code> package<a href="c06.html#overview-of-descriptive-analysis-using-srvyr-package" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ol style="list-style-type: decimal">
<li>Create a <code>tbl_svy</code> object using <code>srvyr::as_survey_design()</code> or <code>srvyr::as_survey_rep()</code></li>
<li>Subset the data for subpopulations using <code>dplyr::filter()</code>, if needed</li>
<li>Specify domains of analysis using <code>dplyr::group_by()</code>, if needed</li>
<li>Within <code>srvyr::summarize()</code>, specify variables to calculate ,means, totals, proportions, quantiles, and more</li>
</ol>
<div id="a-brief-refresher-on-the-dplyrsummarize-function" class="section level3 hasAnchor" number="6.3.1">
<h3><span class="header-section-number">6.3.1</span> A brief refresher on the <code>dplyr::summarize()</code> function<a href="c06.html#a-brief-refresher-on-the-dplyrsummarize-function" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The <code>dplyr::summarize()</code> function collapses many values down to a single summary:</p>
<!-- TODO: Add example -->
<p>These verbs can be used in conjunction with <code>group_by()</code>, applying the functions on a group-by-group basis to create grouped summaries.</p>
</div>
</div>
<div id="setup" class="section level2 hasAnchor" number="6.4">
<h2><span class="header-section-number">6.4</span> Setup<a href="c06.html#setup" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With the ANES data, we create a <code>tbl_svy</code> object using <code>srvyr::as_survey_design()</code> (as described in Chapter 05):</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="c06.html#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey) <span class="co"># for survey analysis</span></span></code></pre></div>
<pre><code>## Loading required package: grid</code></pre>
<pre><code>## Loading required package: Matrix</code></pre>
<pre><code>## Loading required package: survival</code></pre>
<pre><code>## 
## Attaching package: &#39;survey&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:graphics&#39;:
## 
##     dotchart</code></pre>
<div class="sourceCode" id="cb9"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb9-1"><a href="c06.html#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(srvyr) <span class="co"># for tidy survey analysis</span></span></code></pre></div>
<pre><code>## 
## Attaching package: &#39;srvyr&#39;</code></pre>
<pre><code>## The following object is masked from &#39;package:stats&#39;:
## 
##     filter</code></pre>
<div class="sourceCode" id="cb12"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb12-1"><a href="c06.html#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb12-2"><a href="c06.html#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(here)</span></code></pre></div>
<pre><code>## here() starts at /Users/ivelasq/R/tidy-survey-book</code></pre>
<div class="sourceCode" id="cb14"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb14-1"><a href="c06.html#cb14-1" aria-hidden="true" tabindex="-1"></a>anes <span class="ot">&lt;-</span></span>
<span id="cb14-2"><a href="c06.html#cb14-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">read_rds</span>(here<span class="sc">::</span><span class="fu">here</span>(</span>
<span id="cb14-3"><a href="c06.html#cb14-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;/Users/ivelasq/R/tidy-survey-short-course/Data/anes_2020.rds&quot;</span></span>
<span id="cb14-4"><a href="c06.html#cb14-4" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb14-5"><a href="c06.html#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> Weight <span class="sc">/</span> <span class="fu">sum</span>(Weight) <span class="sc">*</span> <span class="dv">231592693</span>) </span>
<span id="cb14-6"><a href="c06.html#cb14-6" aria-hidden="true" tabindex="-1"></a><span class="co"># adjust weight to sum to citizen pop, 18+ in Nov 2020 per ANES methodology documentation</span></span>
<span id="cb14-7"><a href="c06.html#cb14-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-8"><a href="c06.html#cb14-8" aria-hidden="true" tabindex="-1"></a>anes_des <span class="ot">&lt;-</span> anes <span class="sc">%&gt;%</span></span>
<span id="cb14-9"><a href="c06.html#cb14-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(</span>
<span id="cb14-10"><a href="c06.html#cb14-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">weights =</span> Weight,</span>
<span id="cb14-11"><a href="c06.html#cb14-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">strata =</span> Stratum,</span>
<span id="cb14-12"><a href="c06.html#cb14-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">ids =</span> VarUnit,</span>
<span id="cb14-13"><a href="c06.html#cb14-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">nest =</span> <span class="cn">TRUE</span></span>
<span id="cb14-14"><a href="c06.html#cb14-14" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="categorical-data" class="section level2 hasAnchor" number="6.5">
<h2><span class="header-section-number">6.5</span> Categorical data<a href="c06.html#categorical-data" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><em>Categorical data</em>, or the [definition],</p>
<p>Analyzing categorical data lets us…</p>
<p>Common analysis for categorical data include:</p>
<ul>
<li>Weighted proportions</li>
<li>Weighted counts</li>
<li>Unweighted proportions</li>
<li>Unweighted counts</li>
</ul>
<div id="count-observations-using-survey-methods-with-survey_count" class="section level3 hasAnchor" number="6.5.1">
<h3><span class="header-section-number">6.5.1</span> Count observations using survey methods with <code>survey_count()</code><a href="c06.html#count-observations-using-survey-methods-with-survey_count" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>With <code>srvyr::survey_count()</code>, you can produce weighted counts and variance of your choice. The syntax is very similar to the <code>dplyr::count()</code> syntax; however, it can only be called on <code>tbl_srvy()</code> objects. Let’s explore the syntax:</p>
<div class="sourceCode" id="cb15"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb15-1"><a href="c06.html#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_count</span>(</span>
<span id="cb15-2"><a href="c06.html#cb15-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb15-3"><a href="c06.html#cb15-3" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb15-4"><a href="c06.html#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">wt =</span> <span class="cn">NULL</span>,</span>
<span id="cb15-5"><a href="c06.html#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sort =</span> <span class="cn">FALSE</span>,</span>
<span id="cb15-6"><a href="c06.html#cb15-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb15-7"><a href="c06.html#cb15-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">.drop =</span> dplyr<span class="sc">::</span><span class="fu">group_by_drop_default</span>(x),</span>
<span id="cb15-8"><a href="c06.html#cb15-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb15-9"><a href="c06.html#cb15-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: a <code>tbl_svy</code> object created by <code>as_survey</code></li>
<li><code>...</code>: variables to group by, passed to <code>group_by</code></li>
<li><code>wt</code>: a variable to weight on in addition to the survey weights, defaults to <code>NULL</code></li>
<li><code>sort</code>: how to sort the variables, defaults to <code>FALSE</code></li>
<li><code>name</code>: the name of the count variable, defaults to <code>n</code></li>
<li><code>.drop</code>: whether to drop empty groups</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate, defaults to <code>se</code> (standard error)</li>
</ul>
<p>The steps to use <code>survey_count()</code> are:</p>
<ul>
<li>Specify the sample design,</li>
<li>Run <code>survey_count()</code>, specifying the required arguments within the function</li>
</ul>
<p>Let’s see the weighted count of responses in ANES:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb16-1"><a href="c06.html#cb16-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span> <span class="co">#  Specify the sample design</span></span>
<span id="cb16-2"><a href="c06.html#cb16-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>() <span class="co"># Run `survey_count()`</span></span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##           n     n_se
##       &lt;dbl&gt;    &lt;dbl&gt;
## 1 231592693 3762243.</code></pre>
<p><code>srvyr::count()</code> can take one or many variables. To calculate a cross-tab of population in each age group and gender, we run the below:</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb18-1"><a href="c06.html#cb18-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb18-2"><a href="c06.html#cb18-2" aria-hidden="true" tabindex="-1"></a>  <span class="co"># Specify the required arguments within the function</span></span>
<span id="cb18-3"><a href="c06.html#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>(AgeGroup, Gender, <span class="at">name =</span> <span class="st">&quot;N&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 21 × 4
##    AgeGroup Gender         N     N_se
##    &lt;fct&gt;    &lt;fct&gt;      &lt;dbl&gt;    &lt;dbl&gt;
##  1 18-29    Male   21600792. 1418333.
##  2 18-29    Female 22193812. 1766188.
##  3 18-29    &lt;NA&gt;      65204.   56033.
##  4 30-39    Male   19848178. 1077514.
##  5 30-39    Female 19780778. 1158766.
##  6 30-39    &lt;NA&gt;     118195.   62999.
##  7 40-49    Male   17915676. 1123493.
##  8 40-49    Female 18932548.  946369.
##  9 40-49    &lt;NA&gt;      71911.   55174.
## 10 50-59    Male   19054298. 1029844.
## # … with 11 more rows</code></pre>
</div>
</div>
<div id="calculate-totals-using-survey-methods-using-survey_total" class="section level2 hasAnchor" number="6.6">
<h2><span class="header-section-number">6.6</span> Calculate totals using survey methods using <code>survey_total()</code><a href="c06.html#calculate-totals-using-survey-methods-using-survey_total" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With <code>srvyr::survey_total()</code>, you can calculate totals from complex survey data. Let’s explore the syntax:</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb20-1"><a href="c06.html#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_total</span>(</span>
<span id="cb20-2"><a href="c06.html#cb20-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb20-3"><a href="c06.html#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb20-4"><a href="c06.html#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb20-5"><a href="c06.html#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb20-6"><a href="c06.html#cb20-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb20-7"><a href="c06.html#cb20-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span>,</span>
<span id="cb20-8"><a href="c06.html#cb20-8" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb20-9"><a href="c06.html#cb20-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<ul>
<li><code>x</code>: a variable, expression, or empty</li>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate, defaults to <code>se</code> (standard error)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>deff</code>: a logical value stating whether the design effect should be returned, defaults to FALSE</li>
<li><code>df</code>: for `vartype = ‘ci’), a numeric value indicating degrees of freedome for the t-distribution
<ul>
<li>For the {srvyr} package, this defaults to <code>NULL</code> whereas the {survey} package defaults to <code>Inf</code></li>
</ul></li>
</ul>
<p>The steps to use <code>survey_total()</code> are:</p>
<ul>
<li>Specify the sample design,</li>
<li>Specify the cross tab in <code>group_by()</code>,</li>
<li>Within <code>summarize</code>, run <code>survey_total()</code>, specifying the required arguments within the function</li>
</ul>
<p>To calculate a population count estimate with <code>survey_total()</code>, we can run the below:</p>
<div class="sourceCode" id="cb21"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb21-1"><a href="c06.html#cb21-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb21-2"><a href="c06.html#cb21-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">survey_total</span>(), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##        coef    `_se`
##       &lt;dbl&gt;    &lt;dbl&gt;
## 1 231592693 3762243.</code></pre>
<p>The <code>.groups =</code> argument controls the grouping structure of the output. When the output no longer have grouping variables because they are dropped, it becomes ungrouped. <!-- TODO: Check this after dplyr 1.1.0 is released --></p>
<p>Notice that <code>anes_des %&gt;% summarize(survey_total(), .groups = "drop")</code> is equivalent to the <code>survey_count()</code> call:</p>
<div class="sourceCode" id="cb23"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb23-1"><a href="c06.html#cb23-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb23-2"><a href="c06.html#cb23-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>() </span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##           n     n_se
##       &lt;dbl&gt;    &lt;dbl&gt;
## 1 231592693 3762243.</code></pre>
<p>The <code>survey_total()</code> function is called within <code>summarize</code>, where as <code>survey_count()</code>, like <code>dplyr::count()</code>, is not.</p>
</div>
<div id="calculate-meanproportion-using-survey-methods-with-survey_mean-and-survey_prop" class="section level2 hasAnchor" number="6.7">
<h2><span class="header-section-number">6.7</span> Calculate mean/proportion using survey methods with <code>survey_mean()</code> and <code>survey_prop()</code><a href="c06.html#calculate-meanproportion-using-survey-methods-with-survey_mean-and-survey_prop" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>srvyr::survey_mean()</code> and <code>survey_prop()</code> functions calculate the means and proportions from complex survey data. Like <code>survey_total()</code>, they are called within <code>summarize()</code>. Let’s explore the syntax:</p>
<div class="sourceCode" id="cb25"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb25-1"><a href="c06.html#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_mean</span>(</span>
<span id="cb25-2"><a href="c06.html#cb25-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb25-3"><a href="c06.html#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-4"><a href="c06.html#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb25-5"><a href="c06.html#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb25-6"><a href="c06.html#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-7"><a href="c06.html#cb25-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop_method =</span> <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>),</span>
<span id="cb25-8"><a href="c06.html#cb25-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-9"><a href="c06.html#cb25-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span>,</span>
<span id="cb25-10"><a href="c06.html#cb25-10" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb25-11"><a href="c06.html#cb25-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb25-12"><a href="c06.html#cb25-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-13"><a href="c06.html#cb25-13" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_prop</span>(</span>
<span id="cb25-14"><a href="c06.html#cb25-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb25-15"><a href="c06.html#cb25-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb25-16"><a href="c06.html#cb25-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-17"><a href="c06.html#cb25-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop_method =</span> <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>),</span>
<span id="cb25-18"><a href="c06.html#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb25-19"><a href="c06.html#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span>,</span>
<span id="cb25-20"><a href="c06.html#cb25-20" aria-hidden="true" tabindex="-1"></a>  ...</span>
<span id="cb25-21"><a href="c06.html#cb25-21" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The steps involved are:</p>
<ul>
<li>Specify the sample design,</li>
<li>Specify the cross tab in <code>group_by()</code>,</li>
<li>Run <code>survey_mean()</code> or <code>survey_prop()</code> within <code>summarize()</code></li>
</ul>
<p>Looking at population by age group, we can calculate the weighted proportion for each group in the data:</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb26-1"><a href="c06.html#cb26-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb26-2"><a href="c06.html#cb26-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(AgeGroup) <span class="sc">%&gt;%</span></span>
<span id="cb26-3"><a href="c06.html#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p1 =</span> <span class="fu">survey_mean</span>(),</span>
<span id="cb26-4"><a href="c06.html#cb26-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 3
##   AgeGroup        p1   p1_se
##   &lt;fct&gt;        &lt;dbl&gt;   &lt;dbl&gt;
## 1 18-29       0.189  0.00838
## 2 30-39       0.172  0.00659
## 3 40-49       0.159  0.00609
## 4 50-59       0.169  0.00657
## 5 60-69       0.155  0.00488
## 6 70 or older 0.119  0.00474
## 7 &lt;NA&gt;        0.0369 0.00305</code></pre>
<p>The <code>survey_prop()</code> function is equivalent to leaving out the <code>x</code> argument in <code>survey_mean()</code>.</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb28-1"><a href="c06.html#cb28-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb28-2"><a href="c06.html#cb28-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(AgeGroup) <span class="sc">%&gt;%</span></span>
<span id="cb28-3"><a href="c06.html#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p1 =</span> <span class="fu">survey_prop</span>(),</span>
<span id="cb28-4"><a href="c06.html#cb28-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 7 × 3
##   AgeGroup        p1   p1_se
##   &lt;fct&gt;        &lt;dbl&gt;   &lt;dbl&gt;
## 1 18-29       0.189  0.00838
## 2 30-39       0.172  0.00659
## 3 40-49       0.159  0.00609
## 4 50-59       0.169  0.00657
## 5 60-69       0.155  0.00488
## 6 70 or older 0.119  0.00474
## 7 &lt;NA&gt;        0.0369 0.00305</code></pre>
</div>
<div id="other-functions-that-use-survey-methods" class="section level2 hasAnchor" number="6.8">
<h2><span class="header-section-number">6.8</span> Other functions that use survey methods<a href="c06.html#other-functions-that-use-survey-methods" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The {srvyr} package includes other functions for summarizing datasets:</p>
<ul>
<li>Center: <code>survey_mean()</code>, <code>survey_prop()</code>, <code>survey_median()</code></li>
<li>Count: <code>survey_count()</code>, <code>survey_total()</code></li>
<li>Range: <code>survey_quantile()</code></li>
<li>Ratio: <code>survey_ratio()</code></li>
<li>Variance: <code>survey_var()</code>, <code>survey_sd()</code></li>
</ul>
</div>
<div id="conditional-proportions-with-more-than-one-group" class="section level2 hasAnchor" number="6.9">
<h2><span class="header-section-number">6.9</span> Conditional proportions with more than one group<a href="c06.html#conditional-proportions-with-more-than-one-group" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Specifying more than one group calculates conditional proportions. Say we wanted to know the proportion of people who voted in 2016 and 2020. After the <code>tbl_svy</code> object, we specify the two variables we want to calculate proportions for:</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb30-1"><a href="c06.html#cb30-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb30-2"><a href="c06.html#cb30-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2016),<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2020)) <span class="sc">%&gt;%</span></span>
<span id="cb30-3"><a href="c06.html#cb30-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(VotedPres2016, VotedPres2020) <span class="sc">%&gt;%</span></span>
<span id="cb30-4"><a href="c06.html#cb30-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb30-5"><a href="c06.html#cb30-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">p =</span> <span class="fu">survey_mean</span>(),</span>
<span id="cb30-6"><a href="c06.html#cb30-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">N =</span> <span class="fu">survey_total</span>(),</span>
<span id="cb30-7"><a href="c06.html#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">unweighted</span>(<span class="fu">n</span>()),</span>
<span id="cb30-8"><a href="c06.html#cb30-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span></span>
<span id="cb30-9"><a href="c06.html#cb30-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   VotedPre…¹ Voted…²      p    p_se      N   N_se     n
##   &lt;fct&gt;      &lt;fct&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt;
## 1 Yes        Yes     0.924  0.00566 1.45e8 2.62e6  5534
## 2 Yes        No      0.0762 0.00566 1.19e7 9.55e5   274
## 3 No         Yes     0.455  0.0162  3.39e7 1.59e6   859
## 4 No         No      0.545  0.0162  4.06e7 2.04e6   761
## # … with abbreviated variable names ¹​VotedPres2016,
## #   ²​VotedPres2020</code></pre>
<p>Note that this is the proportion of <strong>people voting in 2020 by whether people voted in 2016</strong>. That is, it is the weighted number of people who voted in both 2016 and 2020 (144578247), divided by the weighted number of people who voted in 2016 (144578247 + 11917394). Running the above, we see that 92.4% of people who voted in 2016 voted in 2020.</p>
</div>
<div id="joint-proportions-with-more-than-one-group" class="section level2 hasAnchor" number="6.10">
<h2><span class="header-section-number">6.10</span> Joint proportions with more than one group<a href="c06.html#joint-proportions-with-more-than-one-group" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>There are times when we are not interested in conditional proportions. Instead, we want to calculate multiple variables as if they were a single variable. The {srvyr} package includes <code>interact</code>, which we can use within <code>group_by()</code> to calculate the joint proportions of two or more variables.</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb32-1"><a href="c06.html#cb32-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb32-2"><a href="c06.html#cb32-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2020),<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2016)) <span class="sc">%&gt;%</span></span>
<span id="cb32-3"><a href="c06.html#cb32-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">interact</span>(VotedPres2016, VotedPres2020)) <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb32-4"><a href="c06.html#cb32-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>(),</span>
<span id="cb32-5"><a href="c06.html#cb32-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">N =</span> <span class="fu">survey_total</span>(),</span>
<span id="cb32-6"><a href="c06.html#cb32-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 6
##   VotedPres2016 VotedPre…¹      p    p_se      N   N_se
##   &lt;fct&gt;         &lt;fct&gt;       &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Yes           Yes        0.626  0.00934 1.45e8 2.62e6
## 2 Yes           No         0.0516 0.00391 1.19e7 9.55e5
## 3 No            Yes        0.147  0.00628 3.39e7 1.59e6
## 4 No            No         0.176  0.00770 4.06e7 2.04e6
## # … with abbreviated variable name ¹​VotedPres2020</code></pre>
<p>Since <code>interact</code> groups by multiple variables as if they were a single variable, the proportions sum to 100% across more than a single grouping variable.</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb34-1"><a href="c06.html#cb34-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb34-2"><a href="c06.html#cb34-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2020),<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2016)) <span class="sc">%&gt;%</span></span>
<span id="cb34-3"><a href="c06.html#cb34-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">interact</span>(VotedPres2016, VotedPres2020)) <span class="sc">%&gt;%</span> <span class="co">#&lt;&lt;</span></span>
<span id="cb34-4"><a href="c06.html#cb34-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>(),</span>
<span id="cb34-5"><a href="c06.html#cb34-5" aria-hidden="true" tabindex="-1"></a>            <span class="at">N =</span> <span class="fu">survey_total</span>(),</span>
<span id="cb34-6"><a href="c06.html#cb34-6" aria-hidden="true" tabindex="-1"></a>            <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>) <span class="sc">%&gt;%</span> </span>
<span id="cb34-7"><a href="c06.html#cb34-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p_sum =</span> <span class="fu">sum</span>(p))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 1
##   p_sum
##   &lt;dbl&gt;
## 1     1</code></pre>
</div>
<div id="proportions-with-design-effects" class="section level2 hasAnchor" number="6.11">
<h2><span class="header-section-number">6.11</span> Proportions with design effects<a href="c06.html#proportions-with-design-effects" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Note above that functions <code>survey_total()</code>, <code>survey_mean()</code>, and <code>survey_prop()</code> have the argument <code>deff</code>. <code>deff</code> stands for Design Effect, the ratio of two variances. Use <code>deff = TRUE</code> argument to specify whether the design effect should be returned.</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb36-1"><a href="c06.html#cb36-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="c06.html#cb36-2" aria-hidden="true" tabindex="-1"></a>   <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2016), <span class="sc">!</span><span class="fu">is.na</span>(VotedPres2020)) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="c06.html#cb36-3" aria-hidden="true" tabindex="-1"></a>   <span class="fu">group_by</span>(<span class="fu">interact</span>(VotedPres2016, VotedPres2020)) <span class="sc">%&gt;%</span> </span>
<span id="cb36-4"><a href="c06.html#cb36-4" aria-hidden="true" tabindex="-1"></a>   <span class="fu">summarize</span>(</span>
<span id="cb36-5"><a href="c06.html#cb36-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">p=</span><span class="fu">survey_mean</span>(<span class="at">deff=</span><span class="cn">TRUE</span>), <span class="co">#&lt;&lt;</span></span>
<span id="cb36-6"><a href="c06.html#cb36-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">N=</span><span class="fu">survey_total</span>()</span>
<span id="cb36-7"><a href="c06.html#cb36-7" aria-hidden="true" tabindex="-1"></a>   )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   VotedPr…¹ Voted…²      p    p_se p_deff      N   N_se
##   &lt;fct&gt;     &lt;fct&gt;    &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Yes       Yes     0.626  0.00934   2.76 1.45e8 2.62e6
## 2 Yes       No      0.0516 0.00391   2.32 1.19e7 9.55e5
## 3 No        Yes     0.147  0.00628   2.34 3.39e7 1.59e6
## 4 No        No      0.176  0.00770   3.04 4.06e7 2.04e6
## # … with abbreviated variable names ¹​VotedPres2016,
## #   ²​VotedPres2020</code></pre>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="c05.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="c07.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/06-descriptive-analysis-in-srvyr.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

</body>

</html>
