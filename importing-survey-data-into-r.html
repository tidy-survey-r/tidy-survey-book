<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>A Importing survey data into R | Exploring Complex Survey Data Analysis Using R</title>
  <meta name="description" content="Bookdown for CRC Press book on Exploring Complex Survey Data Analysis Using R." />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="A Importing survey data into R | Exploring Complex Survey Data Analysis Using R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/BookCover_Final.jpg" />
  <meta property="og:description" content="Bookdown for CRC Press book on Exploring Complex Survey Data Analysis Using R." />
  <meta name="github-repo" content="tidy-survey-r/tidy-survey-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="A Importing survey data into R | Exploring Complex Survey Data Analysis Using R" />
  
  <meta name="twitter:description" content="Bookdown for CRC Press book on Exploring Complex Survey Data Analysis Using R." />
  <meta name="twitter:image" content="/images/BookCover_Final.jpg" />

<meta name="author" content="Stephanie A. Zimmer, Rebecca J. Powell, and Isabella C. Velásquez" />


<meta name="date" content="2024-08-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="c14-ambarom-vignette.html"/>
<link rel="next" href="anes-cb.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<link href="libs/htmltools-fill/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/dagre/dagre-d3.min.js"></script>
<link href="libs/mermaid/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="libs/chromatography/chromatography.js"></script>
<script src="libs/DiagrammeR-binding/DiagrammeR.js"></script>
<script defer data-domain="tidy-survey-r.github.io/tidy-survey-book" src="https://plausible.io/js/script.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploring Complex Survey Data Analysis Using R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dedication"><i class="fa fa-check"></i>Dedication</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citation"><i class="fa fa-check"></i>Citation</a></li>
</ul></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="c01-intro.html"><a href="c01-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="c01-intro.html"><a href="c01-intro.html#survey-analysis-in-r"><i class="fa fa-check"></i><b>1.1</b> Survey analysis in R</a></li>
<li class="chapter" data-level="1.2" data-path="c01-intro.html"><a href="c01-intro.html#what-to-expect"><i class="fa fa-check"></i><b>1.2</b> What to expect</a></li>
<li class="chapter" data-level="1.3" data-path="c01-intro.html"><a href="c01-intro.html#prerequisites"><i class="fa fa-check"></i><b>1.3</b> Prerequisites</a></li>
<li class="chapter" data-level="1.4" data-path="c01-intro.html"><a href="c01-intro.html#datasets-used-in-this-book"><i class="fa fa-check"></i><b>1.4</b> Datasets used in this book</a></li>
<li class="chapter" data-level="1.5" data-path="c01-intro.html"><a href="c01-intro.html#conventions"><i class="fa fa-check"></i><b>1.5</b> Conventions</a></li>
<li class="chapter" data-level="1.6" data-path="c01-intro.html"><a href="c01-intro.html#getting-help"><i class="fa fa-check"></i><b>1.6</b> Getting help</a></li>
<li class="chapter" data-level="1.7" data-path="c01-intro.html"><a href="c01-intro.html#acknowledgments"><i class="fa fa-check"></i><b>1.7</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.8" data-path="c01-intro.html"><a href="c01-intro.html#colophon"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html"><i class="fa fa-check"></i><b>2</b> Overview of surveys</a>
<ul>
<li class="chapter" data-level="2.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#searching-for-public-use-survey-data"><i class="fa fa-check"></i><b>2.2</b> Searching for public-use survey data</a></li>
<li class="chapter" data-level="2.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#pre-survey-planning"><i class="fa fa-check"></i><b>2.3</b> Pre-survey planning</a></li>
<li class="chapter" data-level="2.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design"><i class="fa fa-check"></i><b>2.4</b> Study design</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-sampdesign"><i class="fa fa-check"></i><b>2.4.1</b> Sampling design</a></li>
<li class="chapter" data-level="2.4.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-dcplanning"><i class="fa fa-check"></i><b>2.4.2</b> Data collection planning</a></li>
<li class="chapter" data-level="2.4.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-questionnaire"><i class="fa fa-check"></i><b>2.4.3</b> Questionnaire design</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-datacollection"><i class="fa fa-check"></i><b>2.5</b> Data collection</a></li>
<li class="chapter" data-level="2.6" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post"><i class="fa fa-check"></i><b>2.6</b> Post-survey processing</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-cleaning"><i class="fa fa-check"></i><b>2.6.1</b> Data cleaning and imputation</a></li>
<li class="chapter" data-level="2.6.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-weighting"><i class="fa fa-check"></i><b>2.6.2</b> Weighting</a></li>
<li class="chapter" data-level="2.6.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-disclosure"><i class="fa fa-check"></i><b>2.6.3</b> Disclosure</a></li>
<li class="chapter" data-level="2.6.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-documentation"><i class="fa fa-check"></i><b>2.6.4</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#post-survey-data-analysis-and-reporting"><i class="fa fa-check"></i><b>2.7</b> Post-survey data analysis and reporting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html"><i class="fa fa-check"></i><b>3</b> Survey data documentation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#types-of-survey-documentation"><i class="fa fa-check"></i><b>3.2</b> Types of survey documentation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#technical-documentation"><i class="fa fa-check"></i><b>3.2.1</b> Technical documentation</a></li>
<li class="chapter" data-level="3.2.2" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#questionnaires"><i class="fa fa-check"></i><b>3.2.2</b> Questionnaires</a></li>
<li class="chapter" data-level="3.2.3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#codebooks"><i class="fa fa-check"></i><b>3.2.3</b> Codebooks</a></li>
<li class="chapter" data-level="3.2.4" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#errata"><i class="fa fa-check"></i><b>3.2.4</b> Errata</a></li>
<li class="chapter" data-level="3.2.5" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#additional-resources"><i class="fa fa-check"></i><b>3.2.5</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#missing-data-coding"><i class="fa fa-check"></i><b>3.3</b> Missing data coding</a></li>
<li class="chapter" data-level="3.4" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#example-anes-2020-survey-documentation"><i class="fa fa-check"></i><b>3.4</b> Example: ANES 2020 survey documentation</a>
<ul>
<li class="chapter" data-level="" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#methodology"><i class="fa fa-check"></i>Methodology</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Analysis</b></span></li>
<li class="chapter" data-level="4" data-path="c04-getting-started.html"><a href="c04-getting-started.html"><i class="fa fa-check"></i><b>4</b> Getting started</a>
<ul>
<li class="chapter" data-level="4.1" data-path="c04-getting-started.html"><a href="c04-getting-started.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup"><i class="fa fa-check"></i><b>4.2</b> Setup</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup-load-pkgs"><i class="fa fa-check"></i><b>4.2.1</b> Packages</a></li>
<li class="chapter" data-level="4.2.2" data-path="c04-getting-started.html"><a href="c04-getting-started.html#data"><i class="fa fa-check"></i><b>4.2.2</b> Data</a></li>
<li class="chapter" data-level="4.2.3" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup-des-obj"><i class="fa fa-check"></i><b>4.2.3</b> Design objects</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="c04-getting-started.html"><a href="c04-getting-started.html#survey-analysis-process"><i class="fa fa-check"></i><b>4.3</b> Survey analysis process</a></li>
<li class="chapter" data-level="4.4" data-path="c04-getting-started.html"><a href="c04-getting-started.html#similarities-dplyr-srvyr"><i class="fa fa-check"></i><b>4.4</b> Similarities between {dplyr} and {srvyr} functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html"><i class="fa fa-check"></i><b>5</b> Descriptive analyses</a>
<ul>
<li class="chapter" data-level="" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#prereq5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#counts-and-cross-tabulations"><i class="fa fa-check"></i><b>5.2</b> Counts and cross-tabulations</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-count-syntax"><i class="fa fa-check"></i><b>5.2.1</b> Syntax</a></li>
<li class="chapter" data-level="5.2.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples"><i class="fa fa-check"></i><b>5.2.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#totals-and-sums"><i class="fa fa-check"></i><b>5.3</b> Totals and sums </a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax"><i class="fa fa-check"></i><b>5.3.1</b> Syntax</a></li>
<li class="chapter" data-level="5.3.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-1"><i class="fa fa-check"></i><b>5.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop"><i class="fa fa-check"></i><b>5.4</b> Means and proportions</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop-syntax"><i class="fa fa-check"></i><b>5.4.1</b> Syntax</a></li>
<li class="chapter" data-level="5.4.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-2"><i class="fa fa-check"></i><b>5.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#quantiles-and-medians"><i class="fa fa-check"></i><b>5.5</b> Quantiles and medians</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-1"><i class="fa fa-check"></i><b>5.5.1</b> Syntax</a></li>
<li class="chapter" data-level="5.5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-3"><i class="fa fa-check"></i><b>5.5.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#ratios"><i class="fa fa-check"></i><b>5.6</b> Ratios </a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-2"><i class="fa fa-check"></i><b>5.6.1</b> Syntax</a></li>
<li class="chapter" data-level="5.6.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-4"><i class="fa fa-check"></i><b>5.6.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#correlations"><i class="fa fa-check"></i><b>5.7</b> Correlations </a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-3"><i class="fa fa-check"></i><b>5.7.1</b> Syntax</a></li>
<li class="chapter" data-level="5.7.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-5"><i class="fa fa-check"></i><b>5.7.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#standard-deviation-and-variance"><i class="fa fa-check"></i><b>5.8</b> Standard deviation and variance </a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-4"><i class="fa fa-check"></i><b>5.8.1</b> Syntax</a></li>
<li class="chapter" data-level="5.8.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-6"><i class="fa fa-check"></i><b>5.8.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#additional-topics"><i class="fa fa-check"></i><b>5.9</b> Additional topics</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#unweighted-analysis"><i class="fa fa-check"></i><b>5.9.1</b> Unweighted analysis </a></li>
<li class="chapter" data-level="5.9.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#subpopulation-analysis"><i class="fa fa-check"></i><b>5.9.2</b> Subpopulation analysis </a></li>
<li class="chapter" data-level="5.9.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-deff"><i class="fa fa-check"></i><b>5.9.3</b> Design effects</a></li>
<li class="chapter" data-level="5.9.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#creating-summary-rows"><i class="fa fa-check"></i><b>5.9.4</b> Creating summary rows</a></li>
<li class="chapter" data-level="5.9.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#calculating-estimates-for-many-outcomes"><i class="fa fa-check"></i><b>5.9.5</b> Calculating estimates for many outcomes</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#exercises"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html"><i class="fa fa-check"></i><b>6</b> Statistical testing</a>
<ul>
<li class="chapter" data-level="" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#prereq6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="6.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#dot-notation"><i class="fa fa-check"></i><b>6.2</b> Dot notation</a></li>
<li class="chapter" data-level="6.3" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest"><i class="fa fa-check"></i><b>6.3</b> Comparison of proportions and means</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-syntax"><i class="fa fa-check"></i><b>6.3.1</b> Syntax</a></li>
<li class="chapter" data-level="6.3.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-examples"><i class="fa fa-check"></i><b>6.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi"><i class="fa fa-check"></i><b>6.4</b> Chi-squared tests</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-syntax"><i class="fa fa-check"></i><b>6.4.1</b> Syntax</a></li>
<li class="chapter" data-level="6.4.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-examples"><i class="fa fa-check"></i><b>6.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-exercises"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="c07-modeling.html"><a href="c07-modeling.html"><i class="fa fa-check"></i><b>7</b> Modeling</a>
<ul>
<li class="chapter" data-level="" data-path="c07-modeling.html"><a href="c07-modeling.html#prereq7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="7.1" data-path="c07-modeling.html"><a href="c07-modeling.html#model-intro"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="c07-modeling.html"><a href="c07-modeling.html#analysis-of-variance"><i class="fa fa-check"></i><b>7.2</b> Analysis of variance</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-6"><i class="fa fa-check"></i><b>7.2.1</b> Syntax</a></li>
<li class="chapter" data-level="7.2.2" data-path="c07-modeling.html"><a href="c07-modeling.html#example-1"><i class="fa fa-check"></i><b>7.2.2</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="c07-modeling.html"><a href="c07-modeling.html#normal-linear-regression"><i class="fa fa-check"></i><b>7.3</b> Normal linear regression</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-7"><i class="fa fa-check"></i><b>7.3.1</b> Syntax</a></li>
<li class="chapter" data-level="7.3.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-7"><i class="fa fa-check"></i><b>7.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="c07-modeling.html"><a href="c07-modeling.html#logistic-regression"><i class="fa fa-check"></i><b>7.4</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-8"><i class="fa fa-check"></i><b>7.4.1</b> Syntax</a></li>
<li class="chapter" data-level="7.4.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-8"><i class="fa fa-check"></i><b>7.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="c07-modeling.html"><a href="c07-modeling.html#exercises-1"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Reporting</b></span></li>
<li class="chapter" data-level="8" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html"><i class="fa fa-check"></i><b>8</b> Communication of results</a>
<ul>
<li class="chapter" data-level="" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#prereq8"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="8.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#describing-results-through-text"><i class="fa fa-check"></i><b>8.2</b> Describing results through text</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#methodology-1"><i class="fa fa-check"></i><b>8.2.1</b> Methodology</a></li>
<li class="chapter" data-level="8.2.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#analysis"><i class="fa fa-check"></i><b>8.2.2</b> Analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#results"><i class="fa fa-check"></i><b>8.2.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#visualizing-data"><i class="fa fa-check"></i><b>8.3</b> Visualizing data</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#tables"><i class="fa fa-check"></i><b>8.3.1</b> Tables</a></li>
<li class="chapter" data-level="8.3.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#charts-and-plots"><i class="fa fa-check"></i><b>8.3.2</b> Charts and plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html"><i class="fa fa-check"></i><b>9</b> Reproducible research</a>
<ul>
<li class="chapter" data-level="9.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#introduction-7"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#project-based-workflows"><i class="fa fa-check"></i><b>9.2</b> Project-based workflows</a></li>
<li class="chapter" data-level="9.3" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#functions-and-packages"><i class="fa fa-check"></i><b>9.3</b> Functions and packages</a></li>
<li class="chapter" data-level="9.4" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#version-control-with-git"><i class="fa fa-check"></i><b>9.4</b> Version control with Git</a></li>
<li class="chapter" data-level="9.5" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#package-management-with-renv"><i class="fa fa-check"></i><b>9.5</b> Package management with {renv}</a></li>
<li class="chapter" data-level="9.6" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#r-environments-with-docker"><i class="fa fa-check"></i><b>9.6</b> R environments with Docker</a></li>
<li class="chapter" data-level="9.7" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#workflow-management-with-targets"><i class="fa fa-check"></i><b>9.7</b> Workflow management with {targets}</a></li>
<li class="chapter" data-level="9.8" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#documentation-with-quarto-and-r-markdown"><i class="fa fa-check"></i><b>9.8</b> Documentation with Quarto and R Markdown</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#parameterization"><i class="fa fa-check"></i><b>9.8.1</b> Parameterization</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#other-tips-for-reproducibility"><i class="fa fa-check"></i><b>9.9</b> Other tips for reproducibility</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#random-number-seeds"><i class="fa fa-check"></i><b>9.9.1</b> Random number seeds</a></li>
<li class="chapter" data-level="9.9.2" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#descriptive-names-and-labels"><i class="fa fa-check"></i><b>9.9.2</b> Descriptive names and labels</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#additional-resources-1"><i class="fa fa-check"></i><b>9.10</b> Additional resources</a></li>
</ul></li>
<li class="part"><span><b>IV Real-life data</b></span></li>
<li class="chapter" data-level="10" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html"><i class="fa fa-check"></i><b>10</b> Sample designs and replicate weights</a>
<ul>
<li class="chapter" data-level="" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#prereq3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="10.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#common-sampling-designs"><i class="fa fa-check"></i><b>10.2</b> Common sampling designs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#simple-random-sample-without-replacement"><i class="fa fa-check"></i><b>10.2.1</b> Simple random sample without replacement</a></li>
<li class="chapter" data-level="10.2.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#simple-random-sample-with-replacement"><i class="fa fa-check"></i><b>10.2.2</b> Simple random sample with replacement</a></li>
<li class="chapter" data-level="10.2.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Stratified sampling </a></li>
<li class="chapter" data-level="10.2.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-cluster"><i class="fa fa-check"></i><b>10.2.4</b> Clustered sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-combo"><i class="fa fa-check"></i><b>10.3</b> Combining sampling methods</a>
<ul>
<li class="chapter" data-level="" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#example-6"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#replicate-weights"><i class="fa fa-check"></i><b>10.4</b> Replicate weights</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#balanced-repeated-replication-method"><i class="fa fa-check"></i><b>10.4.1</b> Balanced Repeated Replication method</a></li>
<li class="chapter" data-level="10.4.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#fays-brr-method"><i class="fa fa-check"></i><b>10.4.2</b> Fay’s BRR method</a></li>
<li class="chapter" data-level="10.4.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-jackknife"><i class="fa fa-check"></i><b>10.4.3</b> Jackknife method</a></li>
<li class="chapter" data-level="10.4.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#bootstrap-method"><i class="fa fa-check"></i><b>10.4.4</b> Bootstrap method</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#exercises-2"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="c11-missing-data.html"><a href="c11-missing-data.html"><i class="fa fa-check"></i><b>11</b> Missing data</a>
<ul>
<li class="chapter" data-level="" data-path="c11-missing-data.html"><a href="c11-missing-data.html#prereq11"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="11.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#introduction-9"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#missing-data-mechanisms"><i class="fa fa-check"></i><b>11.2</b> Missing data mechanisms</a></li>
<li class="chapter" data-level="11.3" data-path="c11-missing-data.html"><a href="c11-missing-data.html#assessing-missing-data"><i class="fa fa-check"></i><b>11.3</b> Assessing missing data</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#summarize-data"><i class="fa fa-check"></i><b>11.3.1</b> Summarize data</a></li>
<li class="chapter" data-level="11.3.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#visualization-of-missing-data"><i class="fa fa-check"></i><b>11.3.2</b> Visualization of missing data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="c11-missing-data.html"><a href="c11-missing-data.html#analysis-with-missing-data"><i class="fa fa-check"></i><b>11.4</b> Analysis with missing data</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#recoding-missing-data"><i class="fa fa-check"></i><b>11.4.1</b> Recoding missing data</a></li>
<li class="chapter" data-level="11.4.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#missing-skip-patt"><i class="fa fa-check"></i><b>11.4.2</b> Accounting for skip patterns</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="c12-recommendations.html"><a href="c12-recommendations.html"><i class="fa fa-check"></i><b>12</b> Successful survey analysis recommendations</a>
<ul>
<li class="chapter" data-level="" data-path="c12-recommendations.html"><a href="c12-recommendations.html#prereq12"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="12.1" data-path="c12-recommendations.html"><a href="c12-recommendations.html#introduction-10"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="c12-recommendations.html"><a href="c12-recommendations.html#recs-survey-process"><i class="fa fa-check"></i><b>12.2</b> Follow the survey analysis process</a></li>
<li class="chapter" data-level="12.3" data-path="c12-recommendations.html"><a href="c12-recommendations.html#begin-with-descriptive-analysis"><i class="fa fa-check"></i><b>12.3</b> Begin with descriptive analysis</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="c12-recommendations.html"><a href="c12-recommendations.html#table-review"><i class="fa fa-check"></i><b>12.3.1</b> Table review</a></li>
<li class="chapter" data-level="12.3.2" data-path="c12-recommendations.html"><a href="c12-recommendations.html#graphical-review"><i class="fa fa-check"></i><b>12.3.2</b> Graphical review</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="c12-recommendations.html"><a href="c12-recommendations.html#check-variable-types"><i class="fa fa-check"></i><b>12.4</b> Check variable types</a></li>
<li class="chapter" data-level="12.5" data-path="c12-recommendations.html"><a href="c12-recommendations.html#improve-debugging-skills"><i class="fa fa-check"></i><b>12.5</b> Improve debugging skills</a></li>
<li class="chapter" data-level="12.6" data-path="c12-recommendations.html"><a href="c12-recommendations.html#think-critically-about-conclusions"><i class="fa fa-check"></i><b>12.6</b> Think critically about conclusions</a></li>
</ul></li>
<li class="part"><span><b>V Vignettes</b></span></li>
<li class="chapter" data-level="13" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html"><i class="fa fa-check"></i><b>13</b> National Crime Victimization Survey vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#prereq9"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="13.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#introduction-11"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#data-structure"><i class="fa fa-check"></i><b>13.2</b> Data structure</a></li>
<li class="chapter" data-level="13.3" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#survey-notation"><i class="fa fa-check"></i><b>13.3</b> Survey notation</a></li>
<li class="chapter" data-level="13.4" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#data-file-preparation"><i class="fa fa-check"></i><b>13.4</b> Data file preparation</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#preparing-files-for-estimation-of-victimization-rates"><i class="fa fa-check"></i><b>13.4.1</b> Preparing files for estimation of victimization rates</a></li>
<li class="chapter" data-level="13.4.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#derived-demographic-variables"><i class="fa fa-check"></i><b>13.4.2</b> Derived demographic variables</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#survey-design-objects"><i class="fa fa-check"></i><b>13.5</b> Survey design objects</a></li>
<li class="chapter" data-level="13.6" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#calculating-estimates"><i class="fa fa-check"></i><b>13.6</b> Calculating estimates</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-tot"><i class="fa fa-check"></i><b>13.6.1</b> Estimation 1: Victimization totals</a></li>
<li class="chapter" data-level="13.6.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-prop"><i class="fa fa-check"></i><b>13.6.2</b> Estimation 2: Victimization proportions</a></li>
<li class="chapter" data-level="13.6.3" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-rate"><i class="fa fa-check"></i><b>13.6.3</b> Estimation 3: Victimization rates</a></li>
<li class="chapter" data-level="13.6.4" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#prev-rate"><i class="fa fa-check"></i><b>13.6.4</b> Estimation 4: Prevalence rates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#statistical-testing"><i class="fa fa-check"></i><b>13.7</b> Statistical testing</a></li>
<li class="chapter" data-level="13.8" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#exercises-3"><i class="fa fa-check"></i><b>13.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html"><i class="fa fa-check"></i><b>14</b> AmericasBarometer vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#prereq10"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="14.1" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#introduction-12"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#data-structure-1"><i class="fa fa-check"></i><b>14.2</b> Data structure</a></li>
<li class="chapter" data-level="14.3" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#preparing-files"><i class="fa fa-check"></i><b>14.3</b> Preparing files</a></li>
<li class="chapter" data-level="14.4" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#survey-design-objects-1"><i class="fa fa-check"></i><b>14.4</b> Survey design objects</a></li>
<li class="chapter" data-level="14.5" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#ambarom-estimates"><i class="fa fa-check"></i><b>14.5</b> Calculating estimates</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#example-worry-about-covid-19"><i class="fa fa-check"></i><b>14.5.1</b> Example: Worry about COVID-19</a></li>
<li class="chapter" data-level="14.5.2" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#example-education-affected-by-covid-19"><i class="fa fa-check"></i><b>14.5.2</b> Example: Education affected by COVID-19</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#ambarom-maps"><i class="fa fa-check"></i><b>14.6</b> Mapping survey data</a></li>
<li class="chapter" data-level="14.7" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#exercises-4"><i class="fa fa-check"></i><b>14.7</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html"><i class="fa fa-check"></i><b>A</b> Importing survey data into R</a>
<ul>
<li class="chapter" data-level="A.1" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-delimiter-separated-files-into-r"><i class="fa fa-check"></i><b>A.1</b> Importing delimiter-separated files into R</a></li>
<li class="chapter" data-level="A.2" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-excel-files-into-r"><i class="fa fa-check"></i><b>A.2</b> Importing Excel files into R</a></li>
<li class="chapter" data-level="A.3" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-stata-sas-and-spss-files-into-r"><i class="fa fa-check"></i><b>A.3</b> Importing Stata, SAS, and SPSS files into R</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#syntax-9"><i class="fa fa-check"></i><b>A.3.1</b> Syntax</a></li>
<li class="chapter" data-level="A.3.2" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#working-with-labeled-data"><i class="fa fa-check"></i><b>A.3.2</b> Working with labeled data</a></li>
<li class="chapter" data-level="A.3.3" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#labeled-missing-data-values"><i class="fa fa-check"></i><b>A.3.3</b> Labeled missing data values</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-apis-into-r"><i class="fa fa-check"></i><b>A.4</b> Importing data from APIs into R</a></li>
<li class="chapter" data-level="A.5" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-databases-in-r"><i class="fa fa-check"></i><b>A.5</b> Importing data from databases in R</a></li>
<li class="chapter" data-level="A.6" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-other-formats"><i class="fa fa-check"></i><b>A.6</b> Importing data from other formats</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="anes-cb.html"><a href="anes-cb.html"><i class="fa fa-check"></i><b>B</b> ANES derived variable codebook</a>
<ul>
<li class="chapter" data-level="B.1" data-path="anes-cb.html"><a href="anes-cb.html#admin"><i class="fa fa-check"></i><b>B.1</b> ADMIN</a></li>
<li class="chapter" data-level="B.2" data-path="anes-cb.html"><a href="anes-cb.html#weights"><i class="fa fa-check"></i><b>B.2</b> WEIGHTS</a></li>
<li class="chapter" data-level="B.3" data-path="anes-cb.html"><a href="anes-cb.html#pre-election-survey-questionnaire"><i class="fa fa-check"></i><b>B.3</b> PRE-ELECTION SURVEY QUESTIONNAIRE</a></li>
<li class="chapter" data-level="B.4" data-path="anes-cb.html"><a href="anes-cb.html#post-election-survey-questionnaire"><i class="fa fa-check"></i><b>B.4</b> POST-ELECTION SURVEY QUESTIONNAIRE</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="recs-cb.html"><a href="recs-cb.html"><i class="fa fa-check"></i><b>C</b> RECS derived variable codebook</a>
<ul>
<li class="chapter" data-level="C.1" data-path="recs-cb.html"><a href="recs-cb.html#admin-1"><i class="fa fa-check"></i><b>C.1</b> ADMIN</a></li>
<li class="chapter" data-level="C.2" data-path="recs-cb.html"><a href="recs-cb.html#geography"><i class="fa fa-check"></i><b>C.2</b> GEOGRAPHY</a></li>
<li class="chapter" data-level="C.3" data-path="recs-cb.html"><a href="recs-cb.html#weather"><i class="fa fa-check"></i><b>C.3</b> WEATHER</a></li>
<li class="chapter" data-level="C.4" data-path="recs-cb.html"><a href="recs-cb.html#your-home"><i class="fa fa-check"></i><b>C.4</b> YOUR HOME</a></li>
<li class="chapter" data-level="C.5" data-path="recs-cb.html"><a href="recs-cb.html#space-heating"><i class="fa fa-check"></i><b>C.5</b> SPACE HEATING</a></li>
<li class="chapter" data-level="C.6" data-path="recs-cb.html"><a href="recs-cb.html#air-conditioning"><i class="fa fa-check"></i><b>C.6</b> AIR CONDITIONING</a></li>
<li class="chapter" data-level="C.7" data-path="recs-cb.html"><a href="recs-cb.html#thermostat"><i class="fa fa-check"></i><b>C.7</b> THERMOSTAT</a></li>
<li class="chapter" data-level="C.8" data-path="recs-cb.html"><a href="recs-cb.html#weights-1"><i class="fa fa-check"></i><b>C.8</b> WEIGHTS</a></li>
<li class="chapter" data-level="C.9" data-path="recs-cb.html"><a href="recs-cb.html#consumption-and-expenditure"><i class="fa fa-check"></i><b>C.9</b> CONSUMPTION AND EXPENDITURE</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="exercise-solutions.html"><a href="exercise-solutions.html"><i class="fa fa-check"></i><b>D</b> Exercise solutions</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#descriptive-analysis"><i class="fa fa-check"></i>5 - Descriptive analysis</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#statistical-testing-1"><i class="fa fa-check"></i>6 - Statistical testing</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#modeling"><i class="fa fa-check"></i>7 - Modeling</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#specifying-sample-designs-and-replicate-weights-in-srvyr"><i class="fa fa-check"></i>10 - Specifying sample designs and replicate weights in {srvyr}</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#national-crime-victimization-survey-vignette"><i class="fa fa-check"></i>13 - National Crime Victimization Survey Vignette</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#americasbarometer-vignette"><i class="fa fa-check"></i>14 - AmericasBarometer Vignette</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring Complex Survey Data Analysis Using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="importing-survey-data-into-r" class="section level1 hasAnchor" number="15">
<h1><span class="header-section-number">A</span> Importing survey data into R<a href="importing-survey-data-into-r.html#importing-survey-data-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>To analyze a survey, we need to bring the survey data into R. This process is often referred to as importing, loading, or reading in data. Survey files come in different formats depending on the software used to create them. One of the many advantages of R is its flexibility in handling various data formats, regardless of their file extensions. Here are examples of common public-use survey file formats we may encounter:</p>
<ul>
<li>Delimiter-separated text files</li>
<li>Excel spreadsheets in <code>.xls</code> or <code>.xlsx</code> format</li>
<li>R native <code>.rda</code> files</li>
<li>Stata datasets in <code>.dta</code> format</li>
<li>SAS datasets in <code>.sas</code> format</li>
<li>SPSS datasets in <code>.sav</code> format</li>
<li>Application Programming Interfaces (APIs), often in JavaScript Object Notation (JSON) format</li>
<li>Data stored in databases</li>
</ul>
<p>This appendix guides analysts through the process of importing these various types of survey data into R.</p>
<div id="importing-delimiter-separated-files-into-r" class="section level2 hasAnchor" number="15.1">
<h2><span class="header-section-number">A.1</span> Importing delimiter-separated files into R<a href="importing-survey-data-into-r.html#importing-delimiter-separated-files-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Delimiter-separated files use specific characters, known as delimiters, to separate values within the file. For example, CSV (comma-separated values) files use commas as delimiters, while TSV (tab-separated values) files use tabs. These file formats are widely used because of their simplicity and compatibility with various software applications.</p>
<p>The {readr} package, part of the tidyverse ecosystem, offers efficient ways to import delimiter-separated files into R <span class="citation">(<a href="#ref-R-readr">Wickham, Hester, and Bryan 2024</a>)</span>. It offers several advantages, including automatic data type detection and flexible handling of missing values, depending on one’s survey analysis needs. The {readr} package includes functions for:</p>
<ul>
<li><code>read_csv()</code>: This function is specifically designed to read CSV files.</li>
<li><code>read_tsv()</code>: Use this function for TSV files.</li>
<li><code>read_delim()</code>: This function can handle a broader range of delimiter-separated files, including CSV and TSV. Specify the delimiter using the <code>delim</code> argument.</li>
<li><code>read_fwf()</code>: This function is useful for importing fixed-width files (FWF), where columns have predetermined widths, and values are aligned in specific positions.</li>
<li><code>read_table()</code>: Use this function when dealing with whitespace-separated files, such as those with spaces or multiple spaces as delimiters.</li>
<li><code>read_log()</code>: This function can read and parse web log files.</li>
</ul>
<p>The syntax for <code>read_csv()</code> is:</p>
<pre><code>read_csv(
  file,
  col_names = TRUE,
  col_types = NULL,
  col_select = NULL,
  id = NULL,
  locale = default_locale(),
  na = c(&quot;&quot;, &quot;NA&quot;),
  comment = &quot;&quot;,
  trim_ws = TRUE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  name_repair = &quot;unique&quot;,
  num_threads = readr_threads(),
  progress = show_progress(),
  show_col_types = should_show_types(),
  skip_empty_rows = TRUE,
  lazy = should_read_lazy()
)</code></pre>
<p>The arguments are:</p>
<ul>
<li><code>file</code>: the path to the CSV file to import</li>
<li><code>col_names</code>: a value of <code>TRUE</code> imports the first row of the <code>file</code> as column names and not included in the data frame. A value of <code>FALSE</code> creates automated column names. Alternatively, we can provide a vector of column names.</li>
<li><code>col_types</code>: by default, R infers the column variable types. We can also provide a column specification using <code>list()</code> or <code>cols()</code>; for example, use <code>col_types = cols(.default = "c")</code> to read all the columns as characters. Alternatively, we can use a string to specify the variable types for each column.</li>
<li><code>col_select</code>: the columns to include in the results</li>
<li><code>id</code>: a column for storing the file path. This is useful for keeping track of the input file when importing multiple CSVs at a time.</li>
<li><code>locale</code>: the location-specific defaults for the file</li>
<li><code>na</code>: a character vector of values to interpret as missing</li>
<li><code>comment</code>: a character vector of values to interpret as comments</li>
<li><code>trim_ws</code>: a value of <code>TRUE</code> trims leading and trailing white space</li>
<li><code>skip</code>: number of lines to skip before importing the data</li>
<li><code>n_max</code>: maximum number of lines to read</li>
<li><code>guess_max</code>: maximum number of lines used for guessing column types</li>
<li><code>name_repair</code>: whether to check column names. By default, the column names are unique.</li>
<li><code>num_threads</code>: the number of processing threads to use for initial parsing and lazy reading of data</li>
<li><code>progress</code>: a value of <code>TRUE</code> displays a progress bar</li>
<li><code>show_col_types</code>: a value of <code>TRUE</code> displays the column types</li>
<li><code>skip_empty_rows</code>: a value of <code>TRUE</code> ignores blank rows</li>
<li><code>lazy</code>: a value of <code>TRUE</code> reads values lazily</li>
</ul>
<p>The other functions share a similar syntax to <code>read_csv()</code>. To find more details, run <code>??</code> followed by the function name. For example, run <code>??read_tsv</code> in the Console for additional information on importing TSV files.</p>
<p>In the example below, we use {readr} to import a CSV file named ‘anes_timeseries_2020_csv_20220210.csv’ into an R object called <code>anes_csv</code>. The <code>read_csv()</code> imports the file and stores the data in the <code>anes_csv</code> object. We can then use this object for further analysis.</p>
<div class="sourceCode" id="cb501"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb501-1"><a href="importing-survey-data-into-r.html#cb501-1" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb501-2"><a href="importing-survey-data-into-r.html#cb501-2" tabindex="-1"></a></span>
<span id="cb501-3"><a href="importing-survey-data-into-r.html#cb501-3" tabindex="-1"></a>anes_csv <span class="ot">&lt;-</span></span>
<span id="cb501-4"><a href="importing-survey-data-into-r.html#cb501-4" tabindex="-1"></a>  <span class="fu">read_csv</span>(<span class="at">file =</span> <span class="st">&quot;data/anes_timeseries_2020_csv_20220210.csv&quot;</span>)</span></code></pre></div>
</div>
<div id="importing-excel-files-into-r" class="section level2 hasAnchor" number="15.2">
<h2><span class="header-section-number">A.2</span> Importing Excel files into R<a href="importing-survey-data-into-r.html#importing-excel-files-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Excel, a widely used spreadsheet software program created by Microsoft, is a common file format in survey research. We can import Excel spreadsheets into the R environment using the {readxl} package. The package supports both the legacy <code>.xls</code> files and the modern <code>.xlsx</code> format.</p>
<p>To import Excel data into R, we can use the <code>read_excel()</code> function from the {readxl} package. This function offers a range of options for the import process. Let’s explore the syntax:</p>
<pre><code>read_excel(
  path,
  sheet = NULL,
  range = NULL,
  col_names = TRUE,
  col_types = NULL,
  na = &quot;&quot;,
  trim_ws = TRUE,
  skip = 0,
  n_max = Inf,
  guess_max = min(1000, n_max),
  progress = readxl_progress(),
  .name_repair = &quot;unique&quot;
)</code></pre>
<p>The arguments are:</p>
<ul>
<li><code>path</code>: the path to the Excel file to import</li>
<li><code>sheet</code>: the name or index of the sheet (sometimes called tabs) within the Excel file</li>
<li><code>range</code>: the range of cells to import (for example, <code>P15:T87</code>)</li>
<li><code>col_names</code>: indicates whether the first row of the dataset contains column names</li>
<li><code>col_types</code>: specifies the data types of columns</li>
<li><code>na</code>: defines the representation of missing values (for example, <code>NULL</code>)</li>
<li><code>trim_ws</code>: controls whether leading and trailing whitespaces should be trimmed</li>
<li><code>skip</code> and <code>n_max</code>: enable skipping rows and limit the number of rows imported</li>
<li><code>guess_max</code>: sets the maximum number of rows used for data type guessing</li>
<li><code>progress</code>: specifies a progress bar for large imports</li>
<li><code>.name_repair</code>: determines how column names are repaired if they are not valid</li>
</ul>
<p>In the code example below, we import an Excel spreadsheet named ‘anes_timeseries_2020_csv_20220210.xlsx’ into R. The resulting data is saved as a tibble in the <code>anes_excel</code> object, ready for further analysis.</p>
<div class="sourceCode" id="cb503"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb503-1"><a href="importing-survey-data-into-r.html#cb503-1" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb503-2"><a href="importing-survey-data-into-r.html#cb503-2" tabindex="-1"></a></span>
<span id="cb503-3"><a href="importing-survey-data-into-r.html#cb503-3" tabindex="-1"></a>anes_excel <span class="ot">&lt;-</span></span>
<span id="cb503-4"><a href="importing-survey-data-into-r.html#cb503-4" tabindex="-1"></a>  <span class="fu">read_excel</span>(<span class="at">path =</span> <span class="st">&quot;data/anes_timeseries_2020_csv_20220210.xlsx&quot;</span>)</span></code></pre></div>
</div>
<div id="importing-stata-sas-and-spss-files-into-r" class="section level2 hasAnchor" number="15.3">
<h2><span class="header-section-number">A.3</span> Importing Stata, SAS, and SPSS files into R<a href="importing-survey-data-into-r.html#importing-stata-sas-and-spss-files-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The {haven} package, also from the tidyverse ecosystem, imports various proprietary data formats: Stata <code>.dta</code> files, SPSS <code>.sav</code> files, and SAS <code>.sas7bdat</code> and <code>.sas7bcat</code> files <span class="citation">(<a href="#ref-R-haven">Wickham, Miller, and Smith 2023</a>)</span>. One of the notable strengths of the {haven} package is its ability to handle multiple proprietary formats within a unified framework. It offers dedicated functions for each supported proprietary format, making it straightforward to import data regardless of the program. Here, we introduce <code>read_dat()</code> for Stata files, <code>read_sav()</code> for SPSS files, and <code>read_sas()</code> for SAS files.</p>
<div id="syntax-9" class="section level3 hasAnchor" number="15.3.1">
<h3><span class="header-section-number">A.3.1</span> Syntax<a href="importing-survey-data-into-r.html#syntax-9" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Let’s explore the syntax for importing Stata files <code>.dat</code> files using <code>haven::read_dat()</code>:</p>
<div class="sourceCode" id="cb504"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb504-1"><a href="importing-survey-data-into-r.html#cb504-1" tabindex="-1"></a><span class="fu">read_dta</span>(</span>
<span id="cb504-2"><a href="importing-survey-data-into-r.html#cb504-2" tabindex="-1"></a>  file,</span>
<span id="cb504-3"><a href="importing-survey-data-into-r.html#cb504-3" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="cn">NULL</span>,</span>
<span id="cb504-4"><a href="importing-survey-data-into-r.html#cb504-4" tabindex="-1"></a>  <span class="at">col_select =</span> <span class="cn">NULL</span>,</span>
<span id="cb504-5"><a href="importing-survey-data-into-r.html#cb504-5" tabindex="-1"></a>  <span class="at">skip =</span> <span class="dv">0</span>,</span>
<span id="cb504-6"><a href="importing-survey-data-into-r.html#cb504-6" tabindex="-1"></a>  <span class="at">n_max =</span> <span class="cn">Inf</span>,</span>
<span id="cb504-7"><a href="importing-survey-data-into-r.html#cb504-7" tabindex="-1"></a>  <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span></span>
<span id="cb504-8"><a href="importing-survey-data-into-r.html#cb504-8" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>file</code>: the path to the proprietary data file to import</li>
<li><code>encoding</code>: specifies the character encoding of the data file</li>
<li><code>col_select</code>: selects specific columns for import</li>
<li><code>skip</code> and <code>n_max</code>: control the number of rows skipped and the maximum number of rows imported</li>
<li><code>.name_repair</code>: determines how column names are repaired if they are not valid</li>
</ul>
<p>The syntax for <code>read_sav()</code> is similar to <code>read_dat()</code>:</p>
<pre><code>read_sav(
  file,
  encoding = NULL,
  user_na = FALSE,
  col_select = NULL,
  skip = 0,
  n_max = Inf,
  .name_repair = &quot;unique&quot;
)</code></pre>
<p>The arguments are:</p>
<ul>
<li><code>file</code>: the path to the proprietary data file to import</li>
<li><code>encoding</code>: specifies the character encoding of the data file</li>
<li><code>col_select</code>: selects specific columns for import</li>
<li><code>user_na</code>: a value of <code>TRUE</code> reads variables with user-defined missing labels into <code>labelled_spss()</code> objects</li>
<li><code>skip</code> and <code>n_max</code>: control the number of rows skipped and the maximum number of rows imported</li>
<li><code>.name_repair</code>: determines how column names are repaired if they are not valid</li>
</ul>
<p>The syntax for importing SAS files with <code>read_sas()</code> is as follows:</p>
<div class="sourceCode" id="cb506"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb506-1"><a href="importing-survey-data-into-r.html#cb506-1" tabindex="-1"></a><span class="fu">read_sas</span>(</span>
<span id="cb506-2"><a href="importing-survey-data-into-r.html#cb506-2" tabindex="-1"></a>  data_file,</span>
<span id="cb506-3"><a href="importing-survey-data-into-r.html#cb506-3" tabindex="-1"></a>  <span class="at">catalog_file =</span> <span class="cn">NULL</span>,</span>
<span id="cb506-4"><a href="importing-survey-data-into-r.html#cb506-4" tabindex="-1"></a>  <span class="at">encoding =</span> <span class="cn">NULL</span>,</span>
<span id="cb506-5"><a href="importing-survey-data-into-r.html#cb506-5" tabindex="-1"></a>  <span class="at">catalog_encoding =</span> encoding,</span>
<span id="cb506-6"><a href="importing-survey-data-into-r.html#cb506-6" tabindex="-1"></a>  <span class="at">col_select =</span> <span class="cn">NULL</span>,</span>
<span id="cb506-7"><a href="importing-survey-data-into-r.html#cb506-7" tabindex="-1"></a>  <span class="at">skip =</span> <span class="dv">0</span><span class="dt">L</span>,</span>
<span id="cb506-8"><a href="importing-survey-data-into-r.html#cb506-8" tabindex="-1"></a>  <span class="at">n_max =</span> <span class="cn">Inf</span>,</span>
<span id="cb506-9"><a href="importing-survey-data-into-r.html#cb506-9" tabindex="-1"></a>  <span class="at">.name_repair =</span> <span class="st">&quot;unique&quot;</span></span>
<span id="cb506-10"><a href="importing-survey-data-into-r.html#cb506-10" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>data_file</code>: the path to the proprietary data file to import</li>
<li><code>catalog_file</code>: the path to the catalog file to import</li>
<li><code>encoding</code>: specifies the character encoding of the data file</li>
<li><code>catalog_encoding</code>: specifies the character encoding of the catalog file</li>
<li><code>col_select</code>: selects specific columns for import</li>
<li><code>skip</code> and <code>n_max</code>: control the number of rows skipped and the maximum number of rows imported</li>
<li><code>.name_repair</code>: determines how column names are repaired if they are not valid</li>
</ul>
<p>In the code examples below, we demonstrate how to import Stata, SPSS, and SAS files into R using the respective {haven} functions. The resulting data are stored in <code>anes_dta</code>, <code>anes_sav</code>, and <code>anes_sas</code> objects as tibbles, ready for use in R. For the Stata example, we show how to import the data from the {srvyrexploR} package to use in examples.</p>
<p>Stata: </p>
<div class="sourceCode" id="cb507"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb507-1"><a href="importing-survey-data-into-r.html#cb507-1" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb507-2"><a href="importing-survey-data-into-r.html#cb507-2" tabindex="-1"></a></span>
<span id="cb507-3"><a href="importing-survey-data-into-r.html#cb507-3" tabindex="-1"></a>anes_dta <span class="ot">&lt;-</span></span>
<span id="cb507-4"><a href="importing-survey-data-into-r.html#cb507-4" tabindex="-1"></a>  <span class="fu">read_dta</span>(<span class="at">file =</span> <span class="fu">system.file</span>(<span class="st">&quot;extdata&quot;</span>,</span>
<span id="cb507-5"><a href="importing-survey-data-into-r.html#cb507-5" tabindex="-1"></a>    <span class="st">&quot;anes_2020_stata_example.dta&quot;</span>,</span>
<span id="cb507-6"><a href="importing-survey-data-into-r.html#cb507-6" tabindex="-1"></a>    <span class="at">package =</span> <span class="st">&quot;srvyrexploR&quot;</span></span>
<span id="cb507-7"><a href="importing-survey-data-into-r.html#cb507-7" tabindex="-1"></a>  ))</span></code></pre></div>
<p></p>
<p>SPSS:</p>
<div class="sourceCode" id="cb508"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb508-1"><a href="importing-survey-data-into-r.html#cb508-1" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb508-2"><a href="importing-survey-data-into-r.html#cb508-2" tabindex="-1"></a></span>
<span id="cb508-3"><a href="importing-survey-data-into-r.html#cb508-3" tabindex="-1"></a>anes_sav <span class="ot">&lt;-</span></span>
<span id="cb508-4"><a href="importing-survey-data-into-r.html#cb508-4" tabindex="-1"></a>  <span class="fu">read_sav</span>(<span class="at">file =</span> <span class="st">&quot;data/anes_timeseries_2020_spss_20220210.sav&quot;</span>)</span></code></pre></div>
<p>SAS:</p>
<div class="sourceCode" id="cb509"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb509-1"><a href="importing-survey-data-into-r.html#cb509-1" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb509-2"><a href="importing-survey-data-into-r.html#cb509-2" tabindex="-1"></a></span>
<span id="cb509-3"><a href="importing-survey-data-into-r.html#cb509-3" tabindex="-1"></a>anes_sas <span class="ot">&lt;-</span></span>
<span id="cb509-4"><a href="importing-survey-data-into-r.html#cb509-4" tabindex="-1"></a>  <span class="fu">read_sas</span>(<span class="at">data_file =</span> <span class="st">&quot;data/anes_timeseries_2020_sas_20220210.sas7bdat&quot;</span>)</span></code></pre></div>
</div>
<div id="working-with-labeled-data" class="section level3 hasAnchor" number="15.3.2">
<h3><span class="header-section-number">A.3.2</span> Working with labeled data<a href="importing-survey-data-into-r.html#working-with-labeled-data" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
Stata, SPSS, and SAS files can contain labeled variables and values. These labels provide descriptive information about categorical data, making them easier to understand and analyze. When importing data from Stata, SPSS, or SAS, we want to preserve these labels to maintain data fidelity.</p>
<p>Consider a variable like ‘Education Level’ with coded values (e.g., 1, 2, 3). Without labels, these codes can be cryptic. However, with labels (‘High School Graduate,’ ‘Bachelor’s Degree,’ ‘Master’s Degree’), the data become more informative and easier to work with.</p>
<p>With the {haven} package, we have the capability to import and work with labeled data from Stata, SPSS, and SAS files. The package uses a special class of data called <code>haven_labelled</code> to store labeled variables. When a dataset label is defined in Stata, it is stored in the ‘label’ attribute of the tibble when imported, ensuring that the information is not lost.</p>
<p>We can use functions like <code>select()</code>, <code>glimpse()</code>, and <code>is.labelled()</code> to inspect the imported data and verify if the variables are labeled. Take a look at the ANES Stata file. Notice that categorical variables <code>V200002</code> and <code>V201006</code> are marked with a type of <code>&lt;dbl+lbl&gt;</code>. This notation indicates that these variables are labeled.</p>
<div class="sourceCode" id="cb510"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb510-1"><a href="importing-survey-data-into-r.html#cb510-1" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb510-2"><a href="importing-survey-data-into-r.html#cb510-2" tabindex="-1"></a></span>
<span id="cb510-3"><a href="importing-survey-data-into-r.html#cb510-3" tabindex="-1"></a>anes_dta <span class="sc">%&gt;%</span></span>
<span id="cb510-4"><a href="importing-survey-data-into-r.html#cb510-4" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb510-5"><a href="importing-survey-data-into-r.html#cb510-5" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 7,453
## Columns: 6
## $ V200001  &lt;dbl&gt; 200015, 200022, 200039, 200046, 200053, 200060, 20008…
## $ V200002  &lt;dbl+lbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3…
## $ V200010b &lt;dbl&gt; 1.0057, 1.1635, 0.7687, 0.5210, 0.9658, 0.2347, 0.440…
## $ V200010d &lt;dbl&gt; 9, 26, 41, 29, 23, 37, 7, 37, 32, 41, 22, 7, 38, 21, …
## $ V200010c &lt;dbl&gt; 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 2, 1, 1,…
## $ V201006  &lt;dbl+lbl&gt; 2, 3, 2, 3, 2, 1, 2, 3, 2, 2, 2, 2, 2, 1, 2, 1, 1…</code></pre>
<p>We can confirm their label status using the <code>haven::is.labelled()</code> function.</p>
<div class="sourceCode" id="cb512"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb512-1"><a href="importing-survey-data-into-r.html#cb512-1" tabindex="-1"></a>haven<span class="sc">::</span><span class="fu">is.labelled</span>(anes_dta<span class="sc">$</span>V200002)</span></code></pre></div>
<pre><code>## [1] TRUE</code></pre>
<p>To explore the labels further, we can use the <code>attributes()</code> function. This function provides insights into both the variable labels (<code>$label</code>) and the associated value labels (<code>$labels</code>).</p>
<div class="sourceCode" id="cb514"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb514-1"><a href="importing-survey-data-into-r.html#cb514-1" tabindex="-1"></a><span class="fu">attributes</span>(anes_dta<span class="sc">$</span>V200002)</span></code></pre></div>
<pre><code>## $label
## [1] &quot;Mode of interview: pre-election interview&quot;
## 
## $format.stata
## [1] &quot;%10.0g&quot;
## 
## $class
## [1] &quot;haven_labelled&quot; &quot;vctrs_vctr&quot;     &quot;double&quot;        
## 
## $labels
##     1. Video 2. Telephone       3. Web 
##            1            2            3</code></pre>
<p>When we import a labeled dataset using {haven}, it results in a tibble containing both the data and label information. However, this is meant to be an intermediary data structure and not intended to be the final data format for analysis. Instead, we should convert it into a regular R data frame before continuing our data workflow. There are two primary methods to achieve this conversion: (1) convert to factors or (2) remove the labels.</p>
<div id="option-1-convert-the-vector-into-a-factor" class="section level4 unnumbered hasAnchor">
<h4>Option 1: Convert the vector into a factor<a href="importing-survey-data-into-r.html#option-1-convert-the-vector-into-a-factor" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>
Factors are native R data types for working with categorical data. They consist of integer values that correspond to character values, known as levels. Below is a dummy example of factors. The <code>factors</code> show the four different levels in the data: <code>strongly agree</code>, <code>agree</code>, <code>disagree</code>, and <code>strongly disagree</code>.</p>
<div class="sourceCode" id="cb516"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb516-1"><a href="importing-survey-data-into-r.html#cb516-1" tabindex="-1"></a>response <span class="ot">&lt;-</span></span>
<span id="cb516-2"><a href="importing-survey-data-into-r.html#cb516-2" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;strongly agree&quot;</span>, <span class="st">&quot;agree&quot;</span>, <span class="st">&quot;agree&quot;</span>, <span class="st">&quot;disagree&quot;</span>, <span class="st">&quot;strongly disagree&quot;</span>)</span>
<span id="cb516-3"><a href="importing-survey-data-into-r.html#cb516-3" tabindex="-1"></a></span>
<span id="cb516-4"><a href="importing-survey-data-into-r.html#cb516-4" tabindex="-1"></a>response_levels <span class="ot">&lt;-</span></span>
<span id="cb516-5"><a href="importing-survey-data-into-r.html#cb516-5" tabindex="-1"></a>  <span class="fu">c</span>(<span class="st">&quot;strongly agree&quot;</span>, <span class="st">&quot;agree&quot;</span>, <span class="st">&quot;disagree&quot;</span>, <span class="st">&quot;strongly disagree&quot;</span>)</span>
<span id="cb516-6"><a href="importing-survey-data-into-r.html#cb516-6" tabindex="-1"></a></span>
<span id="cb516-7"><a href="importing-survey-data-into-r.html#cb516-7" tabindex="-1"></a>factors <span class="ot">&lt;-</span> <span class="fu">factor</span>(response, <span class="at">levels =</span> response_levels)</span>
<span id="cb516-8"><a href="importing-survey-data-into-r.html#cb516-8" tabindex="-1"></a></span>
<span id="cb516-9"><a href="importing-survey-data-into-r.html#cb516-9" tabindex="-1"></a>factors</span></code></pre></div>
<pre><code>## [1] strongly agree    agree             agree            
## [4] disagree          strongly disagree
## Levels: strongly agree agree disagree strongly disagree</code></pre>
<p>Factors are integer vectors, though they may look like character strings. We can confirm by looking at the vector’s structure:</p>
<div class="sourceCode" id="cb518"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb518-1"><a href="importing-survey-data-into-r.html#cb518-1" tabindex="-1"></a><span class="fu">glimpse</span>(factors)</span></code></pre></div>
<pre><code>##  Factor w/ 4 levels &quot;strongly agree&quot;,..: 1 2 2 3 4</code></pre>
<p>R’s factors differ from Stata, SPSS, or SAS labeled vectors. However, we can convert labeled variables into factors using the <code>as_factor()</code> function.</p>
<div class="sourceCode" id="cb520"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb520-1"><a href="importing-survey-data-into-r.html#cb520-1" tabindex="-1"></a>anes_dta <span class="sc">%&gt;%</span></span>
<span id="cb520-2"><a href="importing-survey-data-into-r.html#cb520-2" tabindex="-1"></a>  <span class="fu">transmute</span>(<span class="at">V200002 =</span> <span class="fu">as_factor</span>(V200002))</span></code></pre></div>
<pre><code>## # A tibble: 7,453 × 1
##    V200002
##    &lt;fct&gt;  
##  1 3. Web 
##  2 3. Web 
##  3 3. Web 
##  4 3. Web 
##  5 3. Web 
##  6 3. Web 
##  7 3. Web 
##  8 3. Web 
##  9 3. Web 
## 10 3. Web 
## # ℹ 7,443 more rows</code></pre>
<p>The <code>as_factor()</code> function can be applied to all columns in a data frame or individual ones. Below, we convert all <code>&lt;dbl+lbl&gt;</code> columns into factors.</p>
<div class="sourceCode" id="cb522"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb522-1"><a href="importing-survey-data-into-r.html#cb522-1" tabindex="-1"></a>anes_dta_factor <span class="ot">&lt;-</span></span>
<span id="cb522-2"><a href="importing-survey-data-into-r.html#cb522-2" tabindex="-1"></a>  anes_dta <span class="sc">%&gt;%</span></span>
<span id="cb522-3"><a href="importing-survey-data-into-r.html#cb522-3" tabindex="-1"></a>  <span class="fu">as_factor</span>()</span>
<span id="cb522-4"><a href="importing-survey-data-into-r.html#cb522-4" tabindex="-1"></a></span>
<span id="cb522-5"><a href="importing-survey-data-into-r.html#cb522-5" tabindex="-1"></a>anes_dta_factor <span class="sc">%&gt;%</span></span>
<span id="cb522-6"><a href="importing-survey-data-into-r.html#cb522-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb522-7"><a href="importing-survey-data-into-r.html#cb522-7" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 7,453
## Columns: 6
## $ V200001  &lt;dbl&gt; 200015, 200022, 200039, 200046, 200053, 200060, 20008…
## $ V200002  &lt;fct&gt; 3. Web, 3. Web, 3. Web, 3. Web, 3. Web, 3. Web, 3. We…
## $ V200010b &lt;dbl&gt; 1.0057, 1.1635, 0.7687, 0.5210, 0.9658, 0.2347, 0.440…
## $ V200010d &lt;dbl&gt; 9, 26, 41, 29, 23, 37, 7, 37, 32, 41, 22, 7, 38, 21, …
## $ V200010c &lt;dbl&gt; 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 2, 1, 1,…
## $ V201006  &lt;fct&gt; 2. Somewhat interested, 3. Not much interested, 2. So…</code></pre>
<p></p>
</div>
<div id="option-2-strip-the-labels" class="section level4 unnumbered hasAnchor">
<h4>Option 2: Strip the labels<a href="importing-survey-data-into-r.html#option-2-strip-the-labels" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The second option is to remove the labels altogether, converting the labeled data into a regular R data frame. To remove, or ‘zap,’ the labels from our tibble, we can use the {haven} package’s <code>zap_label()</code> and <code>zap_labels()</code> functions. This approach removes the labels but retains the data values in their original form.</p>
<p>The ANES Stata file columns contain variable labels. Using the <code>map()</code> function from {purrr}, we can review the labels using <code>attr</code>. In the example below, we list the first two variables and their labels. For instance, the label for <code>V200002</code> is “Mode of interview: pre-election interview.”</p>
<div class="sourceCode" id="cb524"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb524-1"><a href="importing-survey-data-into-r.html#cb524-1" tabindex="-1"></a>purrr<span class="sc">::</span><span class="fu">map</span>(anes_dta, <span class="sc">~</span> <span class="fu">attr</span>(.x, <span class="st">&quot;label&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb524-2"><a href="importing-survey-data-into-r.html#cb524-2" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## $V200001
## [1] &quot;2020 Case ID&quot;
## 
## $V200002
## [1] &quot;Mode of interview: pre-election interview&quot;</code></pre>
<p>Use <code>zap_label()</code> to remove the variable labels but retain the value labels. Notice that the labels return as <code>NULL</code>.</p>
<div class="sourceCode" id="cb526"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb526-1"><a href="importing-survey-data-into-r.html#cb526-1" tabindex="-1"></a><span class="fu">zap_label</span>(anes_dta) <span class="sc">%&gt;%</span></span>
<span id="cb526-2"><a href="importing-survey-data-into-r.html#cb526-2" tabindex="-1"></a>  purrr<span class="sc">::</span><span class="fu">map</span>(<span class="sc">~</span> <span class="fu">attr</span>(.x, <span class="st">&quot;label&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb526-3"><a href="importing-survey-data-into-r.html#cb526-3" tabindex="-1"></a>  <span class="fu">head</span>(<span class="dv">2</span>)</span></code></pre></div>
<pre><code>## $V200001
## NULL
## 
## $V200002
##     1. Video 2. Telephone       3. Web 
##            1            2            3</code></pre>
<p>To remove the value labels, use <code>zap_labels()</code>. Notice the previous <code>&lt;dbl+lbl&gt;</code> columns are now <code>&lt;dbl&gt;</code>.</p>
<div class="sourceCode" id="cb528"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb528-1"><a href="importing-survey-data-into-r.html#cb528-1" tabindex="-1"></a><span class="fu">zap_labels</span>(anes_dta) <span class="sc">%&gt;%</span></span>
<span id="cb528-2"><a href="importing-survey-data-into-r.html#cb528-2" tabindex="-1"></a>  <span class="fu">select</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>) <span class="sc">%&gt;%</span></span>
<span id="cb528-3"><a href="importing-survey-data-into-r.html#cb528-3" tabindex="-1"></a>  <span class="fu">glimpse</span>()</span></code></pre></div>
<pre><code>## Rows: 7,453
## Columns: 6
## $ V200001  &lt;dbl&gt; 200015, 200022, 200039, 200046, 200053, 200060, 20008…
## $ V200002  &lt;dbl&gt; 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3, 3,…
## $ V200010b &lt;dbl&gt; 1.0057, 1.1635, 0.7687, 0.5210, 0.9658, 0.2347, 0.440…
## $ V200010d &lt;dbl&gt; 9, 26, 41, 29, 23, 37, 7, 37, 32, 41, 22, 7, 38, 21, …
## $ V200010c &lt;dbl&gt; 2, 2, 1, 2, 1, 2, 1, 2, 2, 2, 1, 1, 2, 2, 2, 2, 1, 1,…
## $ V201006  &lt;dbl&gt; 2, 3, 2, 3, 2, 1, 2, 3, 2, 2, 2, 2, 2, 1, 2, 1, 1, 1,…</code></pre>
<p>While it is important to convert labeled datasets into regular R data frames for working in R, the labels themselves often contain valuable information that provides context and meaning to the survey variables. To aid with interpretability and documentation, we can create a data dictionary from the labeled dataset. A data dictionary is a reference document that provides detailed information about the variables and values of a survey.
</p>
<p>The {labelled} package offers a convenient function, <code>generate_dictionary()</code>, that creates data dictionaries directly from a labeled dataset <span class="citation">(<a href="#ref-R-labelled">Larmarange 2024</a>)</span>. This function extracts variable labels, value labels, and other metadata and organizes them into a structured document that we can browse and reference throughout our analysis.</p>
<p>Let’s create a data dictionary from the ANES Stata dataset as an example:</p>
<div class="sourceCode" id="cb530"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb530-1"><a href="importing-survey-data-into-r.html#cb530-1" tabindex="-1"></a><span class="fu">library</span>(labelled)</span>
<span id="cb530-2"><a href="importing-survey-data-into-r.html#cb530-2" tabindex="-1"></a></span>
<span id="cb530-3"><a href="importing-survey-data-into-r.html#cb530-3" tabindex="-1"></a>dictionary <span class="ot">&lt;-</span> <span class="fu">generate_dictionary</span>(anes_dta)</span></code></pre></div>
<p>Once we’ve generated the data dictionary, we can take a look at the <code>V200002</code> variable and see the label, column type, number of missing entries, and associated values.</p>
<div class="sourceCode" id="cb531"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb531-1"><a href="importing-survey-data-into-r.html#cb531-1" tabindex="-1"></a>dictionary <span class="sc">%&gt;%</span></span>
<span id="cb531-2"><a href="importing-survey-data-into-r.html#cb531-2" tabindex="-1"></a>  <span class="fu">filter</span>(variable <span class="sc">==</span> <span class="st">&quot;V200002&quot;</span>)</span></code></pre></div>
<pre><code>##  pos variable label                   col_type missing values          
##  2   V200002  Mode of interview: pre~ dbl+lbl  0       [1] 1. Video    
##                                                        [2] 2. Telephone
##                                                        [3] 3. Web</code></pre>
<p></p>
</div>
</div>
<div id="labeled-missing-data-values" class="section level3 hasAnchor" number="15.3.3">
<h3><span class="header-section-number">A.3.3</span> Labeled missing data values<a href="importing-survey-data-into-r.html#labeled-missing-data-values" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
In survey data analysis, dealing with missing values is a crucial aspect of data preparation. Stata, SPSS, and SAS files each have their own method for handling missing values.</p>
<ul>
<li>Stata has “extended” missing values, <code>.A</code> through <code>.Z</code>.</li>
<li>SAS has “special” missing values, <code>.A</code> through <code>.Z</code> and <code>._</code>.</li>
<li>SPSS has per-column “user” missing values. Each column can declare up to three distinct values or a range of values (plus one distinct value) that should be treated as missing.</li>
</ul>
<p>SAS and Stata use a concept known as ‘tagged’ missing values, which extend R’s regular <code>NA</code>. A ‘tagged’ missing value is essentially an <code>NA</code> with an additional single-character label. These values behave identically to regular <code>NA</code> in standard R operations while preserving the informative tag associated with the missing value.</p>
<p>Here is an example from the NORC at the University of Chicago’s 2018 General Society Survey, where Don’t Know (<code>DK</code>) responses are tagged as <code>NA(d)</code>, Inapplicable (<code>IAP</code>) responses are tagged as <code>NA(i)</code>, and <code>No Answer</code> responses are tagged as <code>NA(n)</code> <span class="citation">(<a href="#ref-gss-codebook">Davern et al. 2021</a>)</span>.</p>
<div class="sourceCode" id="cb533"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb533-1"><a href="importing-survey-data-into-r.html#cb533-1" tabindex="-1"></a><span class="fu">head</span>(gss_dta<span class="sc">$</span>HEALTH)</span>
<span id="cb533-2"><a href="importing-survey-data-into-r.html#cb533-2" tabindex="-1"></a><span class="co">#&gt; &lt;labelled&lt;double&gt;[6]&gt;: condition of health</span></span>
<span id="cb533-3"><a href="importing-survey-data-into-r.html#cb533-3" tabindex="-1"></a><span class="co">#&gt; [1]     2     1 NA(i) NA(i)     1     2</span></span>
<span id="cb533-4"><a href="importing-survey-data-into-r.html#cb533-4" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb533-5"><a href="importing-survey-data-into-r.html#cb533-5" tabindex="-1"></a><span class="co">#&gt; Labels:</span></span>
<span id="cb533-6"><a href="importing-survey-data-into-r.html#cb533-6" tabindex="-1"></a><span class="co">#&gt;  value     label</span></span>
<span id="cb533-7"><a href="importing-survey-data-into-r.html#cb533-7" tabindex="-1"></a><span class="co">#&gt;      1 excellent</span></span>
<span id="cb533-8"><a href="importing-survey-data-into-r.html#cb533-8" tabindex="-1"></a><span class="co">#&gt;      2      good</span></span>
<span id="cb533-9"><a href="importing-survey-data-into-r.html#cb533-9" tabindex="-1"></a><span class="co">#&gt;      3      fair</span></span>
<span id="cb533-10"><a href="importing-survey-data-into-r.html#cb533-10" tabindex="-1"></a><span class="co">#&gt;      4      poor</span></span>
<span id="cb533-11"><a href="importing-survey-data-into-r.html#cb533-11" tabindex="-1"></a><span class="co">#&gt;  NA(d)        DK</span></span>
<span id="cb533-12"><a href="importing-survey-data-into-r.html#cb533-12" tabindex="-1"></a><span class="co">#&gt;  NA(i)       IAP</span></span>
<span id="cb533-13"><a href="importing-survey-data-into-r.html#cb533-13" tabindex="-1"></a><span class="co">#&gt;  NA(n)        NA</span></span></code></pre></div>
<p>In contrast, SPSS uses a different approach called ‘user-defined values’ to denote missing values. Each column in an SPSS dataset can have up to three distinct values designated as missing or a specified range of missing values. To model these additional user-defined missing values, {haven} provides the <code>labeled_spss()</code> subclass of <code>labeled()</code>. When importing SPSS data using {haven}, it ensures that user-defined missing values are correctly handled. We can work with these data in R while preserving the unique missing value conventions from SPSS.</p>
<p>Here is what the GSS SPSS dataset looks like when loaded with {haven}.</p>
<pre><code>head(gss_sps$HEALTH)
#&gt; &lt;labelled_spss&lt;double&gt;[6]&gt;: Condition of health
#&gt; [1] 2 1 0 0 1 2
#&gt; Missing values: 0, 8, 9
#&gt; 
#&gt; Labels:
#&gt;  value     label
#&gt;      0       IAP
#&gt;      1 EXCELLENT
#&gt;      2      GOOD
#&gt;      3      FAIR
#&gt;      4      POOR
#&gt;      8        DK
#&gt;      9        NA</code></pre>
<p></p>
</div>
</div>
<div id="importing-data-from-apis-into-r" class="section level2 hasAnchor" number="15.4">
<h2><span class="header-section-number">A.4</span> Importing data from APIs into R<a href="importing-survey-data-into-r.html#importing-data-from-apis-into-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>In addition to working with data saved as files, we may also need to retrieve data through Application Programming Interfaces (APIs). APIs provide a structured way to access data hosted on external servers and import them directly into R for analysis.</p>
<p>To access these data, we need to understand how to construct API requests. Each API has unique endpoints, parameters, and authentication requirements. Pay attention to:</p>
<ul>
<li>Endpoints: These are URLs that point to specific data or services</li>
<li>Parameters: Information passed to the API to customize the request (e.g., date ranges, filters)</li>
<li>Authentication: APIs may require API keys or tokens for access</li>
<li>Rate Limits: APIs may have usage limits, so be aware of any rate limits or quotas</li>
</ul>
<p>Typically, we begin by making a GET request to an API endpoint. The {httr2} package allows us to generate and process HTTP requests <span class="citation">(<a href="#ref-R-httr2">Wickham 2024</a>)</span>. We can make the GET request by pointing to the URL that contains the data we would like:</p>
<div class="sourceCode" id="cb535"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb535-1"><a href="importing-survey-data-into-r.html#cb535-1" tabindex="-1"></a><span class="fu">library</span>(httr2)</span>
<span id="cb535-2"><a href="importing-survey-data-into-r.html#cb535-2" tabindex="-1"></a></span>
<span id="cb535-3"><a href="importing-survey-data-into-r.html#cb535-3" tabindex="-1"></a>api_url <span class="ot">&lt;-</span> <span class="st">&quot;https://api.example.com/survey-data&quot;</span></span>
<span id="cb535-4"><a href="importing-survey-data-into-r.html#cb535-4" tabindex="-1"></a>response <span class="ot">&lt;-</span> <span class="fu">GET</span>(<span class="at">url =</span> api_url)</span></code></pre></div>
<p>Once we make the request, we obtain the data as the <code>response</code>. The data often come in JSON format. We can extract and parse the data using the {jsonlite} package, allowing us to work with them in R <span class="citation">(<a href="#ref-jsonliteooms">Ooms 2014</a>)</span>. The <code>fromJSON()</code> function, shown below, converts JSON data to an R object.</p>
<div class="sourceCode" id="cb536"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb536-1"><a href="importing-survey-data-into-r.html#cb536-1" tabindex="-1"></a>survey_data <span class="ot">&lt;-</span> <span class="fu">fromJSON</span>(<span class="fu">content</span>(response, <span class="st">&quot;text&quot;</span>))</span></code></pre></div>
<p>Note that these are dummy examples. Please review the documentation to understand how to make requests from a specific API.</p>
<p>R offers several packages that simplify API access by providing ready-to-use functions for popular APIs. These packages are called “wrappers,” as they “wrap” the API in R to make it easier to use. For example, the {tidycensus} package used in this book simplifies access to U.S. Census data, allowing us to retrieve data with R commands instead of writing API requests from scratch <span class="citation">(<a href="#ref-R-tidycensus">Walker and Herman 2024</a>)</span>. Behind the scenes, <code>get_pums()</code> is making a GET request from the Census API, and the {tidycensus} functions are converting the response into an R-friendly format. For example, if we are interested in the age, sex, race, and Hispanicity of those in the American Community Survey sample of Durham County, North Carolina<a href="#fn31" class="footnote-ref" id="fnref31"><sup>31</sup></a>, we can use the <code>get_pums()</code> function to extract the microdata as shown in the code below. We can then use the replicate weights to create a survey object and calculate estimates for Durham County.</p>
<div class="sourceCode" id="cb537"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb537-1"><a href="importing-survey-data-into-r.html#cb537-1" tabindex="-1"></a><span class="fu">library</span>(tidycensus)</span>
<span id="cb537-2"><a href="importing-survey-data-into-r.html#cb537-2" tabindex="-1"></a></span>
<span id="cb537-3"><a href="importing-survey-data-into-r.html#cb537-3" tabindex="-1"></a>durh_pums <span class="ot">&lt;-</span> <span class="fu">get_pums</span>(</span>
<span id="cb537-4"><a href="importing-survey-data-into-r.html#cb537-4" tabindex="-1"></a>  <span class="at">variables =</span> <span class="fu">c</span>(<span class="st">&quot;PUMA&quot;</span>, <span class="st">&quot;SEX&quot;</span>, <span class="st">&quot;AGEP&quot;</span>, <span class="st">&quot;RAC1P&quot;</span>, <span class="st">&quot;HISP&quot;</span>),</span>
<span id="cb537-5"><a href="importing-survey-data-into-r.html#cb537-5" tabindex="-1"></a>  <span class="at">state =</span> <span class="st">&quot;NC&quot;</span>,</span>
<span id="cb537-6"><a href="importing-survey-data-into-r.html#cb537-6" tabindex="-1"></a>  <span class="at">puma =</span> <span class="fu">c</span>(<span class="st">&quot;01301&quot;</span>, <span class="st">&quot;01302&quot;</span>),</span>
<span id="cb537-7"><a href="importing-survey-data-into-r.html#cb537-7" tabindex="-1"></a>  <span class="at">survey =</span> <span class="st">&quot;acs1&quot;</span>,</span>
<span id="cb537-8"><a href="importing-survey-data-into-r.html#cb537-8" tabindex="-1"></a>  <span class="at">year =</span> <span class="dv">2022</span>,</span>
<span id="cb537-9"><a href="importing-survey-data-into-r.html#cb537-9" tabindex="-1"></a>  <span class="at">rep_weights =</span> <span class="st">&quot;person&quot;</span></span>
<span id="cb537-10"><a href="importing-survey-data-into-r.html#cb537-10" tabindex="-1"></a>)</span></code></pre></div>
<pre><code>## Getting data from the 2022 1-year ACS Public Use Microdata Sample</code></pre>
<pre><code>## Warning: • You have not set a Census API key. Users without a key are limited to 500
## queries per day and may experience performance limitations.
## ℹ For best results, get a Census API key at
## http://api.census.gov/data/key_signup.html and then supply the key to the
## `census_api_key()` function to use it throughout your tidycensus session.
## This warning is displayed once per session.</code></pre>
<div class="sourceCode" id="cb540"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb540-1"><a href="importing-survey-data-into-r.html#cb540-1" tabindex="-1"></a>durh_pums</span></code></pre></div>
<pre><code>## # A tibble: 2,724 × 90
##    SERIALNO      SPORDER  AGEP PUMA  ST    SEX   HISP  RAC1P  WGTP PWGTP
##    &lt;chr&gt;           &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 2022GQ0002044       1    54 01301 37    1     01    2         0    17
##  2 2022GQ0002319       1    20 01301 37    2     01    2         0    64
##  3 2022GQ0003518       1    22 01301 37    1     01    6         0    52
##  4 2022GQ0003930       1    62 01302 37    1     01    2         0    17
##  5 2022GQ0005753       1    19 01301 37    2     24    8         0    29
##  6 2022GQ0006554       1    22 01301 37    2     01    6         0    59
##  7 2022GQ0007092       1    70 01301 37    1     01    2         0    55
##  8 2022GQ0007502       1    36 01302 37    1     01    1         0    39
##  9 2022GQ0008767       1    74 01301 37    1     01    1         0    15
## 10 2022GQ0008956       1    22 01302 37    2     24    1         0    43
## # ℹ 2,714 more rows
## # ℹ 80 more variables: PWGTP1 &lt;dbl&gt;, PWGTP2 &lt;dbl&gt;, PWGTP3 &lt;dbl&gt;,
## #   PWGTP4 &lt;dbl&gt;, PWGTP5 &lt;dbl&gt;, PWGTP6 &lt;dbl&gt;, PWGTP7 &lt;dbl&gt;,
## #   PWGTP8 &lt;dbl&gt;, PWGTP9 &lt;dbl&gt;, PWGTP10 &lt;dbl&gt;, PWGTP11 &lt;dbl&gt;,
## #   PWGTP12 &lt;dbl&gt;, PWGTP13 &lt;dbl&gt;, PWGTP14 &lt;dbl&gt;, PWGTP15 &lt;dbl&gt;,
## #   PWGTP16 &lt;dbl&gt;, PWGTP17 &lt;dbl&gt;, PWGTP18 &lt;dbl&gt;, PWGTP19 &lt;dbl&gt;,
## #   PWGTP20 &lt;dbl&gt;, PWGTP21 &lt;dbl&gt;, PWGTP22 &lt;dbl&gt;, PWGTP23 &lt;dbl&gt;, …</code></pre>
<p>In Chapter <a href="c04-getting-started.html#c04-getting-started">4</a>, we used the {censusapi} package to get data from the Census data API for the Current Population Survey. To discover if there is an R package that directly interfaces with a specific survey or data source, search for “[survey] R wrapper” or “[data source] R package” online.</p>
</div>
<div id="importing-data-from-databases-in-r" class="section level2 hasAnchor" number="15.5">
<h2><span class="header-section-number">A.5</span> Importing data from databases in R<a href="importing-survey-data-into-r.html#importing-data-from-databases-in-r" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Databases provide a secure and organized solution as the volume and complexity of data grow. We can access, manage, and update data stored in databases in a systematic way. Because of how the data are organized, teams can draw from the same source and obtain any metadata that would be helpful for analysis.</p>
<p>There are various ways of using R to work with databases. If using RStudio, we can connect to different databases through the Connections Pane in the top right of the IDE. We can also use packages like {DBI} and {odbc} to access database tables in R files. Here is an example script connecting to a database:</p>
<div class="sourceCode" id="cb542"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb542-1"><a href="importing-survey-data-into-r.html#cb542-1" tabindex="-1"></a>con <span class="ot">&lt;-</span> </span>
<span id="cb542-2"><a href="importing-survey-data-into-r.html#cb542-2" tabindex="-1"></a>  DBI<span class="sc">::</span><span class="fu">dbConnect</span>(</span>
<span id="cb542-3"><a href="importing-survey-data-into-r.html#cb542-3" tabindex="-1"></a>    odbc<span class="sc">::</span><span class="fu">odbc</span>(),</span>
<span id="cb542-4"><a href="importing-survey-data-into-r.html#cb542-4" tabindex="-1"></a>    <span class="at">Driver    =</span> <span class="st">&quot;[driver name]&quot;</span>,</span>
<span id="cb542-5"><a href="importing-survey-data-into-r.html#cb542-5" tabindex="-1"></a>    <span class="at">Server    =</span> <span class="st">&quot;[server path]&quot;</span>,</span>
<span id="cb542-6"><a href="importing-survey-data-into-r.html#cb542-6" tabindex="-1"></a>    <span class="at">UID       =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database user&quot;</span>),</span>
<span id="cb542-7"><a href="importing-survey-data-into-r.html#cb542-7" tabindex="-1"></a>    <span class="at">PWD       =</span> rstudioapi<span class="sc">::</span><span class="fu">askForPassword</span>(<span class="st">&quot;Database password&quot;</span>),</span>
<span id="cb542-8"><a href="importing-survey-data-into-r.html#cb542-8" tabindex="-1"></a>    <span class="at">Database  =</span> <span class="st">&quot;[database name]&quot;</span>,</span>
<span id="cb542-9"><a href="importing-survey-data-into-r.html#cb542-9" tabindex="-1"></a>    <span class="at">Warehouse =</span> <span class="st">&quot;[warehouse name]&quot;</span>,</span>
<span id="cb542-10"><a href="importing-survey-data-into-r.html#cb542-10" tabindex="-1"></a>    <span class="at">Schema    =</span> <span class="st">&quot;[schema name]&quot;</span></span>
<span id="cb542-11"><a href="importing-survey-data-into-r.html#cb542-11" tabindex="-1"></a>  )</span></code></pre></div>
<p>The {dbplyr} and {dplyr} packages allow us to make queries and run data analysis entirely using {dplyr} syntax. All of the code can be written in R, so we do not have to switch between R and SQL to explore the data. Here is some sample code:</p>
<div class="sourceCode" id="cb543"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb543-1"><a href="importing-survey-data-into-r.html#cb543-1" tabindex="-1"></a>q1 <span class="ot">&lt;-</span> <span class="fu">tbl</span>(con, <span class="st">&quot;bank&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb543-2"><a href="importing-survey-data-into-r.html#cb543-2" tabindex="-1"></a>  <span class="fu">group_by</span>(month_idx, year, month) <span class="sc">%&gt;%</span></span>
<span id="cb543-3"><a href="importing-survey-data-into-r.html#cb543-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">subscribe =</span> <span class="fu">sum</span>(<span class="fu">ifelse</span>(term_deposit <span class="sc">==</span> <span class="st">&quot;yes&quot;</span>, <span class="dv">1</span>, <span class="dv">0</span>)),</span>
<span id="cb543-4"><a href="importing-survey-data-into-r.html#cb543-4" tabindex="-1"></a>            <span class="at">total =</span> <span class="fu">n</span>())</span>
<span id="cb543-5"><a href="importing-survey-data-into-r.html#cb543-5" tabindex="-1"></a></span>
<span id="cb543-6"><a href="importing-survey-data-into-r.html#cb543-6" tabindex="-1"></a><span class="fu">show_query</span>(q1)</span></code></pre></div>
<p>Be sure to check the documentation to configure a database connection.</p>
</div>
<div id="importing-data-from-other-formats" class="section level2 hasAnchor" number="15.6">
<h2><span class="header-section-number">A.6</span> Importing data from other formats<a href="importing-survey-data-into-r.html#importing-data-from-other-formats" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>R also offers dedicated packages such as {googlesheets4} for Google Sheets or {qualtRics} for Qualtrics. With less common or proprietary file formats, the broader data science community can often provide guidance. Online resources like <a href="https://stackoverflow.com/">Stack Overflow</a> and dedicated forums like <a href="https://forum.posit.co/">Posit Community</a> are valuable sources of information for importing data into R.</p>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-gss-codebook" class="csl-entry">
Davern, Michael, Rene Bautista, Jeremy Freese, Stephen L. Morgan, and Tom W. Smith. 2021. <span>“<span>General Social Survey 2016-2020 Panel Codebook</span>.”</span> Edited by Chicago NORC. <a href="https://gss.norc.org/Documents/codebook/2016-2020%20GSS%20Panel%20Codebook%20-%20R1a.pdf" class="uri">https://gss.norc.org/Documents/codebook/2016-2020%20GSS%20Panel%20Codebook%20-%20R1a.pdf</a>.
</div>
<div id="ref-R-labelled" class="csl-entry">
Larmarange, Joseph. 2024. <em><span class="nocase">labelled</span>: Manipulating Labelled Data</em>. <a href="https://larmarange.github.io/labelled/">https://larmarange.github.io/labelled/</a>.
</div>
<div id="ref-jsonliteooms" class="csl-entry">
Ooms, Jeroen. 2014. <span>“The <span class="nocase">jsonlite</span> Package: A Practical and Consistent Mapping Between JSON Data and <span>R</span> Objects.”</span> <em>arXiv:1403.2805 [Stat.CO]</em>.
</div>
<div id="ref-R-tidycensus" class="csl-entry">
Walker, Kyle, and Matt Herman. 2024. <em><span class="nocase">tidycensus</span>: Load US Census Boundary and Attribute Data as ’<span class="nocase">tidyverse</span>’ and ’<span class="nocase">sf</span>’-Ready Data Frames</em>. <a href="https://walker-data.com/tidycensus/">https://walker-data.com/tidycensus/</a>.
</div>
<div id="ref-R-httr2" class="csl-entry">
———. 2024. <em><span class="nocase">httr2</span>: Perform HTTP Requests and Process the Responses</em>. <a href="https://httr2.r-lib.org">https://httr2.r-lib.org</a>.
</div>
<div id="ref-R-readr" class="csl-entry">
Wickham, Hadley, Jim Hester, and Jennifer Bryan. 2024. <em><span class="nocase">readr</span>: Read Rectangular Text Data</em>. <a href="https://readr.tidyverse.org">https://readr.tidyverse.org</a>.
</div>
<div id="ref-R-haven" class="csl-entry">
Wickham, Hadley, Evan Miller, and Danny Smith. 2023. <em><span class="nocase">haven</span>: Import and Export ’SPSS’, ’Stata’ and ’SAS’ Files</em>. <a href="https://haven.tidyverse.org">https://haven.tidyverse.org</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="31">
<li id="fn31"><p>The public use microdata areas (PUMA) for Durham County were identified using the 2020 PUMA Names File: <a href="https://www2.census.gov/geo/pdfs/reference/puma2020/2020_PUMA_Names.pdf" class="uri">https://www2.census.gov/geo/pdfs/reference/puma2020/2020_PUMA_Names.pdf</a><a href="importing-survey-data-into-r.html#fnref31" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="c14-ambarom-vignette.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="anes-cb.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/tidy-survey-r/tidy-survey-book/blob/main/89-Appendix-DataImport.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
