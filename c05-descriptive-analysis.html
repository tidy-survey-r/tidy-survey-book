<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R</title>
  <meta name="description" content="Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R: A Tidy Introduction with {srvyr} and {survey}" />
  <meta name="generator" content="bookdown 0.39 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="/images/BookCover_Final.jpg" />
  <meta property="og:description" content="Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R: A Tidy Introduction with {srvyr} and {survey}" />
  <meta name="github-repo" content="tidy-survey-r/tidy-survey-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R" />
  
  <meta name="twitter:description" content="Chapter 5 Descriptive analyses | Exploring Complex Survey Data Analysis Using R: A Tidy Introduction with {srvyr} and {survey}" />
  <meta name="twitter:image" content="/images/BookCover_Final.jpg" />

<meta name="author" content="Stephanie A. Zimmer, Rebecca J. Powell, and Isabella C. Velásquez" />


<meta name="date" content="2024-08-22" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="c04-getting-started.html"/>
<link rel="next" href="c06-statistical-testing.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>
<link href="libs/htmltools-fill/fill.css" rel="stylesheet" />
<script src="libs/htmlwidgets/htmlwidgets.js"></script>
<script src="libs/d3/d3.min.js"></script>
<script src="libs/dagre/dagre-d3.min.js"></script>
<link href="libs/mermaid/dist/mermaid.css" rel="stylesheet" />
<script src="libs/mermaid/dist/mermaid.slim.min.js"></script>
<link href="libs/DiagrammeR-styles/styles.css" rel="stylesheet" />
<script src="libs/chromatography/chromatography.js"></script>
<script src="libs/DiagrammeR-binding/DiagrammeR.js"></script>
<script defer data-domain="tidy-survey-r.github.io/tidy-survey-book" src="https://plausible.io/js/script.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">Exploring Complex Survey Data Analysis Using R</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Welcome</a>
<ul>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#dedication"><i class="fa fa-check"></i>Dedication</a></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html#citation"><i class="fa fa-check"></i>Citation</a></li>
</ul></li>
<li class="part"><span><b>I Introduction</b></span></li>
<li class="chapter" data-level="1" data-path="c01-intro.html"><a href="c01-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="c01-intro.html"><a href="c01-intro.html#survey-analysis-in-r"><i class="fa fa-check"></i><b>1.1</b> Survey analysis in R</a></li>
<li class="chapter" data-level="1.2" data-path="c01-intro.html"><a href="c01-intro.html#what-to-expect"><i class="fa fa-check"></i><b>1.2</b> What to expect</a></li>
<li class="chapter" data-level="1.3" data-path="c01-intro.html"><a href="c01-intro.html#prerequisites"><i class="fa fa-check"></i><b>1.3</b> Prerequisites</a></li>
<li class="chapter" data-level="1.4" data-path="c01-intro.html"><a href="c01-intro.html#datasets-used-in-this-book"><i class="fa fa-check"></i><b>1.4</b> Datasets used in this book</a></li>
<li class="chapter" data-level="1.5" data-path="c01-intro.html"><a href="c01-intro.html#conventions"><i class="fa fa-check"></i><b>1.5</b> Conventions</a></li>
<li class="chapter" data-level="1.6" data-path="c01-intro.html"><a href="c01-intro.html#getting-help"><i class="fa fa-check"></i><b>1.6</b> Getting help</a></li>
<li class="chapter" data-level="1.7" data-path="c01-intro.html"><a href="c01-intro.html#acknowledgments"><i class="fa fa-check"></i><b>1.7</b> Acknowledgments</a></li>
<li class="chapter" data-level="1.8" data-path="c01-intro.html"><a href="c01-intro.html#colophon"><i class="fa fa-check"></i><b>1.8</b> Colophon</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html"><i class="fa fa-check"></i><b>2</b> Overview of surveys</a>
<ul>
<li class="chapter" data-level="2.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#searching-for-public-use-survey-data"><i class="fa fa-check"></i><b>2.2</b> Searching for public-use survey data</a></li>
<li class="chapter" data-level="2.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#pre-survey-planning"><i class="fa fa-check"></i><b>2.3</b> Pre-survey planning</a></li>
<li class="chapter" data-level="2.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design"><i class="fa fa-check"></i><b>2.4</b> Study design</a>
<ul>
<li class="chapter" data-level="2.4.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-sampdesign"><i class="fa fa-check"></i><b>2.4.1</b> Sampling design</a></li>
<li class="chapter" data-level="2.4.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-dcplanning"><i class="fa fa-check"></i><b>2.4.2</b> Data collection planning</a></li>
<li class="chapter" data-level="2.4.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-questionnaire"><i class="fa fa-check"></i><b>2.4.3</b> Questionnaire design</a></li>
</ul></li>
<li class="chapter" data-level="2.5" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-datacollection"><i class="fa fa-check"></i><b>2.5</b> Data collection</a></li>
<li class="chapter" data-level="2.6" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post"><i class="fa fa-check"></i><b>2.6</b> Post-survey processing</a>
<ul>
<li class="chapter" data-level="2.6.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-cleaning"><i class="fa fa-check"></i><b>2.6.1</b> Data cleaning and imputation</a></li>
<li class="chapter" data-level="2.6.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-weighting"><i class="fa fa-check"></i><b>2.6.2</b> Weighting</a></li>
<li class="chapter" data-level="2.6.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-disclosure"><i class="fa fa-check"></i><b>2.6.3</b> Disclosure</a></li>
<li class="chapter" data-level="2.6.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-documentation"><i class="fa fa-check"></i><b>2.6.4</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="2.7" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#post-survey-data-analysis-and-reporting"><i class="fa fa-check"></i><b>2.7</b> Post-survey data analysis and reporting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html"><i class="fa fa-check"></i><b>3</b> Survey data documentation</a>
<ul>
<li class="chapter" data-level="3.1" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#types-of-survey-documentation"><i class="fa fa-check"></i><b>3.2</b> Types of survey documentation</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#technical-documentation"><i class="fa fa-check"></i><b>3.2.1</b> Technical documentation</a></li>
<li class="chapter" data-level="3.2.2" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#questionnaires"><i class="fa fa-check"></i><b>3.2.2</b> Questionnaires</a></li>
<li class="chapter" data-level="3.2.3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#codebooks"><i class="fa fa-check"></i><b>3.2.3</b> Codebooks</a></li>
<li class="chapter" data-level="3.2.4" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#errata"><i class="fa fa-check"></i><b>3.2.4</b> Errata</a></li>
<li class="chapter" data-level="3.2.5" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#additional-resources"><i class="fa fa-check"></i><b>3.2.5</b> Additional resources</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#missing-data-coding"><i class="fa fa-check"></i><b>3.3</b> Missing data coding</a></li>
<li class="chapter" data-level="3.4" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#example-anes-2020-survey-documentation"><i class="fa fa-check"></i><b>3.4</b> Example: ANES 2020 survey documentation</a>
<ul>
<li class="chapter" data-level="" data-path="c03-survey-data-documentation.html"><a href="c03-survey-data-documentation.html#methodology"><i class="fa fa-check"></i>Methodology</a></li>
</ul></li>
</ul></li>
<li class="part"><span><b>II Analysis</b></span></li>
<li class="chapter" data-level="4" data-path="c04-getting-started.html"><a href="c04-getting-started.html"><i class="fa fa-check"></i><b>4</b> Getting started</a>
<ul>
<li class="chapter" data-level="4.1" data-path="c04-getting-started.html"><a href="c04-getting-started.html#introduction-3"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup"><i class="fa fa-check"></i><b>4.2</b> Setup</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup-load-pkgs"><i class="fa fa-check"></i><b>4.2.1</b> Packages</a></li>
<li class="chapter" data-level="4.2.2" data-path="c04-getting-started.html"><a href="c04-getting-started.html#data"><i class="fa fa-check"></i><b>4.2.2</b> Data</a></li>
<li class="chapter" data-level="4.2.3" data-path="c04-getting-started.html"><a href="c04-getting-started.html#setup-des-obj"><i class="fa fa-check"></i><b>4.2.3</b> Design objects</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="c04-getting-started.html"><a href="c04-getting-started.html#survey-analysis-process"><i class="fa fa-check"></i><b>4.3</b> Survey analysis process</a></li>
<li class="chapter" data-level="4.4" data-path="c04-getting-started.html"><a href="c04-getting-started.html#similarities-dplyr-srvyr"><i class="fa fa-check"></i><b>4.4</b> Similarities between {dplyr} and {srvyr} functions</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html"><i class="fa fa-check"></i><b>5</b> Descriptive analyses</a>
<ul>
<li class="chapter" data-level="" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#prereq5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#counts-and-cross-tabulations"><i class="fa fa-check"></i><b>5.2</b> Counts and cross-tabulations</a>
<ul>
<li class="chapter" data-level="5.2.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-count-syntax"><i class="fa fa-check"></i><b>5.2.1</b> Syntax</a></li>
<li class="chapter" data-level="5.2.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples"><i class="fa fa-check"></i><b>5.2.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#totals-and-sums"><i class="fa fa-check"></i><b>5.3</b> Totals and sums </a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax"><i class="fa fa-check"></i><b>5.3.1</b> Syntax</a></li>
<li class="chapter" data-level="5.3.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-1"><i class="fa fa-check"></i><b>5.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop"><i class="fa fa-check"></i><b>5.4</b> Means and proportions</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop-syntax"><i class="fa fa-check"></i><b>5.4.1</b> Syntax</a></li>
<li class="chapter" data-level="5.4.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-2"><i class="fa fa-check"></i><b>5.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#quantiles-and-medians"><i class="fa fa-check"></i><b>5.5</b> Quantiles and medians</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-1"><i class="fa fa-check"></i><b>5.5.1</b> Syntax</a></li>
<li class="chapter" data-level="5.5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-3"><i class="fa fa-check"></i><b>5.5.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#ratios"><i class="fa fa-check"></i><b>5.6</b> Ratios </a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-2"><i class="fa fa-check"></i><b>5.6.1</b> Syntax</a></li>
<li class="chapter" data-level="5.6.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-4"><i class="fa fa-check"></i><b>5.6.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#correlations"><i class="fa fa-check"></i><b>5.7</b> Correlations </a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-3"><i class="fa fa-check"></i><b>5.7.1</b> Syntax</a></li>
<li class="chapter" data-level="5.7.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-5"><i class="fa fa-check"></i><b>5.7.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#standard-deviation-and-variance"><i class="fa fa-check"></i><b>5.8</b> Standard deviation and variance </a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-4"><i class="fa fa-check"></i><b>5.8.1</b> Syntax</a></li>
<li class="chapter" data-level="5.8.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-6"><i class="fa fa-check"></i><b>5.8.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#additional-topics"><i class="fa fa-check"></i><b>5.9</b> Additional topics</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#unweighted-analysis"><i class="fa fa-check"></i><b>5.9.1</b> Unweighted analysis </a></li>
<li class="chapter" data-level="5.9.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#subpopulation-analysis"><i class="fa fa-check"></i><b>5.9.2</b> Subpopulation analysis </a></li>
<li class="chapter" data-level="5.9.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-deff"><i class="fa fa-check"></i><b>5.9.3</b> Design effects</a></li>
<li class="chapter" data-level="5.9.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#creating-summary-rows"><i class="fa fa-check"></i><b>5.9.4</b> Creating summary rows</a></li>
<li class="chapter" data-level="5.9.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#calculating-estimates-for-many-outcomes"><i class="fa fa-check"></i><b>5.9.5</b> Calculating estimates for many outcomes</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#exercises"><i class="fa fa-check"></i><b>5.10</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html"><i class="fa fa-check"></i><b>6</b> Statistical testing</a>
<ul>
<li class="chapter" data-level="" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#prereq6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="6.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#dot-notation"><i class="fa fa-check"></i><b>6.2</b> Dot notation</a></li>
<li class="chapter" data-level="6.3" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest"><i class="fa fa-check"></i><b>6.3</b> Comparison of proportions and means</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-syntax"><i class="fa fa-check"></i><b>6.3.1</b> Syntax</a></li>
<li class="chapter" data-level="6.3.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-examples"><i class="fa fa-check"></i><b>6.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi"><i class="fa fa-check"></i><b>6.4</b> Chi-squared tests</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-syntax"><i class="fa fa-check"></i><b>6.4.1</b> Syntax</a></li>
<li class="chapter" data-level="6.4.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-examples"><i class="fa fa-check"></i><b>6.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-exercises"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="c07-modeling.html"><a href="c07-modeling.html"><i class="fa fa-check"></i><b>7</b> Modeling</a>
<ul>
<li class="chapter" data-level="" data-path="c07-modeling.html"><a href="c07-modeling.html#prereq7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="7.1" data-path="c07-modeling.html"><a href="c07-modeling.html#model-intro"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="c07-modeling.html"><a href="c07-modeling.html#analysis-of-variance"><i class="fa fa-check"></i><b>7.2</b> Analysis of variance</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-6"><i class="fa fa-check"></i><b>7.2.1</b> Syntax</a></li>
<li class="chapter" data-level="7.2.2" data-path="c07-modeling.html"><a href="c07-modeling.html#example-1"><i class="fa fa-check"></i><b>7.2.2</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="c07-modeling.html"><a href="c07-modeling.html#normal-linear-regression"><i class="fa fa-check"></i><b>7.3</b> Normal linear regression</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-7"><i class="fa fa-check"></i><b>7.3.1</b> Syntax</a></li>
<li class="chapter" data-level="7.3.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-7"><i class="fa fa-check"></i><b>7.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="c07-modeling.html"><a href="c07-modeling.html#logistic-regression"><i class="fa fa-check"></i><b>7.4</b> Logistic regression</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-8"><i class="fa fa-check"></i><b>7.4.1</b> Syntax</a></li>
<li class="chapter" data-level="7.4.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-8"><i class="fa fa-check"></i><b>7.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="c07-modeling.html"><a href="c07-modeling.html#exercises-1"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="part"><span><b>III Reporting</b></span></li>
<li class="chapter" data-level="8" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html"><i class="fa fa-check"></i><b>8</b> Communication of results</a>
<ul>
<li class="chapter" data-level="" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#prereq8"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="8.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#introduction-6"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#describing-results-through-text"><i class="fa fa-check"></i><b>8.2</b> Describing results through text</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#methodology-1"><i class="fa fa-check"></i><b>8.2.1</b> Methodology</a></li>
<li class="chapter" data-level="8.2.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#analysis"><i class="fa fa-check"></i><b>8.2.2</b> Analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#results"><i class="fa fa-check"></i><b>8.2.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#visualizing-data"><i class="fa fa-check"></i><b>8.3</b> Visualizing data</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#tables"><i class="fa fa-check"></i><b>8.3.1</b> Tables</a></li>
<li class="chapter" data-level="8.3.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#charts-and-plots"><i class="fa fa-check"></i><b>8.3.2</b> Charts and plots</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html"><i class="fa fa-check"></i><b>9</b> Reproducible research</a>
<ul>
<li class="chapter" data-level="9.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#introduction-7"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#project-based-workflows"><i class="fa fa-check"></i><b>9.2</b> Project-based workflows</a></li>
<li class="chapter" data-level="9.3" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#functions-and-packages"><i class="fa fa-check"></i><b>9.3</b> Functions and packages</a></li>
<li class="chapter" data-level="9.4" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#version-control-with-git"><i class="fa fa-check"></i><b>9.4</b> Version control with Git</a></li>
<li class="chapter" data-level="9.5" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#package-management-with-renv"><i class="fa fa-check"></i><b>9.5</b> Package management with {renv}</a></li>
<li class="chapter" data-level="9.6" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#r-environments-with-docker"><i class="fa fa-check"></i><b>9.6</b> R environments with Docker</a></li>
<li class="chapter" data-level="9.7" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#workflow-management-with-targets"><i class="fa fa-check"></i><b>9.7</b> Workflow management with {targets}</a></li>
<li class="chapter" data-level="9.8" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#documentation-with-quarto-and-r-markdown"><i class="fa fa-check"></i><b>9.8</b> Documentation with Quarto and R Markdown</a>
<ul>
<li class="chapter" data-level="9.8.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#parameterization"><i class="fa fa-check"></i><b>9.8.1</b> Parameterization</a></li>
</ul></li>
<li class="chapter" data-level="9.9" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#other-tips-for-reproducibility"><i class="fa fa-check"></i><b>9.9</b> Other tips for reproducibility</a>
<ul>
<li class="chapter" data-level="9.9.1" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#random-number-seeds"><i class="fa fa-check"></i><b>9.9.1</b> Random number seeds</a></li>
<li class="chapter" data-level="9.9.2" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#descriptive-names-and-labels"><i class="fa fa-check"></i><b>9.9.2</b> Descriptive names and labels</a></li>
</ul></li>
<li class="chapter" data-level="9.10" data-path="c09-reprex-data.html"><a href="c09-reprex-data.html#additional-resources-1"><i class="fa fa-check"></i><b>9.10</b> Additional resources</a></li>
</ul></li>
<li class="part"><span><b>IV Real-life data</b></span></li>
<li class="chapter" data-level="10" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html"><i class="fa fa-check"></i><b>10</b> Sample designs and replicate weights</a>
<ul>
<li class="chapter" data-level="" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#prereq3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="10.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#introduction-8"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#common-sampling-designs"><i class="fa fa-check"></i><b>10.2</b> Common sampling designs</a>
<ul>
<li class="chapter" data-level="10.2.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#simple-random-sample-without-replacement"><i class="fa fa-check"></i><b>10.2.1</b> Simple random sample without replacement</a></li>
<li class="chapter" data-level="10.2.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#simple-random-sample-with-replacement"><i class="fa fa-check"></i><b>10.2.2</b> Simple random sample with replacement</a></li>
<li class="chapter" data-level="10.2.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#stratified-sampling"><i class="fa fa-check"></i><b>10.2.3</b> Stratified sampling </a></li>
<li class="chapter" data-level="10.2.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-cluster"><i class="fa fa-check"></i><b>10.2.4</b> Clustered sampling</a></li>
</ul></li>
<li class="chapter" data-level="10.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-combo"><i class="fa fa-check"></i><b>10.3</b> Combining sampling methods</a>
<ul>
<li class="chapter" data-level="" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#example-6"><i class="fa fa-check"></i>Example</a></li>
</ul></li>
<li class="chapter" data-level="10.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#replicate-weights"><i class="fa fa-check"></i><b>10.4</b> Replicate weights</a>
<ul>
<li class="chapter" data-level="10.4.1" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#balanced-repeated-replication-method"><i class="fa fa-check"></i><b>10.4.1</b> Balanced Repeated Replication method</a></li>
<li class="chapter" data-level="10.4.2" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#fays-brr-method"><i class="fa fa-check"></i><b>10.4.2</b> Fay’s BRR method</a></li>
<li class="chapter" data-level="10.4.3" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#samp-jackknife"><i class="fa fa-check"></i><b>10.4.3</b> Jackknife method</a></li>
<li class="chapter" data-level="10.4.4" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#bootstrap-method"><i class="fa fa-check"></i><b>10.4.4</b> Bootstrap method</a></li>
</ul></li>
<li class="chapter" data-level="10.5" data-path="c10-sample-designs-replicate-weights.html"><a href="c10-sample-designs-replicate-weights.html#exercises-2"><i class="fa fa-check"></i><b>10.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="11" data-path="c11-missing-data.html"><a href="c11-missing-data.html"><i class="fa fa-check"></i><b>11</b> Missing data</a>
<ul>
<li class="chapter" data-level="" data-path="c11-missing-data.html"><a href="c11-missing-data.html#prereq11"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="11.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#introduction-9"><i class="fa fa-check"></i><b>11.1</b> Introduction</a></li>
<li class="chapter" data-level="11.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#missing-data-mechanisms"><i class="fa fa-check"></i><b>11.2</b> Missing data mechanisms</a></li>
<li class="chapter" data-level="11.3" data-path="c11-missing-data.html"><a href="c11-missing-data.html#assessing-missing-data"><i class="fa fa-check"></i><b>11.3</b> Assessing missing data</a>
<ul>
<li class="chapter" data-level="11.3.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#summarize-data"><i class="fa fa-check"></i><b>11.3.1</b> Summarize data</a></li>
<li class="chapter" data-level="11.3.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#visualization-of-missing-data"><i class="fa fa-check"></i><b>11.3.2</b> Visualization of missing data</a></li>
</ul></li>
<li class="chapter" data-level="11.4" data-path="c11-missing-data.html"><a href="c11-missing-data.html#analysis-with-missing-data"><i class="fa fa-check"></i><b>11.4</b> Analysis with missing data</a>
<ul>
<li class="chapter" data-level="11.4.1" data-path="c11-missing-data.html"><a href="c11-missing-data.html#recoding-missing-data"><i class="fa fa-check"></i><b>11.4.1</b> Recoding missing data</a></li>
<li class="chapter" data-level="11.4.2" data-path="c11-missing-data.html"><a href="c11-missing-data.html#missing-skip-patt"><i class="fa fa-check"></i><b>11.4.2</b> Accounting for skip patterns</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="12" data-path="c12-recommendations.html"><a href="c12-recommendations.html"><i class="fa fa-check"></i><b>12</b> Successful survey analysis recommendations</a>
<ul>
<li class="chapter" data-level="" data-path="c12-recommendations.html"><a href="c12-recommendations.html#prereq12"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="12.1" data-path="c12-recommendations.html"><a href="c12-recommendations.html#introduction-10"><i class="fa fa-check"></i><b>12.1</b> Introduction</a></li>
<li class="chapter" data-level="12.2" data-path="c12-recommendations.html"><a href="c12-recommendations.html#recs-survey-process"><i class="fa fa-check"></i><b>12.2</b> Follow the survey analysis process</a></li>
<li class="chapter" data-level="12.3" data-path="c12-recommendations.html"><a href="c12-recommendations.html#begin-with-descriptive-analysis"><i class="fa fa-check"></i><b>12.3</b> Begin with descriptive analysis</a>
<ul>
<li class="chapter" data-level="12.3.1" data-path="c12-recommendations.html"><a href="c12-recommendations.html#table-review"><i class="fa fa-check"></i><b>12.3.1</b> Table review</a></li>
<li class="chapter" data-level="12.3.2" data-path="c12-recommendations.html"><a href="c12-recommendations.html#graphical-review"><i class="fa fa-check"></i><b>12.3.2</b> Graphical review</a></li>
</ul></li>
<li class="chapter" data-level="12.4" data-path="c12-recommendations.html"><a href="c12-recommendations.html#check-variable-types"><i class="fa fa-check"></i><b>12.4</b> Check variable types</a></li>
<li class="chapter" data-level="12.5" data-path="c12-recommendations.html"><a href="c12-recommendations.html#improve-debugging-skills"><i class="fa fa-check"></i><b>12.5</b> Improve debugging skills</a></li>
<li class="chapter" data-level="12.6" data-path="c12-recommendations.html"><a href="c12-recommendations.html#think-critically-about-conclusions"><i class="fa fa-check"></i><b>12.6</b> Think critically about conclusions</a></li>
</ul></li>
<li class="part"><span><b>V Vignettes</b></span></li>
<li class="chapter" data-level="13" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html"><i class="fa fa-check"></i><b>13</b> National Crime Victimization Survey vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#prereq9"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="13.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#introduction-11"><i class="fa fa-check"></i><b>13.1</b> Introduction</a></li>
<li class="chapter" data-level="13.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#data-structure"><i class="fa fa-check"></i><b>13.2</b> Data structure</a></li>
<li class="chapter" data-level="13.3" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#survey-notation"><i class="fa fa-check"></i><b>13.3</b> Survey notation</a></li>
<li class="chapter" data-level="13.4" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#data-file-preparation"><i class="fa fa-check"></i><b>13.4</b> Data file preparation</a>
<ul>
<li class="chapter" data-level="13.4.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#preparing-files-for-estimation-of-victimization-rates"><i class="fa fa-check"></i><b>13.4.1</b> Preparing files for estimation of victimization rates</a></li>
<li class="chapter" data-level="13.4.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#derived-demographic-variables"><i class="fa fa-check"></i><b>13.4.2</b> Derived demographic variables</a></li>
</ul></li>
<li class="chapter" data-level="13.5" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#survey-design-objects"><i class="fa fa-check"></i><b>13.5</b> Survey design objects</a></li>
<li class="chapter" data-level="13.6" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#calculating-estimates"><i class="fa fa-check"></i><b>13.6</b> Calculating estimates</a>
<ul>
<li class="chapter" data-level="13.6.1" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-tot"><i class="fa fa-check"></i><b>13.6.1</b> Estimation 1: Victimization totals</a></li>
<li class="chapter" data-level="13.6.2" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-prop"><i class="fa fa-check"></i><b>13.6.2</b> Estimation 2: Victimization proportions</a></li>
<li class="chapter" data-level="13.6.3" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#vic-rate"><i class="fa fa-check"></i><b>13.6.3</b> Estimation 3: Victimization rates</a></li>
<li class="chapter" data-level="13.6.4" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#prev-rate"><i class="fa fa-check"></i><b>13.6.4</b> Estimation 4: Prevalence rates</a></li>
</ul></li>
<li class="chapter" data-level="13.7" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#statistical-testing"><i class="fa fa-check"></i><b>13.7</b> Statistical testing</a></li>
<li class="chapter" data-level="13.8" data-path="c13-ncvs-vignette.html"><a href="c13-ncvs-vignette.html#exercises-3"><i class="fa fa-check"></i><b>13.8</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="14" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html"><i class="fa fa-check"></i><b>14</b> AmericasBarometer vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#prereq10"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="14.1" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#introduction-12"><i class="fa fa-check"></i><b>14.1</b> Introduction</a></li>
<li class="chapter" data-level="14.2" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#data-structure-1"><i class="fa fa-check"></i><b>14.2</b> Data structure</a></li>
<li class="chapter" data-level="14.3" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#preparing-files"><i class="fa fa-check"></i><b>14.3</b> Preparing files</a></li>
<li class="chapter" data-level="14.4" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#survey-design-objects-1"><i class="fa fa-check"></i><b>14.4</b> Survey design objects</a></li>
<li class="chapter" data-level="14.5" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#ambarom-estimates"><i class="fa fa-check"></i><b>14.5</b> Calculating estimates</a>
<ul>
<li class="chapter" data-level="14.5.1" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#example-worry-about-covid-19"><i class="fa fa-check"></i><b>14.5.1</b> Example: Worry about COVID-19</a></li>
<li class="chapter" data-level="14.5.2" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#example-education-affected-by-covid-19"><i class="fa fa-check"></i><b>14.5.2</b> Example: Education affected by COVID-19</a></li>
</ul></li>
<li class="chapter" data-level="14.6" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#ambarom-maps"><i class="fa fa-check"></i><b>14.6</b> Mapping survey data</a></li>
<li class="chapter" data-level="14.7" data-path="c14-ambarom-vignette.html"><a href="c14-ambarom-vignette.html#exercises-4"><i class="fa fa-check"></i><b>14.7</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendices</b></span></li>
<li class="chapter" data-level="A" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html"><i class="fa fa-check"></i><b>A</b> Importing survey data into R</a>
<ul>
<li class="chapter" data-level="A.1" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-delimiter-separated-files-into-r"><i class="fa fa-check"></i><b>A.1</b> Importing delimiter-separated files into R</a></li>
<li class="chapter" data-level="A.2" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-excel-files-into-r"><i class="fa fa-check"></i><b>A.2</b> Importing Excel files into R</a></li>
<li class="chapter" data-level="A.3" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-stata-sas-and-spss-files-into-r"><i class="fa fa-check"></i><b>A.3</b> Importing Stata, SAS, and SPSS files into R</a>
<ul>
<li class="chapter" data-level="A.3.1" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#syntax-9"><i class="fa fa-check"></i><b>A.3.1</b> Syntax</a></li>
<li class="chapter" data-level="A.3.2" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#working-with-labeled-data"><i class="fa fa-check"></i><b>A.3.2</b> Working with labeled data</a></li>
<li class="chapter" data-level="A.3.3" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#labeled-missing-data-values"><i class="fa fa-check"></i><b>A.3.3</b> Labeled missing data values</a></li>
</ul></li>
<li class="chapter" data-level="A.4" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-apis-into-r"><i class="fa fa-check"></i><b>A.4</b> Importing data from APIs into R</a></li>
<li class="chapter" data-level="A.5" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-databases-in-r"><i class="fa fa-check"></i><b>A.5</b> Importing data from databases in R</a></li>
<li class="chapter" data-level="A.6" data-path="importing-survey-data-into-r.html"><a href="importing-survey-data-into-r.html#importing-data-from-other-formats"><i class="fa fa-check"></i><b>A.6</b> Importing data from other formats</a></li>
</ul></li>
<li class="chapter" data-level="B" data-path="anes-cb.html"><a href="anes-cb.html"><i class="fa fa-check"></i><b>B</b> ANES derived variable codebook</a>
<ul>
<li class="chapter" data-level="B.1" data-path="anes-cb.html"><a href="anes-cb.html#admin"><i class="fa fa-check"></i><b>B.1</b> ADMIN</a></li>
<li class="chapter" data-level="B.2" data-path="anes-cb.html"><a href="anes-cb.html#weights"><i class="fa fa-check"></i><b>B.2</b> WEIGHTS</a></li>
<li class="chapter" data-level="B.3" data-path="anes-cb.html"><a href="anes-cb.html#pre-election-survey-questionnaire"><i class="fa fa-check"></i><b>B.3</b> PRE-ELECTION SURVEY QUESTIONNAIRE</a></li>
<li class="chapter" data-level="B.4" data-path="anes-cb.html"><a href="anes-cb.html#post-election-survey-questionnaire"><i class="fa fa-check"></i><b>B.4</b> POST-ELECTION SURVEY QUESTIONNAIRE</a></li>
</ul></li>
<li class="chapter" data-level="C" data-path="recs-cb.html"><a href="recs-cb.html"><i class="fa fa-check"></i><b>C</b> RECS derived variable codebook</a>
<ul>
<li class="chapter" data-level="C.1" data-path="recs-cb.html"><a href="recs-cb.html#admin-1"><i class="fa fa-check"></i><b>C.1</b> ADMIN</a></li>
<li class="chapter" data-level="C.2" data-path="recs-cb.html"><a href="recs-cb.html#geography"><i class="fa fa-check"></i><b>C.2</b> GEOGRAPHY</a></li>
<li class="chapter" data-level="C.3" data-path="recs-cb.html"><a href="recs-cb.html#weather"><i class="fa fa-check"></i><b>C.3</b> WEATHER</a></li>
<li class="chapter" data-level="C.4" data-path="recs-cb.html"><a href="recs-cb.html#your-home"><i class="fa fa-check"></i><b>C.4</b> YOUR HOME</a></li>
<li class="chapter" data-level="C.5" data-path="recs-cb.html"><a href="recs-cb.html#space-heating"><i class="fa fa-check"></i><b>C.5</b> SPACE HEATING</a></li>
<li class="chapter" data-level="C.6" data-path="recs-cb.html"><a href="recs-cb.html#air-conditioning"><i class="fa fa-check"></i><b>C.6</b> AIR CONDITIONING</a></li>
<li class="chapter" data-level="C.7" data-path="recs-cb.html"><a href="recs-cb.html#thermostat"><i class="fa fa-check"></i><b>C.7</b> THERMOSTAT</a></li>
<li class="chapter" data-level="C.8" data-path="recs-cb.html"><a href="recs-cb.html#weights-1"><i class="fa fa-check"></i><b>C.8</b> WEIGHTS</a></li>
<li class="chapter" data-level="C.9" data-path="recs-cb.html"><a href="recs-cb.html#consumption-and-expenditure"><i class="fa fa-check"></i><b>C.9</b> CONSUMPTION AND EXPENDITURE</a></li>
</ul></li>
<li class="chapter" data-level="D" data-path="exercise-solutions.html"><a href="exercise-solutions.html"><i class="fa fa-check"></i><b>D</b> Exercise solutions</a>
<ul>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#descriptive-analysis"><i class="fa fa-check"></i>5 - Descriptive analysis</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#statistical-testing-1"><i class="fa fa-check"></i>6 - Statistical testing</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#modeling"><i class="fa fa-check"></i>7 - Modeling</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#specifying-sample-designs-and-replicate-weights-in-srvyr"><i class="fa fa-check"></i>10 - Specifying sample designs and replicate weights in {srvyr}</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#national-crime-victimization-survey-vignette"><i class="fa fa-check"></i>13 - National Crime Victimization Survey Vignette</a></li>
<li class="chapter" data-level="" data-path="exercise-solutions.html"><a href="exercise-solutions.html#americasbarometer-vignette"><i class="fa fa-check"></i>14 - AmericasBarometer Vignette</a></li>
</ul></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Exploring Complex Survey Data Analysis Using R</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c05-descriptive-analysis" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Descriptive analyses<a href="c05-descriptive-analysis.html#c05-descriptive-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="prereq5" class="section level3 unnumbered hasAnchor prereqbox-header">
<h3>Prerequisites<a href="c05-descriptive-analysis.html#prereq5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div class="prereqbox">
<p>For this chapter, load the following packages:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb56-1"><a href="c05-descriptive-analysis.html#cb56-1" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb56-2"><a href="c05-descriptive-analysis.html#cb56-2" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb56-3"><a href="c05-descriptive-analysis.html#cb56-3" tabindex="-1"></a><span class="fu">library</span>(srvyrexploR)</span>
<span id="cb56-4"><a href="c05-descriptive-analysis.html#cb56-4" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<p>We are using data from ANES and RECS described in Chapter <a href="c04-getting-started.html#c04-getting-started">4</a>. As a reminder, here is the code to create the design objects for each to use throughout this chapter. For ANES, we need to adjust the weight so it sums to the population instead of the sample (see the ANES documentation and Chapter <a href="c04-getting-started.html#c04-getting-started">4</a> for more information).</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb57-1"><a href="c05-descriptive-analysis.html#cb57-1" tabindex="-1"></a>targetpop <span class="ot">&lt;-</span> <span class="dv">231592693</span></span>
<span id="cb57-2"><a href="c05-descriptive-analysis.html#cb57-2" tabindex="-1"></a></span>
<span id="cb57-3"><a href="c05-descriptive-analysis.html#cb57-3" tabindex="-1"></a>anes_adjwgt <span class="ot">&lt;-</span> anes_2020 <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="c05-descriptive-analysis.html#cb57-4" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> Weight <span class="sc">/</span> <span class="fu">sum</span>(Weight) <span class="sc">*</span> targetpop)</span>
<span id="cb57-5"><a href="c05-descriptive-analysis.html#cb57-5" tabindex="-1"></a></span>
<span id="cb57-6"><a href="c05-descriptive-analysis.html#cb57-6" tabindex="-1"></a>anes_des <span class="ot">&lt;-</span> anes_adjwgt <span class="sc">%&gt;%</span></span>
<span id="cb57-7"><a href="c05-descriptive-analysis.html#cb57-7" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(</span>
<span id="cb57-8"><a href="c05-descriptive-analysis.html#cb57-8" tabindex="-1"></a>    <span class="at">weights =</span> Weight,</span>
<span id="cb57-9"><a href="c05-descriptive-analysis.html#cb57-9" tabindex="-1"></a>    <span class="at">strata =</span> Stratum,</span>
<span id="cb57-10"><a href="c05-descriptive-analysis.html#cb57-10" tabindex="-1"></a>    <span class="at">ids =</span> VarUnit,</span>
<span id="cb57-11"><a href="c05-descriptive-analysis.html#cb57-11" tabindex="-1"></a>    <span class="at">nest =</span> <span class="cn">TRUE</span></span>
<span id="cb57-12"><a href="c05-descriptive-analysis.html#cb57-12" tabindex="-1"></a>  )</span></code></pre></div>
<p>For RECS, details are included in the RECS documentation and Chapters <a href="c04-getting-started.html#c04-getting-started">4</a> and <a href="c10-sample-designs-replicate-weights.html#c10-sample-designs-replicate-weights">10</a>.</p>
<div class="sourceCode" id="cb58"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb58-1"><a href="c05-descriptive-analysis.html#cb58-1" tabindex="-1"></a>recs_des <span class="ot">&lt;-</span> recs_2020 <span class="sc">%&gt;%</span></span>
<span id="cb58-2"><a href="c05-descriptive-analysis.html#cb58-2" tabindex="-1"></a>  <span class="fu">as_survey_rep</span>(</span>
<span id="cb58-3"><a href="c05-descriptive-analysis.html#cb58-3" tabindex="-1"></a>    <span class="at">weights =</span> NWEIGHT,</span>
<span id="cb58-4"><a href="c05-descriptive-analysis.html#cb58-4" tabindex="-1"></a>    <span class="at">repweights =</span> NWEIGHT1<span class="sc">:</span>NWEIGHT60,</span>
<span id="cb58-5"><a href="c05-descriptive-analysis.html#cb58-5" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;JK1&quot;</span>,</span>
<span id="cb58-6"><a href="c05-descriptive-analysis.html#cb58-6" tabindex="-1"></a>    <span class="at">scale =</span> <span class="dv">59</span> <span class="sc">/</span> <span class="dv">60</span>,</span>
<span id="cb58-7"><a href="c05-descriptive-analysis.html#cb58-7" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb58-8"><a href="c05-descriptive-analysis.html#cb58-8" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="introduction-4" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction<a href="c05-descriptive-analysis.html#introduction-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Descriptive analyses, such as basic counts, cross-tabulations, or means, are among the first steps in making sense of our survey results. During descriptive analyses, we calculate point estimates of unknown population parameters, such as population mean, and uncertainty estimates, such as confidence intervals. By reviewing the findings, we can glean insight into the data, the underlying population, and any unique aspects of the data or population. For example, if only 10% of survey respondents are male, it could indicate a unique population, a potential error or bias, an intentional survey sampling method, or other factors. Additionally, descriptive analyses provide summaries of distribution and other measures. These analyses lay the groundwork for the next steps of running statistical tests or developing models.</p>
<p>We discuss many different types of descriptive analyses in this chapter. However, it is important to know what type of data we are working with and which statistics are appropriate. In survey data, we typically consider data as one of four main types:</p>
<ul>
<li>Categorical/nominal data: variables with levels or descriptions that cannot be ordered, such as the region of the country (North, South, East, and West)</li>
<li>Ordinal data: variables that can be ordered, such as those from a Likert scale (strongly disagree, disagree, agree, and strongly agree)</li>
<li>Discrete data: variables that are counted or measured, such as number of children</li>
<li>Continuous data: variables that are measured and whose values can lie anywhere on an interval, such as income</li>
</ul>
<p>This chapter discusses how to analyze measures of distribution (e.g., cross-tabulations), central tendency (e.g., means), relationship (e.g., ratios), and dispersion (e.g., standard deviation) using functions from the {srvyr} package <span class="citation">(<a href="#ref-R-srvyr">Freedman Ellis and Schneider 2024</a>)</span>.</p>
<p></p>
<p>Measures of distribution describe how often an event or response occurs. These measures include counts and totals. We cover the following functions:</p>
<ul>
<li>Count of observations (<code>survey_count()</code> and <code>survey_tally()</code>)</li>
<li>Summation of variables (<code>survey_total()</code>)</li>
</ul>
<p></p>
<p></p>
<p>Measures of central tendency find the central (or average) responses. These measures include means and medians. We cover the following functions:</p>
<ul>
<li>Means and proportions (<code>survey_mean()</code> and <code>survey_prop()</code>)</li>
<li>Quantiles and medians (<code>survey_quantile()</code> and <code>survey_median()</code>)</li>
</ul>
<p></p>
<p></p>
<p>Measures of relationship describe how variables relate to each other. These measures include correlations and ratios. We cover the following functions:</p>
<ul>
<li>Correlations (<code>survey_corr()</code>)</li>
<li>Ratios (<code>survey_ratio()</code>)</li>
</ul>
<p></p>
<p></p>
<p>Measures of dispersion describe how data spread around the central tendency for continuous variables. These measures include standard deviations and variances. We cover the following functions:</p>
<ul>
<li>Variances and standard deviations (<code>survey_var()</code> and <code>survey_sd()</code>)</li>
</ul>
<p></p>
<p>To incorporate each of these survey functions, recall the general process for survey estimation from Chapter <a href="c04-getting-started.html#c04-getting-started">4</a>:</p>
<p></p>
<ol style="list-style-type: decimal">
<li>Create a <code>tbl_svy</code> object using <code>srvyr::as_survey_design()</code> or <code>srvyr::as_survey_rep()</code>.</li>
<li>Subset the data for subpopulations using <code>srvyr::filter()</code>, if needed.</li>
<li>Specify domains of analysis using <code>srvyr::group_by()</code>, if needed.</li>
<li>Analyze the data with survey-specific functions.</li>
</ol>
<p></p>
<p>This chapter walks through how to apply the survey functions in Step 4. Note that unless otherwise specified, our estimates are weighted as a result of setting up the survey design object.</p>
<p>To look at the data by different subgroups, we can choose to filter and/or group the data. It is very important that we filter and group the data only after creating the design object. This ensures that the results accurately reflect the survey design. If we filter or group data before creating the survey design object, the data for those cases are not included in the survey design information and estimations of the variance, leading to inaccurate results.</p>
<p>For the sake of simplicity, we’ve removed cases with missing values in the examples below. For a more detailed explanation of how to handle missing data, please refer to Chapter <a href="c11-missing-data.html#c11-missing-data">11</a>.</p>
</div>
<div id="counts-and-cross-tabulations" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Counts and cross-tabulations<a href="c05-descriptive-analysis.html#counts-and-cross-tabulations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
Using <code>survey_count()</code> and <code>survey_tally()</code>, we can calculate the estimated population counts for a given variable or combination of variables. These summaries, often referred to as cross-tabulations or cross-tabs, are applied to categorical data. They help in estimating counts of the population size for different groups based on the survey data.
</p>
<div id="desc-count-syntax" class="section level3 hasAnchor" number="5.2.1">
<h3><span class="header-section-number">5.2.1</span> Syntax<a href="c05-descriptive-analysis.html#desc-count-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_count()</code> is similar to the <code>dplyr::count()</code> syntax, as mentioned in Chapter <a href="c04-getting-started.html#c04-getting-started">4</a>. However, as noted above, this function can only be called on <code>tbl_svy</code> objects. Let’s explore the syntax:</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb59-1"><a href="c05-descriptive-analysis.html#cb59-1" tabindex="-1"></a><span class="fu">survey_count</span>(</span>
<span id="cb59-2"><a href="c05-descriptive-analysis.html#cb59-2" tabindex="-1"></a>  x,</span>
<span id="cb59-3"><a href="c05-descriptive-analysis.html#cb59-3" tabindex="-1"></a>  ...,</span>
<span id="cb59-4"><a href="c05-descriptive-analysis.html#cb59-4" tabindex="-1"></a>  <span class="at">wt =</span> <span class="cn">NULL</span>,</span>
<span id="cb59-5"><a href="c05-descriptive-analysis.html#cb59-5" tabindex="-1"></a>  <span class="at">sort =</span> <span class="cn">FALSE</span>,</span>
<span id="cb59-6"><a href="c05-descriptive-analysis.html#cb59-6" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb59-7"><a href="c05-descriptive-analysis.html#cb59-7" tabindex="-1"></a>  <span class="at">.drop =</span> dplyr<span class="sc">::</span><span class="fu">group_by_drop_default</span>(x),</span>
<span id="cb59-8"><a href="c05-descriptive-analysis.html#cb59-8" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb59-9"><a href="c05-descriptive-analysis.html#cb59-9" tabindex="-1"></a>  )</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: a <code>tbl_svy</code> object created by <code>as_survey</code></li>
<li><code>...</code>: variables to group by, passed to <code>group_by</code></li>
<li><code>wt</code>: a variable to weight on in addition to the survey weights, defaults to <code>NULL</code></li>
<li><code>sort</code>: how to sort the variables, defaults to <code>FALSE</code></li>
<li><code>name</code>: the name of the count variable, defaults to <code>n</code></li>
<li><code>.drop</code>: whether to drop empty groups</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
</ul>
<p>To generate a count or cross-tabs by different variables, we include them in the (<code>...</code>) argument. This argument can take any number of variables and breaks down the counts by all combinations of the provided variables. This is similar to <code>dplyr::count()</code>. To obtain an estimate of the overall population, we can exclude any variables from the (<code>...</code>) argument or use the <code>survey_tally()</code> function. While the <code>survey_tally()</code> function has a similar syntax to the <code>survey_count()</code> function, it does not include the (<code>...</code>) or the <code>.drop</code> arguments:</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb60-1"><a href="c05-descriptive-analysis.html#cb60-1" tabindex="-1"></a><span class="fu">survey_tally</span>(</span>
<span id="cb60-2"><a href="c05-descriptive-analysis.html#cb60-2" tabindex="-1"></a>  x,</span>
<span id="cb60-3"><a href="c05-descriptive-analysis.html#cb60-3" tabindex="-1"></a>  wt,</span>
<span id="cb60-4"><a href="c05-descriptive-analysis.html#cb60-4" tabindex="-1"></a>  <span class="at">sort =</span> <span class="cn">FALSE</span>,</span>
<span id="cb60-5"><a href="c05-descriptive-analysis.html#cb60-5" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb60-6"><a href="c05-descriptive-analysis.html#cb60-6" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb60-7"><a href="c05-descriptive-analysis.html#cb60-7" tabindex="-1"></a>)</span></code></pre></div>
<p>Both functions include the <code>vartype</code> argument with four different values:</p>
<ul>
<li><code>se</code>: standard error
<ul>
<li>The estimated standard deviation of the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_se”</li>
</ul></li>
<li><code>ci</code>: confidence interval
<ul>
<li>The lower and upper limits of a confidence interval</li>
<li>Output has two columns with the variable name specified in the <code>name</code> argument with a suffix of “_low” and “_upp”</li>
<li>By default, this is a 95% confidence interval but can be changed by using the argument level and specifying a number between 0 and 1. For example, <code>level=0.8</code> would produce an 80% confidence interval.</li>
</ul></li>
<li><code>var</code>: variance
<ul>
<li>The estimated variance of the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_var”</li>
</ul></li>
<li><code>cv</code>: coefficient of variation
<ul>
<li>A ratio of the standard error and the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_cv”</li>
</ul></li>
</ul>
<p>The confidence intervals are always calculated using a symmetric t-distribution based method, given by the formula:</p>
<p><span class="math display">\[ \text{estimate} \pm t^*_{df}\times SE\]</span></p>
<p>
where <span class="math inline">\(t^*_{df}\)</span> is the critical value from a t-distribution based on the confidence level and the degrees of freedom. By default, the degrees of freedom are based on the design or number of replicates, but they can be specified using the <code>df</code> argument. For survey design objects, the degrees of freedom are calculated as the number of primary sampling units (PSUs or clusters) minus the number of strata (see Chapter <a href="c10-sample-designs-replicate-weights.html#c10-sample-designs-replicate-weights">10</a> for more information on PSUs, strata, and sample designs). For replicate-based objects, the degrees of freedom are calculated as one less than the rank of the matrix of replicate weight, where the number of replicates is typically the rank. Note that specifying <code>df = Inf</code> is equivalent to using a normal (z-based) confidence interval – this is the default in {survey}. These variability types are the same for most of the survey functions, and we provide examples using different variability types throughout this chapter. </p>
</div>
<div id="examples" class="section level3 hasAnchor" number="5.2.2">
<h3><span class="header-section-number">5.2.2</span> Examples<a href="c05-descriptive-analysis.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-estimated-population-count" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Estimated population count<a href="c05-descriptive-analysis.html#example-1-estimated-population-count" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we want to obtain the estimated number of households in the U.S. (the population of interest) using the Residential Energy Consumption Survey (RECS) data, we can use <code>survey_count()</code>. If we do not specify any variables in the <code>survey_count()</code> function, it outputs the estimated population count (<code>n</code>) and its corresponding standard error (<code>n_se</code>). </p>
<div class="sourceCode" id="cb61"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb61-1"><a href="c05-descriptive-analysis.html#cb61-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb61-2"><a href="c05-descriptive-analysis.html#cb61-2" tabindex="-1"></a>  <span class="fu">survey_count</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##            n  n_se
##        &lt;dbl&gt; &lt;dbl&gt;
## 1 123529025. 0.148</code></pre>
<p>Based on this calculation, the estimated number of households in the U.S. is 123,529,025.</p>
<p>Alternatively, we could also use the <code>survey_tally()</code> function. The example below yields the same results as <code>survey_count()</code>.</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb63-1"><a href="c05-descriptive-analysis.html#cb63-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb63-2"><a href="c05-descriptive-analysis.html#cb63-2" tabindex="-1"></a>  <span class="fu">survey_tally</span>()</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##            n  n_se
##        &lt;dbl&gt; &lt;dbl&gt;
## 1 123529025. 0.148</code></pre>
</div>
<div id="example-2-estimated-counts-by-subgroups-cross-tabs" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Estimated counts by subgroups (cross-tabs)<a href="c05-descriptive-analysis.html#example-2-estimated-counts-by-subgroups-cross-tabs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To calculate the estimated number of observations for specific subgroups, such as Region and Division, we can include the variables of interest in the <code>survey_count()</code> function. In the example below, we calculate the estimated number of housing units by region and division. The argument <code>name =</code> in <code>survey_count()</code> allows us to change the name of the count variable in the output from the default <code>n</code> to <code>N</code>.</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb65-1"><a href="c05-descriptive-analysis.html#cb65-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb65-2"><a href="c05-descriptive-analysis.html#cb65-2" tabindex="-1"></a>  <span class="fu">survey_count</span>(Region, Division, <span class="at">name =</span> <span class="st">&quot;N&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##    Region    Division                   N         N_se
##    &lt;fct&gt;     &lt;fct&gt;                  &lt;dbl&gt;        &lt;dbl&gt;
##  1 Northeast New England         5876166  0.0000000137
##  2 Northeast Middle Atlantic    16043503  0.0000000487
##  3 Midwest   East North Central 18546912  0.000000437 
##  4 Midwest   West North Central  8495815  0.0000000177
##  5 South     South Atlantic     24843261  0.0000000418
##  6 South     East South Central  7380717. 0.114       
##  7 South     West South Central 14619094  0.000488    
##  8 West      Mountain North      4615844  0.119       
##  9 West      Mountain South      4602070  0.0000000492
## 10 West      Pacific            18505643. 0.00000295</code></pre>
<p>When we run the cross-tab, we see that there are an estimated 5,876,166 housing units in the New England Division.</p>
<p>The code results in an error if we try to use the <code>survey_count()</code> syntax with <code>survey_tally()</code>:</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb67-1"><a href="c05-descriptive-analysis.html#cb67-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb67-2"><a href="c05-descriptive-analysis.html#cb67-2" tabindex="-1"></a>  <span class="fu">survey_tally</span>(Region, Division, <span class="at">name =</span> <span class="st">&quot;N&quot;</span>)</span></code></pre></div>
<pre><code>## Error in `dplyr::summarise()`:
## ℹ In argument: `N = survey_total(Region, vartype = vartype,
##   na.rm = TRUE)`.
## Caused by error:
## ! Factor not allowed in survey functions, should be used as a grouping variable.</code></pre>
<p>Use a <code>group_by()</code> function prior to using <code>survey_tally()</code> to successfully run the cross-tab:</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb69-1"><a href="c05-descriptive-analysis.html#cb69-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb69-2"><a href="c05-descriptive-analysis.html#cb69-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, Division) <span class="sc">%&gt;%</span></span>
<span id="cb69-3"><a href="c05-descriptive-analysis.html#cb69-3" tabindex="-1"></a>  <span class="fu">survey_tally</span>(<span class="at">name =</span> <span class="st">&quot;N&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
## # Groups:   Region [4]
##    Region    Division                   N         N_se
##    &lt;fct&gt;     &lt;fct&gt;                  &lt;dbl&gt;        &lt;dbl&gt;
##  1 Northeast New England         5876166  0.0000000137
##  2 Northeast Middle Atlantic    16043503  0.0000000487
##  3 Midwest   East North Central 18546912  0.000000437 
##  4 Midwest   West North Central  8495815  0.0000000177
##  5 South     South Atlantic     24843261  0.0000000418
##  6 South     East South Central  7380717. 0.114       
##  7 South     West South Central 14619094  0.000488    
##  8 West      Mountain North      4615844  0.119       
##  9 West      Mountain South      4602070  0.0000000492
## 10 West      Pacific            18505643. 0.00000295</code></pre>
<p> </p>
</div>
</div>
</div>
<div id="totals-and-sums" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Totals and sums <a href="c05-descriptive-analysis.html#totals-and-sums" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
The <code>survey_total()</code> function is analogous to <code>sum</code>. It can be applied to continuous variables to obtain the estimated total quantity in a population. Starting from this point in the chapter, all the introduced functions must be called within <code>summarize()</code>. </p>
<div id="syntax" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is the syntax:</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb71-1"><a href="c05-descriptive-analysis.html#cb71-1" tabindex="-1"></a><span class="fu">survey_total</span>(</span>
<span id="cb71-2"><a href="c05-descriptive-analysis.html#cb71-2" tabindex="-1"></a>  x,</span>
<span id="cb71-3"><a href="c05-descriptive-analysis.html#cb71-3" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb71-4"><a href="c05-descriptive-analysis.html#cb71-4" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb71-5"><a href="c05-descriptive-analysis.html#cb71-5" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb71-6"><a href="c05-descriptive-analysis.html#cb71-6" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb71-7"><a href="c05-descriptive-analysis.html#cb71-7" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb71-8"><a href="c05-descriptive-analysis.html#cb71-8" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: a variable, expression, or empty</li>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>deff</code>: a logical value stating whether the design effect should be returned, defaults to FALSE (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.9.3</a>)</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
</div>
<div id="examples-1" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Examples<a href="c05-descriptive-analysis.html#examples-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-estimated-population-count-1" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Estimated population count<a href="c05-descriptive-analysis.html#example-1-estimated-population-count-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To calculate a population count estimate with <code>survey_total()</code>, we leave the argument <code>x</code> empty, as shown in the example below:</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb72-1"><a href="c05-descriptive-analysis.html#cb72-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb72-2"><a href="c05-descriptive-analysis.html#cb72-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">Tot =</span> <span class="fu">survey_total</span>())</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##          Tot Tot_se
##        &lt;dbl&gt;  &lt;dbl&gt;
## 1 123529025.  0.148</code></pre>
<p>The estimated number of households in the U.S. is 123,529,025. Note that this result obtained from <code>survey_total()</code> is equivalent to the ones from the <code>survey_count()</code> and <code>survey_tally()</code> functions. However, the <code>survey_total()</code> function is called within <code>summarize()</code>, whereas <code>survey_count()</code> and <code>survey_tally()</code> are not. </p>
</div>
<div id="example-2-overall-summation-of-continuous-variables" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Overall summation of continuous variables<a href="c05-descriptive-analysis.html#example-2-overall-summation-of-continuous-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>
The distinction between <code>survey_total()</code> and <code>survey_count()</code> becomes more evident when working with continuous variables. Let’s compute the total cost of electricity in whole dollars from variable <code>DOLLAREL</code><a href="#fn4" class="footnote-ref" id="fnref4"><sup>4</sup></a>.
</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb74-1"><a href="c05-descriptive-analysis.html#cb74-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb74-2"><a href="c05-descriptive-analysis.html#cb74-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_total</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##       elec_bill elec_bill_se
##           &lt;dbl&gt;        &lt;dbl&gt;
## 1 170473527909.   664893504.</code></pre>
<p>It is estimated that American residential households spent a total of $170,473,527,909 on electricity in 2020, and the estimate has a standard error of $664,893,504.</p>
</div>
<div id="example-3-summation-by-groups" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Summation by groups<a href="c05-descriptive-analysis.html#example-3-summation-by-groups" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Since we are using the {srvyr} package, we can use <code>group_by()</code> to calculate the cost of electricity for different groups. Let’s examine the variations in the cost of electricity in whole dollars across regions and display the confidence interval instead of the default standard error.</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb76-1"><a href="c05-descriptive-analysis.html#cb76-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb76-2"><a href="c05-descriptive-analysis.html#cb76-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb76-3"><a href="c05-descriptive-analysis.html#cb76-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_total</span>(DOLLAREL,</span>
<span id="cb76-4"><a href="c05-descriptive-analysis.html#cb76-4" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="st">&quot;ci&quot;</span></span>
<span id="cb76-5"><a href="c05-descriptive-analysis.html#cb76-5" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   Region       elec_bill elec_bill_low elec_bill_upp
##   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 Northeast 29430369947.  28788987554.  30071752341.
## 2 Midwest   34972544751.  34339576041.  35605513460.
## 3 South     72496840204.  71534780902.  73458899506.
## 4 West      33573773008.  32909111702.  34238434313.</code></pre>
<p>The survey results estimate that households in the Northeast spent $29,430,369,947 with a confidence interval of ($28,788,987,554, $30,071,752,341) on electricity in 2020, while households in the South spent an estimated $72,496,840,204 with a confidence interval of ($71,534,780,902, $73,458,899,506).</p>
<p>As we calculate these numbers, we may notice that the confidence interval of the South is larger than those of other regions. This implies that we have less certainty about the true value of electricity spending in the South. A larger confidence interval could be due to a variety of factors, such as a wider range of electricity spending in the South. We could try to analyze smaller regions within the South to identify areas that are contributing to more variability. Descriptive analyses serve as a valuable starting point for more in-depth exploration and analysis. </p>
</div>
</div>
</div>
<div id="desc-meanprop" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Means and proportions<a href="c05-descriptive-analysis.html#desc-meanprop" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
Means and proportions form the foundation of many research studies. These estimates are often the first things we look for when reviewing research on a given topic. The <code>survey_mean()</code> and <code>survey_prop()</code> functions calculate means and proportions while taking into account the survey design elements. The <code>survey_mean()</code> function should be used on continuous variables of survey data, while the <code>survey_prop()</code> function should be used on categorical variables.<br />
</p>
<div id="desc-meanprop-syntax" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Syntax<a href="c05-descriptive-analysis.html#desc-meanprop-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for both means and proportions is very similar:</p>
<div class="sourceCode" id="cb78"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb78-1"><a href="c05-descriptive-analysis.html#cb78-1" tabindex="-1"></a><span class="fu">survey_mean</span>(</span>
<span id="cb78-2"><a href="c05-descriptive-analysis.html#cb78-2" tabindex="-1"></a>  x,</span>
<span id="cb78-3"><a href="c05-descriptive-analysis.html#cb78-3" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-4"><a href="c05-descriptive-analysis.html#cb78-4" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb78-5"><a href="c05-descriptive-analysis.html#cb78-5" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb78-6"><a href="c05-descriptive-analysis.html#cb78-6" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-7"><a href="c05-descriptive-analysis.html#cb78-7" tabindex="-1"></a>  <span class="at">prop_method =</span> <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>),</span>
<span id="cb78-8"><a href="c05-descriptive-analysis.html#cb78-8" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-9"><a href="c05-descriptive-analysis.html#cb78-9" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb78-10"><a href="c05-descriptive-analysis.html#cb78-10" tabindex="-1"></a>)</span>
<span id="cb78-11"><a href="c05-descriptive-analysis.html#cb78-11" tabindex="-1"></a></span>
<span id="cb78-12"><a href="c05-descriptive-analysis.html#cb78-12" tabindex="-1"></a><span class="fu">survey_prop</span>(</span>
<span id="cb78-13"><a href="c05-descriptive-analysis.html#cb78-13" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-14"><a href="c05-descriptive-analysis.html#cb78-14" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb78-15"><a href="c05-descriptive-analysis.html#cb78-15" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb78-16"><a href="c05-descriptive-analysis.html#cb78-16" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">TRUE</span>,</span>
<span id="cb78-17"><a href="c05-descriptive-analysis.html#cb78-17" tabindex="-1"></a>  <span class="at">prop_method =</span> </span>
<span id="cb78-18"><a href="c05-descriptive-analysis.html#cb78-18" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>, <span class="st">&quot;xlogit&quot;</span>),</span>
<span id="cb78-19"><a href="c05-descriptive-analysis.html#cb78-19" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb78-20"><a href="c05-descriptive-analysis.html#cb78-20" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb78-21"><a href="c05-descriptive-analysis.html#cb78-21" tabindex="-1"></a>)</span></code></pre></div>
<p>Both functions have the following arguments and defaults:</p>
<ul>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>prop_method</code>: Method to calculate the confidence interval for confidence intervals</li>
<li><code>deff</code>: a logical value stating whether the design effect should be returned, defaults to FALSE (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.9.3</a>)</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
<p>There are two main differences in the syntax. The <code>survey_mean()</code> function includes the first argument <code>x</code>, representing the variable or expression on which the mean should be calculated. The <code>survey_prop()</code> does not have an argument to include the variables directly. Instead, prior to <code>summarize()</code>, we must use the <code>group_by()</code> function to specify the variables of interest for <code>survey_prop()</code>. For <code>survey_mean()</code>, including a <code>group_by()</code> function allows us to obtain the means by different groups.</p>
<p>The other main difference is with the <code>proportion</code> argument. The <code>survey_mean()</code> function can be used to calculate both means and proportions. Its <code>proportion</code> argument defaults to <code>FALSE</code>, indicating it is used for calculating means. If we wish to calculate a proportion using <code>survey_mean()</code>, we need to set the <code>proportion</code> argument to <code>TRUE</code>. In the <code>survey_prop()</code> function, the <code>proportion</code> argument defaults to <code>TRUE</code> because the function is specifically designed for calculating proportions.</p>
<p>In Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a>, we provide an overview of different variability types. The confidence interval used for most measures, such as means and counts, is referred to as a Wald-type interval. However, for proportions, a Wald-type interval with a symmetric t-based confidence interval may not provide accurate coverage, especially when dealing with small sample sizes or proportions “near” 0 or 1. We can use other methods to calculate confidence intervals, which we specify using the <code>prop_method</code> option in <code>survey_prop()</code>. The options include:</p>
<ul>
<li><code>logit</code>: fits a logistic regression model and computes a Wald-type interval on the log-odds scale, which is then transformed to the probability scale. This is the default method.</li>
<li><code>likelihood</code>: uses the (Rao-Scott) scaled chi-squared distribution for the log-likelihood from a binomial distribution.</li>
<li><code>asin</code>: uses the variance-stabilizing transformation for the binomial distribution, the arcsine square root, and then back-transforms the interval to the probability scale.</li>
<li><code>beta</code>: uses the incomplete beta function with an effective sample size based on the estimated variance of the proportion.</li>
<li><code>mean</code>: the Wald-type interval (<span class="math inline">\(\pm t_{df}^*\times SE\)</span>).</li>
<li><code>xlogit</code>: uses a logit transformation of the proportion, calculates a Wald-type interval, and then back-transforms to the probability scale. This method is the same as those used by default in SUDAAN and SPSS.</li>
</ul>
<p>Each option yields slightly different confidence interval bounds when dealing with proportions. Please note that when working with <code>survey_mean()</code>, we do not need to specify a method unless the <code>proportion</code> argument is <code>TRUE</code>. If <code>proportion</code> is <code>FALSE</code>, it calculates a symmetric <code>mean</code> type of confidence interval.</p>
</div>
<div id="examples-2" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Examples<a href="c05-descriptive-analysis.html#examples-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-one-variable-proportion" class="section level4 unnumbered hasAnchor">
<h4>Example 1: One variable proportion<a href="c05-descriptive-analysis.html#example-1-one-variable-proportion" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we are interested in obtaining the proportion of people in each region in the RECS data, we can use <code>group_by()</code> and <code>survey_prop()</code> as shown below:</p>
<div class="sourceCode" id="cb79"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb79-1"><a href="c05-descriptive-analysis.html#cb79-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb79-2"><a href="c05-descriptive-analysis.html#cb79-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb79-3"><a href="c05-descriptive-analysis.html#cb79-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region        p           p_se
##   &lt;fct&gt;     &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast 0.177 0.000000000212
## 2 Midwest   0.219 0.000000000262
## 3 South     0.379 0.000000000740
## 4 West      0.224 0.000000000816</code></pre>
<p>with 17.7% of the households in the Northeast, 21.9% in the Midwest, and so on. Note that the proportions in column <code>p</code> add up to one.</p>
<p>
The <code>survey_prop()</code> function is essentially the same as using <code>survey_mean()</code> with a categorical variable and without specifying a numeric variable in the <code>x</code> argument. The following code gives us the same results as above:
</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb81-1"><a href="c05-descriptive-analysis.html#cb81-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb81-2"><a href="c05-descriptive-analysis.html#cb81-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb81-3"><a href="c05-descriptive-analysis.html#cb81-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region        p           p_se
##   &lt;fct&gt;     &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast 0.177 0.000000000212
## 2 Midwest   0.219 0.000000000262
## 3 South     0.379 0.000000000740
## 4 West      0.224 0.000000000816</code></pre>
</div>
<div id="example-2-conditional-proportions" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Conditional proportions<a href="c05-descriptive-analysis.html#example-2-conditional-proportions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can also obtain proportions by more than one variable. In the following example, we look at the proportion of housing units by Region and whether air conditioning (A/C) is used (<code>ACUsed</code>)<a href="#fn5" class="footnote-ref" id="fnref5"><sup>5</sup></a>.</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb83-1"><a href="c05-descriptive-analysis.html#cb83-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb83-2"><a href="c05-descriptive-analysis.html#cb83-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb83-3"><a href="c05-descriptive-analysis.html#cb83-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
## # Groups:   Region [4]
##   Region    ACUsed      p    p_se
##   &lt;fct&gt;     &lt;lgl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Northeast FALSE  0.110  0.00590
## 2 Northeast TRUE   0.890  0.00590
## 3 Midwest   FALSE  0.0666 0.00508
## 4 Midwest   TRUE   0.933  0.00508
## 5 South     FALSE  0.0581 0.00278
## 6 South     TRUE   0.942  0.00278
## 7 West      FALSE  0.255  0.00759
## 8 West      TRUE   0.745  0.00759</code></pre>
<p>When specifying multiple variables, the proportions are conditional. In the results above, notice that the proportions sum to 1 within each region. This can be interpreted as the proportion of housing units with A/C within each region. For example, in the Northeast region, approximately 11.0% of housing units don’t have A/C, while around 89.0% have A/C.</p>
</div>
<div id="example-3-joint-proportions" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Joint proportions<a href="c05-descriptive-analysis.html#example-3-joint-proportions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p> </p>
<p>If we’re interested in a joint proportion, we use the <code>interact()</code> function. In the example below, we apply the <code>interact()</code> function to <code>Region</code> and <code>ACUsed</code>:</p>
<div class="sourceCode" id="cb85"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb85-1"><a href="c05-descriptive-analysis.html#cb85-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb85-2"><a href="c05-descriptive-analysis.html#cb85-2" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">interact</span>(Region, ACUsed)) <span class="sc">%&gt;%</span></span>
<span id="cb85-3"><a href="c05-descriptive-analysis.html#cb85-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   Region    ACUsed      p    p_se
##   &lt;fct&gt;     &lt;lgl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Northeast FALSE  0.0196 0.00105
## 2 Northeast TRUE   0.158  0.00105
## 3 Midwest   FALSE  0.0146 0.00111
## 4 Midwest   TRUE   0.204  0.00111
## 5 South     FALSE  0.0220 0.00106
## 6 South     TRUE   0.357  0.00106
## 7 West      FALSE  0.0573 0.00170
## 8 West      TRUE   0.167  0.00170</code></pre>
<p>In this case, all proportions sum to 1, not just within regions. This means that 15.8% of the population lives in the Northeast and has A/C. As noted earlier, we can use both the <code>survey_prop()</code> and <code>survey_mean()</code> functions, and they produce the same results. </p>
</div>
<div id="example-4-overall-mean" class="section level4 unnumbered hasAnchor">
<h4>Example 4: Overall mean<a href="c05-descriptive-analysis.html#example-4-overall-mean" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Below, we calculate the estimated average cost of electricity in the U.S. using <code>survey_mean()</code>. To include both the standard error and the confidence interval, we can include them in the <code>vartype</code> argument:</p>
<div class="sourceCode" id="cb87"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb87-1"><a href="c05-descriptive-analysis.html#cb87-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb87-2"><a href="c05-descriptive-analysis.html#cb87-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL,</span>
<span id="cb87-3"><a href="c05-descriptive-analysis.html#cb87-3" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)</span>
<span id="cb87-4"><a href="c05-descriptive-analysis.html#cb87-4" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   elec_bill elec_bill_se elec_bill_low elec_bill_upp
##       &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1     1380.         5.38         1369.         1391.</code></pre>
<p>Nationally, the average household spent $1,380 in 2020.</p>
</div>
<div id="example-5-means-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 5: Means by subgroup<a href="c05-descriptive-analysis.html#example-5-means-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can also calculate the estimated average cost of electricity in the U.S. by each region. To do this, we include a <code>group_by()</code> function with the variable of interest before the <code>summarize()</code> function:</p>
<div class="sourceCode" id="cb89"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb89-1"><a href="c05-descriptive-analysis.html#cb89-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb89-2"><a href="c05-descriptive-analysis.html#cb89-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb89-3"><a href="c05-descriptive-analysis.html#cb89-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    elec_bill elec_bill_se
##   &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;
## 1 Northeast     1343.         14.6
## 2 Midwest       1293.         11.7
## 3 South         1548.         10.3
## 4 West          1211.         12.0</code></pre>
<p>Households from the West spent approximately $1,211, while in the South, the average spending was $1,548. </p>
</div>
</div>
</div>
<div id="quantiles-and-medians" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Quantiles and medians<a href="c05-descriptive-analysis.html#quantiles-and-medians" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
To better understand the distribution of a continuous variable like income, we can calculate quantiles at specific points. For example, computing estimates of the quartiles (25%, 50%, 75%) helps us understand how income is spread across the population. We use the <code>survey_quantile()</code> function to calculate quantiles in survey data.</p>
<p>Medians are useful for finding the midpoint of a continuous distribution when the data are skewed, as medians are less affected by outliers compared to means. The median is the same as the 50th percentile, meaning the value where 50% of the data are higher and 50% are lower. Because medians are a special, common case of quantiles, we have a dedicated function called <code>survey_median()</code> for calculating the median in survey data. Alternatively, we can use the <code>survey_quantile()</code> function with the <code>quantiles</code> argument set to <code>0.5</code> to achieve the same result. </p>
<div id="syntax-1" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_quantile()</code> and <code>survey_median()</code> are nearly identical:</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb91-1"><a href="c05-descriptive-analysis.html#cb91-1" tabindex="-1"></a><span class="fu">survey_quantile</span>(</span>
<span id="cb91-2"><a href="c05-descriptive-analysis.html#cb91-2" tabindex="-1"></a>  x,</span>
<span id="cb91-3"><a href="c05-descriptive-analysis.html#cb91-3" tabindex="-1"></a>  quantiles,</span>
<span id="cb91-4"><a href="c05-descriptive-analysis.html#cb91-4" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb91-5"><a href="c05-descriptive-analysis.html#cb91-5" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb91-6"><a href="c05-descriptive-analysis.html#cb91-6" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb91-7"><a href="c05-descriptive-analysis.html#cb91-7" tabindex="-1"></a>  <span class="at">interval_type =</span> </span>
<span id="cb91-8"><a href="c05-descriptive-analysis.html#cb91-8" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;xlogit&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;score&quot;</span>, <span class="st">&quot;quantile&quot;</span>),</span>
<span id="cb91-9"><a href="c05-descriptive-analysis.html#cb91-9" tabindex="-1"></a>  <span class="at">qrule =</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;school&quot;</span>, <span class="st">&quot;shahvaish&quot;</span>, <span class="st">&quot;hf1&quot;</span>, <span class="st">&quot;hf2&quot;</span>, <span class="st">&quot;hf3&quot;</span>, </span>
<span id="cb91-10"><a href="c05-descriptive-analysis.html#cb91-10" tabindex="-1"></a>            <span class="st">&quot;hf4&quot;</span>, <span class="st">&quot;hf5&quot;</span>, <span class="st">&quot;hf6&quot;</span>, <span class="st">&quot;hf7&quot;</span>, <span class="st">&quot;hf8&quot;</span>, <span class="st">&quot;hf9&quot;</span>),</span>
<span id="cb91-11"><a href="c05-descriptive-analysis.html#cb91-11" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb91-12"><a href="c05-descriptive-analysis.html#cb91-12" tabindex="-1"></a>)</span>
<span id="cb91-13"><a href="c05-descriptive-analysis.html#cb91-13" tabindex="-1"></a></span>
<span id="cb91-14"><a href="c05-descriptive-analysis.html#cb91-14" tabindex="-1"></a><span class="fu">survey_median</span>(</span>
<span id="cb91-15"><a href="c05-descriptive-analysis.html#cb91-15" tabindex="-1"></a>  x,</span>
<span id="cb91-16"><a href="c05-descriptive-analysis.html#cb91-16" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb91-17"><a href="c05-descriptive-analysis.html#cb91-17" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb91-18"><a href="c05-descriptive-analysis.html#cb91-18" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb91-19"><a href="c05-descriptive-analysis.html#cb91-19" tabindex="-1"></a>  <span class="at">interval_type =</span> </span>
<span id="cb91-20"><a href="c05-descriptive-analysis.html#cb91-20" tabindex="-1"></a>    <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;xlogit&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;score&quot;</span>, <span class="st">&quot;quantile&quot;</span>),</span>
<span id="cb91-21"><a href="c05-descriptive-analysis.html#cb91-21" tabindex="-1"></a>  <span class="at">qrule =</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;school&quot;</span>, <span class="st">&quot;shahvaish&quot;</span>, <span class="st">&quot;hf1&quot;</span>, <span class="st">&quot;hf2&quot;</span>, <span class="st">&quot;hf3&quot;</span>, </span>
<span id="cb91-22"><a href="c05-descriptive-analysis.html#cb91-22" tabindex="-1"></a>            <span class="st">&quot;hf4&quot;</span>, <span class="st">&quot;hf5&quot;</span>, <span class="st">&quot;hf6&quot;</span>, <span class="st">&quot;hf7&quot;</span>, <span class="st">&quot;hf8&quot;</span>, <span class="st">&quot;hf9&quot;</span>),</span>
<span id="cb91-23"><a href="c05-descriptive-analysis.html#cb91-23" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb91-24"><a href="c05-descriptive-analysis.html#cb91-24" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments available in both functions are:</p>
<ul>
<li><code>x</code>: a variable, expression, or empty</li>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate, defaults to <code>se</code> (standard error)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>interval_type</code>: method for calculating a confidence interval</li>
<li><code>qrule</code>: rule for defining quantiles. The default is the lower end of the quantile interval (“math”). The midpoint of the quantile interval is the “school” rule. “hf1” to “hf9” are weighted analogs to type=1 to 9 in <code>quantile()</code>. “shahvaish” corresponds to a rule proposed by <span class="citation">Shah and Vaish (<a href="#ref-shahvaish">2006</a>)</span>. See <code>vignette("qrule", package="survey")</code> for more information.</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
<p>The only difference between <code>survey_quantile()</code> and <code>survey_median()</code> is the inclusion of the <code>quantiles</code> argument in the <code>survey_quantile()</code> function. This argument takes a vector with values between 0 and 1 to indicate which quantiles to calculate. For example, if we wanted the quartiles of a variable, we would provide <code>quantiles = c(0.25, 0.5, 0.75)</code>. While we can specify quantiles of 0 and 1, which represent the minimum and maximum, this is not recommended. It only returns the minimum and maximum of the respondents and cannot be extrapolated to the population, as there is no valid definition of standard error.</p>
<p>In Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a>, we provide an overview of the different variability types. The interval used in confidence intervals for most measures, such as means and counts, is referred to as a Wald-type interval. However, this is not always the most accurate interval for quantiles. Similar to confidence intervals for proportions, quantiles have various interval types, including asin, beta, mean, and xlogit (see Section <a href="c05-descriptive-analysis.html#desc-meanprop-syntax">5.4.1</a>). Quantiles also have two more methods available:</p>
<ul>
<li><code>score</code>: the Francisco and Fuller confidence interval based on inverting a score test (only available for design-based survey objects and not replicate-based objects)</li>
<li><code>quantile</code>: based on the replicates of the quantile. This is not valid for jackknife-type replicates but is available for bootstrap and BRR replicates.</li>
</ul>
<p>One note with the <code>score</code> method is that when there are numerous ties in the data, this method may produce confidence intervals that do not contain the estimate. When dealing with a high propensity for ties (e.g., many respondents are the same age), it is recommended to use another method. SUDAAN, for example, uses the <code>score</code> method but adds noise to the values to prevent issues. The documentation in the {survey} package indicates, in general, that the <code>score</code> method may have poorer performance compared to the beta and logit intervals <span class="citation">(<a href="#ref-lumley2010complex">Lumley 2010</a>)</span>.</p>
</div>
<div id="examples-3" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Examples<a href="c05-descriptive-analysis.html#examples-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-quartiles" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall quartiles<a href="c05-descriptive-analysis.html#example-1-overall-quartiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Quantiles provide insights into the distribution of a variable. Let’s look into the quartiles, specifically, the first quartile (p=0.25), the median (p=0.5), and the third quartile (p=0.75) of electric bills.</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb92-1"><a href="c05-descriptive-analysis.html#cb92-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb92-2"><a href="c05-descriptive-analysis.html#cb92-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb92-3"><a href="c05-descriptive-analysis.html#cb92-3" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, .<span class="dv">5</span>, <span class="fl">0.75</span>)</span>
<span id="cb92-4"><a href="c05-descriptive-analysis.html#cb92-4" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   elec_bill_q25 elec_bill_q50 elec_bill_q75 elec_bill_q25_se
##           &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
## 1          795.         1215.         1770.             5.69
##   elec_bill_q50_se elec_bill_q75_se
##              &lt;dbl&gt;            &lt;dbl&gt;
## 1             6.33             9.99</code></pre>
<p>The output above shows the values for the three quartiles of electric bill costs and their respective standard errors: the 25th percentile is $795 with a standard error of $5.69, the 50th percentile (median) is $1,215 with a standard error of $6.33, and the 75th percentile is $1,770 with a standard error of $9.99.</p>
</div>
<div id="example-2-quartiles-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Quartiles by subgroup<a href="c05-descriptive-analysis.html#example-2-quartiles-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can estimate the quantiles of electric bills by region by using the <code>group_by()</code> function:</p>
<div class="sourceCode" id="cb94"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb94-1"><a href="c05-descriptive-analysis.html#cb94-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb94-2"><a href="c05-descriptive-analysis.html#cb94-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb94-3"><a href="c05-descriptive-analysis.html#cb94-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb94-4"><a href="c05-descriptive-analysis.html#cb94-4" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, .<span class="dv">5</span>, <span class="fl">0.75</span>)</span>
<span id="cb94-5"><a href="c05-descriptive-analysis.html#cb94-5" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Region    elec_bill_q25 elec_bill_q50 elec_bill_q75 elec_bill_q25_se
##   &lt;fct&gt;             &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
## 1 Northeast          740.         1148.         1712.            13.7 
## 2 Midwest            769.         1149.         1632.             8.88
## 3 South              968.         1402.         1945.            10.6 
## 4 West               623.         1028.         1568.            10.8 
##   elec_bill_q50_se elec_bill_q75_se
##              &lt;dbl&gt;            &lt;dbl&gt;
## 1            16.6              25.8
## 2            11.6              18.6
## 3             9.17             13.9
## 4            14.3              20.5</code></pre>
<p>The 25th percentile for the Northeast region is $740, while it is $968 for the South.</p>
</div>
<div id="example-3-minimum-and-maximum" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Minimum and maximum<a href="c05-descriptive-analysis.html#example-3-minimum-and-maximum" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As mentioned in the syntax section, we can specify quantiles of <code>0</code> (minimum) and <code>1</code> (maximum), and R calculates these values. However, these are only the minimum and maximum values in the data, and there is not enough information to determine their standard errors:</p>
<div class="sourceCode" id="cb96"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb96-1"><a href="c05-descriptive-analysis.html#cb96-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb96-2"><a href="c05-descriptive-analysis.html#cb96-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb96-3"><a href="c05-descriptive-analysis.html#cb96-3" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)</span>
<span id="cb96-4"><a href="c05-descriptive-analysis.html#cb96-4" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   elec_bill_q00 elec_bill_q100 elec_bill_q00_se elec_bill_q100_se
##           &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;
## 1         -889.         15680.              NaN                 0</code></pre>
<p>The minimum cost of electricity in the dataset is –$889, while the maximum is $15,680, but the standard error is shown as <code>NaN</code> and <code>0</code>, respectively. Notice that the minimum cost is a negative number. This may be surprising, but some housing units with solar power sell their energy back to the grid and earn money, which is recorded as a negative expenditure.</p>
</div>
<div id="example-4-overall-median" class="section level4 unnumbered hasAnchor">
<h4>Example 4: Overall median<a href="c05-descriptive-analysis.html#example-4-overall-median" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the estimated median cost of electricity in the U.S. using the <code>survey_median()</code> function:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="c05-descriptive-analysis.html#cb98-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb98-2"><a href="c05-descriptive-analysis.html#cb98-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_median</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   elec_bill elec_bill_se
##       &lt;dbl&gt;        &lt;dbl&gt;
## 1     1215.         6.33</code></pre>
<p>Nationally, the median household spent $1,215 in 2020. This is the same result as we obtained using the <code>survey_quantile()</code> function. Interestingly, the average electric bill for households that we calculated in Section <a href="c05-descriptive-analysis.html#desc-meanprop">5.4</a> is $1,380, but the estimated median electric bill is $1,215, indicating the distribution is likely right-skewed. </p>
</div>
<div id="example-5-medians-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 5: Medians by subgroup<a href="c05-descriptive-analysis.html#example-5-medians-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the estimated median cost of electricity in the U.S. by region using the <code>group_by()</code> function with the variable(s) of interest before the <code>summarize()</code> function, similar to when we found the mean by region.</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="c05-descriptive-analysis.html#cb100-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb100-2"><a href="c05-descriptive-analysis.html#cb100-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb100-3"><a href="c05-descriptive-analysis.html#cb100-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_median</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    elec_bill elec_bill_se
##   &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;
## 1 Northeast     1148.        16.6 
## 2 Midwest       1149.        11.6 
## 3 South         1402.         9.17
## 4 West          1028.        14.3</code></pre>
<p>We estimate that households in the Northeast spent a median of $1,148 on electricity, and in the South, they spent a median of $1,402. </p>
</div>
</div>
</div>
<div id="ratios" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Ratios <a href="c05-descriptive-analysis.html#ratios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A ratio is a measure of the ratio of the sum of two variables, specifically in the form of:</p>
<p><span class="math display">\[ \frac{\sum x_i}{\sum y_i}.\]</span>
Note that the ratio is not the same as calculating the following:</p>
<p><span class="math display">\[ \frac{1}{N} \sum \frac{x_i}{y_i} \]</span>
which can be calculated with <code>survey_mean()</code> by creating a derived variable <span class="math inline">\(z=x/y\)</span> and then calculating the mean of <span class="math inline">\(z\)</span>.</p>
<p>Say we wanted to assess the energy efficiency of homes in a standardized way, where we can compare homes of different sizes. We can calculate the ratio of energy consumption to the square footage of a home. This helps us meaningfully compare homes of different sizes by identifying how much energy is being used per unit of space. To calculate this ratio, we would run <code>survey_ratio(Energy Consumption in BTUs, Square Footage of Home)</code>. If, instead, we used <code>survey_mean(Energy Consumption in BTUs/Square Footage of Home)</code>, we would estimate the average energy consumption per square foot of all surveyed homes. While helpful in understanding general energy use, this statistic does not account for differences in home sizes.</p>
<div id="syntax-2" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_ratio()</code> is as follows:</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="c05-descriptive-analysis.html#cb102-1" tabindex="-1"></a><span class="fu">survey_ratio</span>(</span>
<span id="cb102-2"><a href="c05-descriptive-analysis.html#cb102-2" tabindex="-1"></a>  numerator,</span>
<span id="cb102-3"><a href="c05-descriptive-analysis.html#cb102-3" tabindex="-1"></a>  denominator,</span>
<span id="cb102-4"><a href="c05-descriptive-analysis.html#cb102-4" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb102-5"><a href="c05-descriptive-analysis.html#cb102-5" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb102-6"><a href="c05-descriptive-analysis.html#cb102-6" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb102-7"><a href="c05-descriptive-analysis.html#cb102-7" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb102-8"><a href="c05-descriptive-analysis.html#cb102-8" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb102-9"><a href="c05-descriptive-analysis.html#cb102-9" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>numerator</code>: The numerator of the ratio</li>
<li><code>denominator</code>: The denominator of the ratio</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
<li><code>level</code>: A single number or vector of numbers indicating the confidence level</li>
<li><code>deff</code>: A logical value to indicate whether the design effect should be returned (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.9.3</a>)</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-4" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Examples<a href="c05-descriptive-analysis.html#examples-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-ratios" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall ratios<a href="c05-descriptive-analysis.html#example-1-overall-ratios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose we wanted to find the ratio of dollars spent on liquid propane per unit (in British thermal unit [Btu]) nationally<a href="#fn6" class="footnote-ref" id="fnref6"><sup>6</sup></a>. To find the average cost to a household, we can use <code>survey_mean()</code>. However, to find the national unit rate, we can use <code>survey_ratio()</code>. In the following example, we show both methods and discuss the interpretation of each:</p>
<div class="sourceCode" id="cb103"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb103-1"><a href="c05-descriptive-analysis.html#cb103-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb103-2"><a href="c05-descriptive-analysis.html#cb103-2" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb103-3"><a href="c05-descriptive-analysis.html#cb103-3" tabindex="-1"></a>    <span class="at">DOLLARLP_Tot =</span> <span class="fu">survey_total</span>(DOLLARLP, <span class="at">vartype =</span> <span class="cn">NULL</span>),</span>
<span id="cb103-4"><a href="c05-descriptive-analysis.html#cb103-4" tabindex="-1"></a>    <span class="at">BTULP_Tot =</span> <span class="fu">survey_total</span>(BTULP, <span class="at">vartype =</span> <span class="cn">NULL</span>),</span>
<span id="cb103-5"><a href="c05-descriptive-analysis.html#cb103-5" tabindex="-1"></a>    <span class="at">DOL_BTU_Rat =</span> <span class="fu">survey_ratio</span>(DOLLARLP, BTULP),</span>
<span id="cb103-6"><a href="c05-descriptive-analysis.html#cb103-6" tabindex="-1"></a>    <span class="at">DOL_BTU_Avg =</span> <span class="fu">survey_mean</span>(DOLLARLP <span class="sc">/</span> BTULP, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb103-7"><a href="c05-descriptive-analysis.html#cb103-7" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   DOLLARLP_Tot     BTULP_Tot DOL_BTU_Rat DOL_BTU_Rat_se DOL_BTU_Avg
##          &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;
## 1  8122911173. 391425311586.      0.0208       0.000240      0.0240
##   DOL_BTU_Avg_se
##            &lt;dbl&gt;
## 1       0.000223</code></pre>
<p></p>
<p>The ratio of the total spent on liquid propane to the total consumption was 0.0208, but the average rate was 0.024. With a bit of calculation, we can show that the ratio is the ratio of the totals <code>DOLLARLP_Tot</code>/<code>BTULP_Tot</code>=8,122,911,173/391,425,311,586=0.0208. Although the estimated ratio can be calculated manually in this manner, the standard error requires the use of the <code>survey_ratio()</code> function. The average can be interpreted as the average rate paid by a household.</p>
</div>
<div id="example-2-ratios-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Ratios by subgroup<a href="c05-descriptive-analysis.html#example-2-ratios-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As previously done with other estimates, we can use <code>group_by()</code> to examine whether this ratio varies by region.</p>
<div class="sourceCode" id="cb105"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb105-1"><a href="c05-descriptive-analysis.html#cb105-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb105-2"><a href="c05-descriptive-analysis.html#cb105-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb105-3"><a href="c05-descriptive-analysis.html#cb105-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">DOL_BTU_Rat =</span> <span class="fu">survey_ratio</span>(DOLLARLP, BTULP)) <span class="sc">%&gt;%</span></span>
<span id="cb105-4"><a href="c05-descriptive-analysis.html#cb105-4" tabindex="-1"></a>  <span class="fu">arrange</span>(DOL_BTU_Rat)</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    DOL_BTU_Rat DOL_BTU_Rat_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Midwest        0.0158       0.000240
## 2 South          0.0245       0.000388
## 3 West           0.0246       0.000875
## 4 Northeast      0.0247       0.000488</code></pre>
<p>Although not a formal statistical test, it appears that the cost ratios for liquid propane are the lowest in the Midwest (0.0158). </p>
</div>
</div>
</div>
<div id="correlations" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Correlations <a href="c05-descriptive-analysis.html#correlations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
The correlation is a measure of the linear relationship between two continuous variables, which ranges between –1 and 1. The most commonly used method is Pearson’s correlation (referred to as correlation henceforth). A sample correlation for a simple random sample is calculated as follows:</p>
<p><span class="math display">\[\frac{\sum (x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum (x_i-\bar{x})^2} \sqrt{\sum(y_i-\bar{y})^2}} \]</span></p>
<p>When using <code>survey_corr()</code> for designs other than a simple random sample, the weights are applied when estimating the correlation.
</p>
<div id="syntax-3" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_corr()</code> is as follows:</p>
<div class="sourceCode" id="cb107"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb107-1"><a href="c05-descriptive-analysis.html#cb107-1" tabindex="-1"></a><span class="fu">survey_corr</span>(</span>
<span id="cb107-2"><a href="c05-descriptive-analysis.html#cb107-2" tabindex="-1"></a>  x,</span>
<span id="cb107-3"><a href="c05-descriptive-analysis.html#cb107-3" tabindex="-1"></a>  y,</span>
<span id="cb107-4"><a href="c05-descriptive-analysis.html#cb107-4" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb107-5"><a href="c05-descriptive-analysis.html#cb107-5" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb107-6"><a href="c05-descriptive-analysis.html#cb107-6" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb107-7"><a href="c05-descriptive-analysis.html#cb107-7" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb107-8"><a href="c05-descriptive-analysis.html#cb107-8" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: A variable or expression</li>
<li><code>y</code>: A variable or expression</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: Type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
<li><code>level</code>: (For vartype = “ci” only) A single number or vector of numbers indicating the confidence level</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-5" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Examples<a href="c05-descriptive-analysis.html#examples-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-correlation" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall correlation<a href="c05-descriptive-analysis.html#example-1-overall-correlation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the correlation between the total square footage of homes (<code>TOTSQFT_EN</code>)<a href="#fn7" class="footnote-ref" id="fnref7"><sup>7</sup></a> and electricity consumption (<code>BTUEL</code>)<a href="#fn8" class="footnote-ref" id="fnref8"><sup>8</sup></a>.</p>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="c05-descriptive-analysis.html#cb108-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="c05-descriptive-analysis.html#cb108-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">SQFT_Elec_Corr =</span> <span class="fu">survey_corr</span>(TOTSQFT_EN, BTUEL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   SQFT_Elec_Corr SQFT_Elec_Corr_se
##            &lt;dbl&gt;             &lt;dbl&gt;
## 1          0.417           0.00689</code></pre>
<p>The correlation between the total square footage of homes and electricity consumption is 0.417, indicating a moderate positive relationship.</p>
</div>
<div id="example-2-correlations-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Correlations by subgroup<a href="c05-descriptive-analysis.html#example-2-correlations-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can explore the correlation between total square footage and electricity consumption based on subgroups, such as whether A/C is used (<code>ACUsed</code>).</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="c05-descriptive-analysis.html#cb110-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="c05-descriptive-analysis.html#cb110-2" tabindex="-1"></a>  <span class="fu">group_by</span>(ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="c05-descriptive-analysis.html#cb110-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">SQFT_Elec_Corr =</span> <span class="fu">survey_corr</span>(TOTSQFT_EN, DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   ACUsed SQFT_Elec_Corr SQFT_Elec_Corr_se
##   &lt;lgl&gt;           &lt;dbl&gt;             &lt;dbl&gt;
## 1 FALSE           0.290           0.0240 
## 2 TRUE            0.401           0.00808</code></pre>
<p>For homes without A/C, there is a small positive correlation between total square footage with electricity consumption (0.29). For homes with A/C, the correlation of 0.401 indicates a stronger positive correlation between total square footage and electricity consumption. </p>
</div>
</div>
</div>
<div id="standard-deviation-and-variance" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Standard deviation and variance <a href="c05-descriptive-analysis.html#standard-deviation-and-variance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>
All survey functions produce an estimate of the variability of a given estimate. No additional function is needed when dealing with variable estimates. However, if we are specifically interested in population variance and standard deviation, we can use the <code>survey_var()</code> and <code>survey_sd()</code> functions. In our experience, it is not common practice to use these functions. They can be used when designing a future study to gauge population variability and inform sampling precision.</p>
<div id="syntax-4" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As with non-survey data, the standard deviation estimate is the square root of the variance estimate. Therefore, the <code>survey_var()</code> and <code>survey_sd()</code> functions share the same arguments, except the standard deviation does not allow the usage of <code>vartype</code>.</p>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="c05-descriptive-analysis.html#cb112-1" tabindex="-1"></a><span class="fu">survey_var</span>(</span>
<span id="cb112-2"><a href="c05-descriptive-analysis.html#cb112-2" tabindex="-1"></a>  x,</span>
<span id="cb112-3"><a href="c05-descriptive-analysis.html#cb112-3" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb112-4"><a href="c05-descriptive-analysis.html#cb112-4" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>),</span>
<span id="cb112-5"><a href="c05-descriptive-analysis.html#cb112-5" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb112-6"><a href="c05-descriptive-analysis.html#cb112-6" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb112-7"><a href="c05-descriptive-analysis.html#cb112-7" tabindex="-1"></a>)</span>
<span id="cb112-8"><a href="c05-descriptive-analysis.html#cb112-8" tabindex="-1"></a></span>
<span id="cb112-9"><a href="c05-descriptive-analysis.html#cb112-9" tabindex="-1"></a><span class="fu">survey_sd</span>(</span>
<span id="cb112-10"><a href="c05-descriptive-analysis.html#cb112-10" tabindex="-1"></a>  x, </span>
<span id="cb112-11"><a href="c05-descriptive-analysis.html#cb112-11" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span></span>
<span id="cb112-12"><a href="c05-descriptive-analysis.html#cb112-12" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: A variable or expression, or empty</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: Type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var")</code>, defaults to <code>se</code> (standard error) (see Section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.2.1</a> for more information)</li>
<li><code>level</code>: (For vartype = “ci” only) A single number or vector of numbers indicating the confidence level</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-6" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Examples<a href="c05-descriptive-analysis.html#examples-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-variability" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall variability<a href="c05-descriptive-analysis.html#example-1-overall-variability" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Let’s return to electricity bills and explore the variability in electricity expenditure.</p>
<div class="sourceCode" id="cb113"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb113-1"><a href="c05-descriptive-analysis.html#cb113-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb113-2"><a href="c05-descriptive-analysis.html#cb113-2" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb113-3"><a href="c05-descriptive-analysis.html#cb113-3" tabindex="-1"></a>    <span class="at">var_elbill =</span> <span class="fu">survey_var</span>(DOLLAREL),</span>
<span id="cb113-4"><a href="c05-descriptive-analysis.html#cb113-4" tabindex="-1"></a>    <span class="at">sd_elbill =</span> <span class="fu">survey_sd</span>(DOLLAREL)</span>
<span id="cb113-5"><a href="c05-descriptive-analysis.html#cb113-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   var_elbill var_elbill_se sd_elbill
##        &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
## 1    704906.        13926.      840.</code></pre>
<p>We may encounter a warning related to deprecated underlying calculations performed by the <code>survey_var()</code> function. This warning is a result of changes in the way R handles recycling in vectorized operations. The results are still valid. They give an estimate of the population variance of electricity bills (<code>var_elbill</code>), the standard error of that variance (<code>var_elbill_se</code>), and the estimated population standard deviation of electricity bills (<code>sd_elbill</code>). Note that no standard error is associated with the standard deviation; this is the only estimate that does not include a standard error.</p>
</div>
<div id="example-2-variability-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Variability by subgroup<a href="c05-descriptive-analysis.html#example-2-variability-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To find out if the variability in electricity expenditure is similar across regions, we can calculate the variance by region using <code>group_by()</code>:</p>
<div class="sourceCode" id="cb115"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb115-1"><a href="c05-descriptive-analysis.html#cb115-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb115-2"><a href="c05-descriptive-analysis.html#cb115-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb115-3"><a href="c05-descriptive-analysis.html#cb115-3" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb115-4"><a href="c05-descriptive-analysis.html#cb115-4" tabindex="-1"></a>    <span class="at">var_elbill =</span> <span class="fu">survey_var</span>(DOLLAREL),</span>
<span id="cb115-5"><a href="c05-descriptive-analysis.html#cb115-5" tabindex="-1"></a>    <span class="at">sd_elbill =</span> <span class="fu">survey_sd</span>(DOLLAREL)</span>
<span id="cb115-6"><a href="c05-descriptive-analysis.html#cb115-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   Region    var_elbill var_elbill_se sd_elbill
##   &lt;fct&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
## 1 Northeast    775450.        38843.      881.
## 2 Midwest      552423.        25252.      743.
## 3 South        702521.        30641.      838.
## 4 West         717886.        30597.      847.</code></pre>
<p> </p>
</div>
</div>
</div>
<div id="additional-topics" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Additional topics<a href="c05-descriptive-analysis.html#additional-topics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="unweighted-analysis" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> Unweighted analysis <a href="c05-descriptive-analysis.html#unweighted-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, it is helpful to calculate an unweighted estimate of a given variable. For this, we use the <code>unweighted()</code> function in the <code>summarize()</code> function. The <code>unweighted()</code> function calculates unweighted summaries from a <code>tbl_svy</code> object, providing the summary among the respondents without extrapolating to a population estimate. The <code>unweighted()</code> function can be used in conjunction with any {dplyr} functions. Here is an example looking at the average household electricity cost: </p>
<div class="sourceCode" id="cb117"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb117-1"><a href="c05-descriptive-analysis.html#cb117-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb117-2"><a href="c05-descriptive-analysis.html#cb117-2" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb117-3"><a href="c05-descriptive-analysis.html#cb117-3" tabindex="-1"></a>    <span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb117-4"><a href="c05-descriptive-analysis.html#cb117-4" tabindex="-1"></a>    <span class="at">elec_unweight =</span> <span class="fu">unweighted</span>(<span class="fu">mean</span>(DOLLAREL))</span>
<span id="cb117-5"><a href="c05-descriptive-analysis.html#cb117-5" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   elec_bill elec_bill_se elec_unweight
##       &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
## 1     1380.         5.38         1425.</code></pre>
<p></p>
<p>It is estimated that American residential households spent an average of $1,380 on electricity in 2020, and the estimate has a standard error of $5.38. The <code>unweighted()</code> function calculates the unweighted average and represents the average amount of money spent on electricity in 2020 by the respondents, which was $1,425. </p>
</div>
<div id="subpopulation-analysis" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> Subpopulation analysis <a href="c05-descriptive-analysis.html#subpopulation-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>
We mentioned using <code>filter()</code> to subset a survey object for analysis. This operation should be done after creating the survey design object. Subsetting data before creating the object can lead to incorrect variability estimates, if subsetting removes an entire Primary Sampling Unit (PSU; see Chapter <a href="c10-sample-designs-replicate-weights.html#c10-sample-designs-replicate-weights">10</a> for more information on PSUs and sample designs). </p>
<p>Suppose we want estimates of the average amount spent on natural gas among housing units using natural gas (based on the variable <code>BTUNG</code>)<a href="#fn9" class="footnote-ref" id="fnref9"><sup>9</sup></a>. We first filter records to only include records where <code>BTUNG &gt; 0</code> and then find the average amount spent.</p>
<div class="sourceCode" id="cb119"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb119-1"><a href="c05-descriptive-analysis.html#cb119-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb119-2"><a href="c05-descriptive-analysis.html#cb119-2" tabindex="-1"></a>  <span class="fu">filter</span>(BTUNG <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb119-3"><a href="c05-descriptive-analysis.html#cb119-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">NG_mean =</span> <span class="fu">survey_mean</span>(DOLLARNG,</span>
<span id="cb119-4"><a href="c05-descriptive-analysis.html#cb119-4" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)</span>
<span id="cb119-5"><a href="c05-descriptive-analysis.html#cb119-5" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   NG_mean NG_mean_se NG_mean_low NG_mean_upp
##     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1    631.       4.64        621.        640.</code></pre>
<p>The estimated average amount spent on natural gas among households that use natural gas is $631. Let’s compare this to the mean when we do not filter.</p>
<div class="sourceCode" id="cb121"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb121-1"><a href="c05-descriptive-analysis.html#cb121-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb121-2"><a href="c05-descriptive-analysis.html#cb121-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">NG_mean =</span> <span class="fu">survey_mean</span>(DOLLARNG,</span>
<span id="cb121-3"><a href="c05-descriptive-analysis.html#cb121-3" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)</span>
<span id="cb121-4"><a href="c05-descriptive-analysis.html#cb121-4" tabindex="-1"></a>  ))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   NG_mean NG_mean_se NG_mean_low NG_mean_upp
##     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1    382.       3.41        375.        389.</code></pre>
<p>Based on this calculation, the estimated average amount spent on natural gas is $382. Note that applying the filter to include only housing units that use natural gas yields a higher mean than when not applying the filter. This is because including housing units that do not use natural gas introduces many $0 amounts, impacting the mean calculation.</p>
</div>
<div id="desc-deff" class="section level3 hasAnchor" number="5.9.3">
<h3><span class="header-section-number">5.9.3</span> Design effects<a href="c05-descriptive-analysis.html#desc-deff" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The design effect measures how the precision of an estimate is influenced by the sampling design. In other words, it measures how much more or less statistically efficient the survey design is compared to a simple random sample (SRS). It is computed by taking the ratio of the estimate’s variance under the design at hand to the estimate’s variance under a simple random sample without replacement. A design effect less than 1 indicates that the design is more statistically efficient than an SRS design, which is rare but possible in a stratified sampling design where the outcome correlates with the stratification variable(s). A design effect greater than 1 indicates that the design is less statistically efficient than an SRS design. From a design effect, we can calculate the effective sample size as follows:</p>
<p><span class="math display">\[n_{eff}=\frac{n}{D_{eff}} \]</span></p>
<p>where <span class="math inline">\(n\)</span> is the nominal sample size (the number of survey responses) and <span class="math inline">\(D_{eff}\)</span> is the estimated design effect. We can interpret the effective sample size <span class="math inline">\(n_{eff}\)</span> as the hypothetical sample size that a survey using an SRS design would need to achieve the same precision as the design at hand. Design effects specific to each outcome — outcomes that are less clustered in the population have smaller design effects than outcomes that are clustered.</p>
<p>In the {srvyr} package, design effects can be calculated for totals, proportions, means, and ratio estimates by setting the <code>deff</code> argument to <code>TRUE</code> in the corresponding functions. In the example below, we calculate the design effects for the average consumption of electricity (<code>BTUEL</code>), natural gas (<code>BTUNG</code>), liquid propane (<code>BTULP</code>), fuel oil (<code>BTUFO</code>), and wood (<code>BTUWOOD</code>) by setting <code>deff = TRUE</code>:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="c05-descriptive-analysis.html#cb123-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb123-2"><a href="c05-descriptive-analysis.html#cb123-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(</span>
<span id="cb123-3"><a href="c05-descriptive-analysis.html#cb123-3" tabindex="-1"></a>    <span class="fu">c</span>(BTUEL, BTUNG, BTULP, BTUFO, BTUWOOD),</span>
<span id="cb123-4"><a href="c05-descriptive-analysis.html#cb123-4" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">survey_mean</span>(.x, <span class="at">deff =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="cn">NULL</span>)</span>
<span id="cb123-5"><a href="c05-descriptive-analysis.html#cb123-5" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb123-6"><a href="c05-descriptive-analysis.html#cb123-6" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;deff&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   BTUEL_deff BTUNG_deff BTULP_deff BTUFO_deff BTUWOOD_deff
##        &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
## 1      0.597      0.938       1.21      0.720         1.10</code></pre>
<p>For the values less than 1 (<code>BTUEL_deff</code> and <code>BTUFO_deff</code>), the results suggest that the survey design is more efficient than a simple random sample. For the values greater than 1 (<code>BTUNG_deff</code>, <code>BTULP_deff</code>, and <code>BTUWOOD_deff</code>), the results indicate that the survey design is less efficient than a simple random sample.</p>
<p></p>
</div>
<div id="creating-summary-rows" class="section level3 hasAnchor" number="5.9.4">
<h3><span class="header-section-number">5.9.4</span> Creating summary rows<a href="c05-descriptive-analysis.html#creating-summary-rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p> </p>
<p>When using <code>group_by()</code> in analysis, the results are returned with a row for each group or combination of groups. Often, we want both breakdowns by group and a summary row for the estimate representing the entire population. For example, we may want the average electricity consumption by region and nationally. The {srvyr} package has the convenient <code>cascade()</code> function, which adds summary rows for the total of a group. It is used instead of <code>summarize()</code> and has similar functionalities along with some additional features.</p>
<div id="syntax-5" class="section level4 unnumbered hasAnchor">
<h4>Syntax<a href="c05-descriptive-analysis.html#syntax-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The syntax is as follows:</p>
<pre><code>cascade(
  .data, 
  ..., 
  .fill = NA, 
  .fill_level_top = FALSE, 
  .groupings = NULL
)</code></pre>
<p>where the arguments are:</p>
<ul>
<li><code>.data</code>: A <code>tbl_svy</code> object</li>
<li><code>...</code>: Name-value pairs of summary functions (same as the <code>summarize()</code> function)</li>
<li><code>.fill</code>: Value to fill in for group summaries (defaults to <code>NA</code>)</li>
<li><code>.fill_level_top</code>: When filling factor variables, whether to put the value ‘.fill’ in the first position (defaults to FALSE, placing it in the bottom)</li>
</ul>
</div>
<div id="example" class="section level4 unnumbered hasAnchor">
<h4>Example<a href="c05-descriptive-analysis.html#example" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, let’s look at an example where we calculate the average household electricity cost. Then, we build on it to examine the features of the <code>cascade()</code> function. In the first example below, we calculate the average household energy cost <code>DOLLAREL_mn</code> using <code>survey_mean()</code> without modifying any of the argument defaults in the function: </p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="c05-descriptive-analysis.html#cb126-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="c05-descriptive-analysis.html#cb126-2" tabindex="-1"></a>  <span class="fu">cascade</span>(<span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   DOLLAREL_mn DOLLAREL_mn_se
##         &lt;dbl&gt;          &lt;dbl&gt;
## 1       1380.           5.38</code></pre>
<p>Next, let’s group the results by region by adding <code>group_by()</code> before the <code>cascade()</code> function:</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="c05-descriptive-analysis.html#cb128-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb128-2"><a href="c05-descriptive-analysis.html#cb128-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb128-3"><a href="c05-descriptive-analysis.html#cb128-3" tabindex="-1"></a>  <span class="fu">cascade</span>(<span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast       1343.          14.6 
## 2 Midwest         1293.          11.7 
## 3 South           1548.          10.3 
## 4 West            1211.          12.0 
## 5 &lt;NA&gt;            1380.           5.38</code></pre>
<p>We can see the estimated average electricity bills by region: $1,343 for the Northeast, $1,548 for the South, and so on. The last row, where <code>Region = NA</code>, is the national average electricity bill, $1,380. However, naming the national “region” as <code>NA</code> is not very informative. We can give it a better name using the <code>.fill</code> argument.</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="c05-descriptive-analysis.html#cb130-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="c05-descriptive-analysis.html#cb130-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb130-3"><a href="c05-descriptive-analysis.html#cb130-3" tabindex="-1"></a>  <span class="fu">cascade</span>(</span>
<span id="cb130-4"><a href="c05-descriptive-analysis.html#cb130-4" tabindex="-1"></a>    <span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb130-5"><a href="c05-descriptive-analysis.html#cb130-5" tabindex="-1"></a>    <span class="at">.fill =</span> <span class="st">&quot;National&quot;</span></span>
<span id="cb130-6"><a href="c05-descriptive-analysis.html#cb130-6" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast       1343.          14.6 
## 2 Midwest         1293.          11.7 
## 3 South           1548.          10.3 
## 4 West            1211.          12.0 
## 5 National        1380.           5.38</code></pre>
<p>We can move the summary row to the first row by adding <code>.fill_level_top = TRUE</code> to <code>cascade()</code>:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="c05-descriptive-analysis.html#cb132-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="c05-descriptive-analysis.html#cb132-2" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="c05-descriptive-analysis.html#cb132-3" tabindex="-1"></a>  <span class="fu">cascade</span>(</span>
<span id="cb132-4"><a href="c05-descriptive-analysis.html#cb132-4" tabindex="-1"></a>    <span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb132-5"><a href="c05-descriptive-analysis.html#cb132-5" tabindex="-1"></a>    <span class="at">.fill =</span> <span class="st">&quot;National&quot;</span>,</span>
<span id="cb132-6"><a href="c05-descriptive-analysis.html#cb132-6" tabindex="-1"></a>    <span class="at">.fill_level_top =</span> <span class="cn">TRUE</span></span>
<span id="cb132-7"><a href="c05-descriptive-analysis.html#cb132-7" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 National        1380.           5.38
## 2 Northeast       1343.          14.6 
## 3 Midwest         1293.          11.7 
## 4 South           1548.          10.3 
## 5 West            1211.          12.0</code></pre>
<p>While the results remain the same, the table is now easier to interpret. </p>
</div>
</div>
<div id="calculating-estimates-for-many-outcomes" class="section level3 hasAnchor" number="5.9.5">
<h3><span class="header-section-number">5.9.5</span> Calculating estimates for many outcomes<a href="c05-descriptive-analysis.html#calculating-estimates-for-many-outcomes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often, we are interested in a summary statistic across many variables. Useful tools include the <code>across()</code> function in {dplyr}, shown a few times above, and the <code>map()</code> function in {purrr}.</p>
<p>The <code>across()</code> function applies the same function to multiple columns within <code>summarize()</code>. This works well with all functions shown above, except for <code>survey_prop()</code>. In a later example, we tackle summarizing multiple proportions.</p>
<div id="example-1-across" class="section level4 unnumbered hasAnchor">
<h4>Example 1: <code>across()</code><a href="c05-descriptive-analysis.html#example-1-across" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose we want to calculate the total and average consumption, along with coefficients of variation (CV), for each fuel type. These include the reported consumption of electricity (<code>BTUEL</code>), natural gas (<code>BTUNG</code>), liquid propane (<code>BTULP</code>), fuel oil (<code>BTUFO</code>), and wood (<code>BTUWOOD</code>), as mentioned in the section on design effects. We can take advantage of the fact that these are the only variables that start with “BTU” by selecting them with <code>starts_with("BTU")</code> in the <code>across()</code> function. For each selected column (<code>.x</code>), <code>across()</code> creates a list of two functions to be applied: <code>survey_total()</code> to calculate the total and <code>survey_mean()</code> to calculate the mean, along with their CV (<code>vartype = "cv"</code>). Finally, <code>.unpack = "{outer}.{inner}"</code> specifies that the resulting column names are a concatenation of the variable name, followed by Total or Mean, and then “coef” or “cv.”</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="c05-descriptive-analysis.html#cb134-1" tabindex="-1"></a>consumption_ests <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb134-2"><a href="c05-descriptive-analysis.html#cb134-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(</span>
<span id="cb134-3"><a href="c05-descriptive-analysis.html#cb134-3" tabindex="-1"></a>    <span class="fu">starts_with</span>(<span class="st">&quot;BTU&quot;</span>),</span>
<span id="cb134-4"><a href="c05-descriptive-analysis.html#cb134-4" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb134-5"><a href="c05-descriptive-analysis.html#cb134-5" tabindex="-1"></a>      <span class="at">Total =</span> <span class="sc">~</span> <span class="fu">survey_total</span>(.x, <span class="at">vartype =</span> <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb134-6"><a href="c05-descriptive-analysis.html#cb134-6" tabindex="-1"></a>      <span class="at">Mean =</span> <span class="sc">~</span> <span class="fu">survey_mean</span>(.x, <span class="at">vartype =</span> <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb134-7"><a href="c05-descriptive-analysis.html#cb134-7" tabindex="-1"></a>    ),</span>
<span id="cb134-8"><a href="c05-descriptive-analysis.html#cb134-8" tabindex="-1"></a>    <span class="at">.unpack =</span> <span class="st">&quot;{outer}.{inner}&quot;</span></span>
<span id="cb134-9"><a href="c05-descriptive-analysis.html#cb134-9" tabindex="-1"></a>  ))</span>
<span id="cb134-10"><a href="c05-descriptive-analysis.html#cb134-10" tabindex="-1"></a></span>
<span id="cb134-11"><a href="c05-descriptive-analysis.html#cb134-11" tabindex="-1"></a>consumption_ests</span></code></pre></div>
<pre><code>## # A tibble: 1 × 20
##   BTUEL_Total.coef BTUEL_Total._cv BTUEL_Mean.coef BTUEL_Mean._cv
##              &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1    4453284510065         0.00377          36051.        0.00377
## # ℹ 16 more variables: BTUNG_Total.coef &lt;dbl&gt;, BTUNG_Total._cv &lt;dbl&gt;,
## #   BTUNG_Mean.coef &lt;dbl&gt;, BTUNG_Mean._cv &lt;dbl&gt;,
## #   BTULP_Total.coef &lt;dbl&gt;, BTULP_Total._cv &lt;dbl&gt;,
## #   BTULP_Mean.coef &lt;dbl&gt;, BTULP_Mean._cv &lt;dbl&gt;,
## #   BTUFO_Total.coef &lt;dbl&gt;, BTUFO_Total._cv &lt;dbl&gt;,
## #   BTUFO_Mean.coef &lt;dbl&gt;, BTUFO_Mean._cv &lt;dbl&gt;,
## #   BTUWOOD_Total.coef &lt;dbl&gt;, BTUWOOD_Total._cv &lt;dbl&gt;, …</code></pre>
<p></p>
<p>The estimated total consumption of electricity (<code>BTUEL</code>) is 4,453,284,510,065 (<code>BTUEL_Total.coef</code>), the estimated average consumption is 36,051 (<code>BTUEL_Mean.coef</code>), and the CV is 0.0038.</p>
<p>In the example above, the table was quite wide. We may prefer a row for each fuel type. Using the <code>pivot_longer()</code> and <code>pivot_wider()</code> functions from {tidyr} can help us achieve this. First, we use <code>pivot_longer()</code> to make each variable a column, changing the data to a “long” format. We use the <code>names_to</code> argument to specify new column names: <code>FuelType</code>, <code>Stat</code>, and <code>Type</code>. Then, the <code>names_pattern</code> argument extracts the names in the original column names based on the regular expression pattern <code>BTU(.*)_(.*)\\.(.*)</code>. They are saved in the column names defined in <code>names_to</code>.</p>
<div class="sourceCode" id="cb136"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb136-1"><a href="c05-descriptive-analysis.html#cb136-1" tabindex="-1"></a>consumption_ests_long <span class="ot">&lt;-</span> consumption_ests <span class="sc">%&gt;%</span></span>
<span id="cb136-2"><a href="c05-descriptive-analysis.html#cb136-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb136-3"><a href="c05-descriptive-analysis.html#cb136-3" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb136-4"><a href="c05-descriptive-analysis.html#cb136-4" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;FuelType&quot;</span>, <span class="st">&quot;Stat&quot;</span>, <span class="st">&quot;Type&quot;</span>),</span>
<span id="cb136-5"><a href="c05-descriptive-analysis.html#cb136-5" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">&quot;BTU(.*)_(.*)</span><span class="sc">\\</span><span class="st">.(.*)&quot;</span></span>
<span id="cb136-6"><a href="c05-descriptive-analysis.html#cb136-6" tabindex="-1"></a>  )</span>
<span id="cb136-7"><a href="c05-descriptive-analysis.html#cb136-7" tabindex="-1"></a></span>
<span id="cb136-8"><a href="c05-descriptive-analysis.html#cb136-8" tabindex="-1"></a>consumption_ests_long</span></code></pre></div>
<pre><code>## # A tibble: 20 × 4
##    FuelType Stat  Type                value
##    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;               &lt;dbl&gt;
##  1 EL       Total coef  4453284510065      
##  2 EL       Total _cv               0.00377
##  3 EL       Mean  coef          36051.     
##  4 EL       Mean  _cv               0.00377
##  5 NG       Total coef  4240769382106.     
##  6 NG       Total _cv               0.00908
##  7 NG       Mean  coef          34330.     
##  8 NG       Mean  _cv               0.00908
##  9 LP       Total coef   391425311586.     
## 10 LP       Total _cv               0.0380 
## 11 LP       Mean  coef           3169.     
## 12 LP       Mean  _cv               0.0380 
## 13 FO       Total coef   395699976655.     
## 14 FO       Total _cv               0.0343 
## 15 FO       Mean  coef           3203.     
## 16 FO       Mean  _cv               0.0343 
## 17 WOOD     Total coef   345091088404.     
## 18 WOOD     Total _cv               0.0454 
## 19 WOOD     Mean  coef           2794.     
## 20 WOOD     Mean  _cv               0.0454</code></pre>
<p>Then, we use <code>pivot_wider()</code> to create a table that is nearly ready for publication. Within the function, we can make the names for each element more descriptive and informative by gluing the <code>Stat</code> and <code>Type</code> together with <code>names_glue</code>. Further details on creating publication-ready tables are covered in Chapter <a href="c08-communicating-results.html#c08-communicating-results">8</a>.</p>
<div class="sourceCode" id="cb138"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb138-1"><a href="c05-descriptive-analysis.html#cb138-1" tabindex="-1"></a>consumption_ests_long <span class="sc">%&gt;%</span></span>
<span id="cb138-2"><a href="c05-descriptive-analysis.html#cb138-2" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Type =</span> <span class="fu">case_when</span>(</span>
<span id="cb138-3"><a href="c05-descriptive-analysis.html#cb138-3" tabindex="-1"></a>    Type <span class="sc">==</span> <span class="st">&quot;coef&quot;</span> <span class="sc">~</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb138-4"><a href="c05-descriptive-analysis.html#cb138-4" tabindex="-1"></a>    Type <span class="sc">==</span> <span class="st">&quot;_cv&quot;</span> <span class="sc">~</span> <span class="st">&quot; (CV)&quot;</span></span>
<span id="cb138-5"><a href="c05-descriptive-analysis.html#cb138-5" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb138-6"><a href="c05-descriptive-analysis.html#cb138-6" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb138-7"><a href="c05-descriptive-analysis.html#cb138-7" tabindex="-1"></a>    <span class="at">id_cols =</span> FuelType,</span>
<span id="cb138-8"><a href="c05-descriptive-analysis.html#cb138-8" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="fu">c</span>(Stat, Type),</span>
<span id="cb138-9"><a href="c05-descriptive-analysis.html#cb138-9" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">&quot;{Stat}{Type}&quot;</span>,</span>
<span id="cb138-10"><a href="c05-descriptive-analysis.html#cb138-10" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb138-11"><a href="c05-descriptive-analysis.html#cb138-11" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 5 × 5
##   FuelType          Total `Total (CV)`   Mean `Mean (CV)`
##   &lt;chr&gt;             &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
## 1 EL       4453284510065       0.00377 36051.     0.00377
## 2 NG       4240769382106.      0.00908 34330.     0.00908
## 3 LP        391425311586.      0.0380   3169.     0.0380 
## 4 FO        395699976655.      0.0343   3203.     0.0343 
## 5 WOOD      345091088404.      0.0454   2794.     0.0454</code></pre>
</div>
<div id="example-2-proportions-with-across" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Proportions with <code>across()</code><a href="c05-descriptive-analysis.html#example-2-proportions-with-across" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As mentioned earlier, proportions do not work as well directly with the <code>across()</code> method. If we want the proportion of houses with A/C and the proportion of houses with heating, we require two separate <code>group_by()</code> statements as shown below:</p>
<div class="sourceCode" id="cb140"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb140-1"><a href="c05-descriptive-analysis.html#cb140-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb140-2"><a href="c05-descriptive-analysis.html#cb140-2" tabindex="-1"></a>  <span class="fu">group_by</span>(ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb140-3"><a href="c05-descriptive-analysis.html#cb140-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   ACUsed     p    p_se
##   &lt;lgl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1 FALSE  0.113 0.00306
## 2 TRUE   0.887 0.00306</code></pre>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="c05-descriptive-analysis.html#cb142-1" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb142-2"><a href="c05-descriptive-analysis.html#cb142-2" tabindex="-1"></a>  <span class="fu">group_by</span>(SpaceHeatingUsed) <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="c05-descriptive-analysis.html#cb142-3" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   SpaceHeatingUsed      p    p_se
##   &lt;lgl&gt;             &lt;dbl&gt;   &lt;dbl&gt;
## 1 FALSE            0.0469 0.00207
## 2 TRUE             0.953  0.00207</code></pre>
<p>We estimate 88.7% of households have A/C and 95.3% have heating.</p>
<p>If we are only interested in the <code>TRUE</code> outcomes, that is, the proportion of households that have A/C and the proportion that have heating, we can simplify the code. Applying <code>survey_mean()</code> to a logical variable is the same as using <code>survey_prop()</code>, as shown below:</p>
<div class="sourceCode" id="cb144"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb144-1"><a href="c05-descriptive-analysis.html#cb144-1" tabindex="-1"></a>cool_heat_tab <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb144-2"><a href="c05-descriptive-analysis.html#cb144-2" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">c</span>(ACUsed, SpaceHeatingUsed), <span class="sc">~</span> <span class="fu">survey_mean</span>(.x),</span>
<span id="cb144-3"><a href="c05-descriptive-analysis.html#cb144-3" tabindex="-1"></a>    <span class="at">.unpack =</span> <span class="st">&quot;{outer}.{inner}&quot;</span></span>
<span id="cb144-4"><a href="c05-descriptive-analysis.html#cb144-4" tabindex="-1"></a>  ))</span>
<span id="cb144-5"><a href="c05-descriptive-analysis.html#cb144-5" tabindex="-1"></a></span>
<span id="cb144-6"><a href="c05-descriptive-analysis.html#cb144-6" tabindex="-1"></a>cool_heat_tab</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   ACUsed.coef ACUsed._se SpaceHeatingUsed.coef SpaceHeatingUsed._se
##         &lt;dbl&gt;      &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;
## 1       0.887    0.00306                 0.953              0.00207</code></pre>
<p></p>
<p>Note that the estimates are the same as those obtained using the separate <code>group_by()</code> statements. As before, we can use <code>pivot_longer()</code> to structure the table in a more suitable format for distribution.</p>
<div class="sourceCode" id="cb146"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb146-1"><a href="c05-descriptive-analysis.html#cb146-1" tabindex="-1"></a>cool_heat_tab <span class="sc">%&gt;%</span></span>
<span id="cb146-2"><a href="c05-descriptive-analysis.html#cb146-2" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(),</span>
<span id="cb146-3"><a href="c05-descriptive-analysis.html#cb146-3" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;Comfort&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb146-4"><a href="c05-descriptive-analysis.html#cb146-4" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">&quot;(.*)</span><span class="sc">\\</span><span class="st">.(.*)&quot;</span></span>
<span id="cb146-5"><a href="c05-descriptive-analysis.html#cb146-5" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb146-6"><a href="c05-descriptive-analysis.html#cb146-6" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb146-7"><a href="c05-descriptive-analysis.html#cb146-7" tabindex="-1"></a>    <span class="at">p =</span> coef,</span>
<span id="cb146-8"><a href="c05-descriptive-analysis.html#cb146-8" tabindex="-1"></a>    <span class="at">se =</span> <span class="st">`</span><span class="at">_se</span><span class="st">`</span></span>
<span id="cb146-9"><a href="c05-descriptive-analysis.html#cb146-9" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Comfort              p      se
##   &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;
## 1 ACUsed           0.887 0.00306
## 2 SpaceHeatingUsed 0.953 0.00207</code></pre>
<p></p>
</div>
<div id="example-3-purrrmap" class="section level4 unnumbered hasAnchor">
<h4>Example 3: <code>purrr::map()</code><a href="c05-descriptive-analysis.html#example-3-purrrmap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Loops are a common tool when dealing with repetitive calculations. The {purrr} package provides the <code>map()</code> functions, which, like a loop, allow us to perform the same task across different elements <span class="citation">(<a href="#ref-R-purrr">Wickham and Henry 2023</a>)</span>. In our case, we may want to calculate proportions from the same design multiple times. A straightforward approach is to design the calculation for one variable, build a function based on that, and then apply it iteratively for the rest of the variables.</p>
<p>
Suppose we want to create a table that shows the proportion of people who express trust in their government (<code>TrustGovernment</code>)<a href="#fn10" class="footnote-ref" id="fnref10"><sup>10</sup></a> as well as those that trust in people (<code>TrustPeople</code>)<a href="#fn11" class="footnote-ref" id="fnref11"><sup>11</sup></a> using data from the 2020 ANES.</p>
<p>First, we create a table for a single variable. The table includes the variable name as a column, the response, and the corresponding percentage with its standard error. </p>
<div class="sourceCode" id="cb148"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb148-1"><a href="c05-descriptive-analysis.html#cb148-1" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb148-2"><a href="c05-descriptive-analysis.html#cb148-2" tabindex="-1"></a>  <span class="fu">drop_na</span>(TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb148-3"><a href="c05-descriptive-analysis.html#cb148-3" tabindex="-1"></a>  <span class="fu">group_by</span>(TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb148-4"><a href="c05-descriptive-analysis.html#cb148-4" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>() <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb148-5"><a href="c05-descriptive-analysis.html#cb148-5" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Variable =</span> <span class="st">&quot;TrustGovernment&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb148-6"><a href="c05-descriptive-analysis.html#cb148-6" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Answer =</span> TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb148-7"><a href="c05-descriptive-analysis.html#cb148-7" tabindex="-1"></a>  <span class="fu">select</span>(Variable, <span class="fu">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable        Answer                  p  p_se
##   &lt;chr&gt;           &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustGovernment Always               1.55 0.204
## 2 TrustGovernment Most of the time    13.2  0.553
## 3 TrustGovernment About half the time 30.9  0.829
## 4 TrustGovernment Some of the time    43.4  0.855
## 5 TrustGovernment Never               11.0  0.566</code></pre>
<p>We estimate that 1.55% of people always trust the government, 13.16% trust the government most of the time, and so on.</p>
<p>Now, we want to use the original series of steps as a template to create a general function <code>calcps()</code> that can apply the same steps to other variables. We replace <code>TrustGovernment</code> with an argument for a generic variable, <code>var</code>. Referring to <code>var</code> involves a bit of tidy evaluation, an advanced skill. To learn more, we recommend <span class="citation">Wickham (<a href="#ref-wickham2019advanced">2019</a>)</span>.</p>
<div class="sourceCode" id="cb150"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb150-1"><a href="c05-descriptive-analysis.html#cb150-1" tabindex="-1"></a>calcps <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb150-2"><a href="c05-descriptive-analysis.html#cb150-2" tabindex="-1"></a>  anes_des <span class="sc">%&gt;%</span></span>
<span id="cb150-3"><a href="c05-descriptive-analysis.html#cb150-3" tabindex="-1"></a>    <span class="fu">drop_na</span>(<span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb150-4"><a href="c05-descriptive-analysis.html#cb150-4" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb150-5"><a href="c05-descriptive-analysis.html#cb150-5" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>() <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb150-6"><a href="c05-descriptive-analysis.html#cb150-6" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Variable =</span> var) <span class="sc">%&gt;%</span></span>
<span id="cb150-7"><a href="c05-descriptive-analysis.html#cb150-7" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Answer :=</span> <span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb150-8"><a href="c05-descriptive-analysis.html#cb150-8" tabindex="-1"></a>    <span class="fu">select</span>(Variable, <span class="fu">everything</span>())</span>
<span id="cb150-9"><a href="c05-descriptive-analysis.html#cb150-9" tabindex="-1"></a>}</span></code></pre></div>
<p> </p>
<p>We then apply this function to the two variables of interest, <code>TrustGovernment</code> and <code>TrustPeople</code>:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="c05-descriptive-analysis.html#cb151-1" tabindex="-1"></a><span class="fu">calcps</span>(<span class="st">&quot;TrustGovernment&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable        Answer                  p  p_se
##   &lt;chr&gt;           &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustGovernment Always               1.55 0.204
## 2 TrustGovernment Most of the time    13.2  0.553
## 3 TrustGovernment About half the time 30.9  0.829
## 4 TrustGovernment Some of the time    43.4  0.855
## 5 TrustGovernment Never               11.0  0.566</code></pre>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="c05-descriptive-analysis.html#cb153-1" tabindex="-1"></a><span class="fu">calcps</span>(<span class="st">&quot;TrustPeople&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable    Answer                   p  p_se
##   &lt;chr&gt;       &lt;fct&gt;                &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustPeople Always               0.809 0.164
## 2 TrustPeople Most of the time    41.4   0.857
## 3 TrustPeople About half the time 28.2   0.776
## 4 TrustPeople Some of the time    24.5   0.670
## 5 TrustPeople Never                5.05  0.422</code></pre>
<p>Finally, we use <code>map()</code> to iterate over as many variables as needed. We feed our desired variables into <code>map()</code> along with our custom function, <code>calcps</code>. The output is a tibble with the variable names in the “Variable” column, the responses in the “Answer” column, along with the percentage and standard error. The <code>list_rbind()</code> function combines the rows into a single tibble. This example extends nicely when dealing with numerous variables for which we want percentage estimates.</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="c05-descriptive-analysis.html#cb155-1" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;TrustGovernment&quot;</span>, <span class="st">&quot;TrustPeople&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb155-2"><a href="c05-descriptive-analysis.html#cb155-2" tabindex="-1"></a>  <span class="fu">map</span>(calcps) <span class="sc">%&gt;%</span></span>
<span id="cb155-3"><a href="c05-descriptive-analysis.html#cb155-3" tabindex="-1"></a>  <span class="fu">list_rbind</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##    Variable        Answer                   p  p_se
##    &lt;chr&gt;           &lt;fct&gt;                &lt;dbl&gt; &lt;dbl&gt;
##  1 TrustGovernment Always               1.55  0.204
##  2 TrustGovernment Most of the time    13.2   0.553
##  3 TrustGovernment About half the time 30.9   0.829
##  4 TrustGovernment Some of the time    43.4   0.855
##  5 TrustGovernment Never               11.0   0.566
##  6 TrustPeople     Always               0.809 0.164
##  7 TrustPeople     Most of the time    41.4   0.857
##  8 TrustPeople     About half the time 28.2   0.776
##  9 TrustPeople     Some of the time    24.5   0.670
## 10 TrustPeople     Never                5.05  0.422</code></pre>
<p>In addition to our results above, we can also see the output for <code>TrustPeople</code>. While we estimate that 1.55% of people always trust the government, 0.81% always trust people.
</p>
</div>
</div>
</div>
<div id="exercises" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Exercises<a href="c05-descriptive-analysis.html#exercises" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The exercises use the design objects <code>anes_des</code> and <code>recs_des</code> provided in the Prerequisites box at the beginning of the chapter.</p>
<ol style="list-style-type: decimal">
<li><p>How many females have a graduate degree? Hint: The variables <code>Gender</code> and <code>Education</code> will be useful.</p></li>
<li><p>What percentage of people identify as “Strong Democrat”? Hint: The variable <code>PartyID</code> indicates someone’s party affiliation.</p></li>
<li><p>What percentage of people who voted in the 2020 election identify as “Strong Republican”? Hint: The variable <code>VotedPres2020</code> indicates whether someone voted in 2020.</p></li>
<li><p>What percentage of people voted in both the 2016 election and the 2020 election? Include the logit confidence interval. Hint: The variable <code>VotedPres2016</code> indicates whether someone voted in 2016.</p></li>
<li><p>What is the design effect for the proportion of people who voted early? Hint: The variable <code>EarlyVote2020</code> indicates whether someone voted early in 2020.</p></li>
<li><p>What is the median temperature people set their thermostats to at night during the winter? Hint: The variable <code>WinterTempNight</code> indicates the temperature that people set their thermostat to in the winter at night.</p></li>
<li><p>People sometimes set their temperature differently over different seasons and during the day. What median temperatures do people set their thermostats to in the summer and winter, both during the day and at night? Include confidence intervals. Hint: Use the variables <code>WinterTempDay</code>, <code>WinterTempNight</code>, <code>SummerTempDay</code>, and <code>SummerTempNight</code>.</p></li>
<li><p>What is the correlation between the temperature that people set their temperature at during the night and during the day in the summer?</p></li>
<li><p>What is the 1st, 2nd, and 3rd quartile of money spent on energy by Building America (BA) climate zone? Hint: <code>TOTALDOL</code> indicates the total amount spent on all fuel, and <code>ClimateRegion_BA</code> indicates the BA climate zones.</p></li>
</ol>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-anes-svy" class="csl-entry">
American National Election Studies. 2021. <span>“ANES 2020 Time Series Study: Pre-Election and Post-Election Survey Questionnaires.”</span> <a href="https://electionstudies.org/wp-content/uploads/2021/07/anes_timeseries_2020_questionnaire_20210719.pdf" class="uri">https://electionstudies.org/wp-content/uploads/2021/07/anes_timeseries_2020_questionnaire_20210719.pdf</a>.
</div>
<div id="ref-R-srvyr" class="csl-entry">
Freedman Ellis, Greg, and Ben Schneider. 2024. <em><span class="nocase">srvyr</span>: ’<span class="nocase">dplyr</span>’-Like Syntax for Summary Statistics of Survey Data</em>. <a href="http://gdfe.co/srvyr/">http://gdfe.co/srvyr/</a>.
</div>
<div id="ref-lumley2010complex" class="csl-entry">
Lumley, Thomas. 2010. <em>Complex Surveys: A Guide to Analysis Using <span>R</span></em>. John Wiley &amp; Sons.
</div>
<div id="ref-shahvaish" class="csl-entry">
Shah, Babubhai V, and Akhil K Vaish. 2006. <span>“Confidence Intervals for Quantile Estimation from Complex Survey Data.”</span> In <em>Proceedings of the Section on Survey Research Methods</em>. <a href="http://www.asasrms.org/Proceedings/y2006/Files/JSM2006-000749.pdf" class="uri">http://www.asasrms.org/Proceedings/y2006/Files/JSM2006-000749.pdf</a>.
</div>
<div id="ref-recs-svy" class="csl-entry">
———. 2020. <span>“Residential Energy Consumption Survey (RECS) Form EIA-457A 2020 Household Questionnaire.”</span> <a href="https://www.eia.gov/survey/form/eia_457/archive/2020_RECS-457A.pdf" class="uri">https://www.eia.gov/survey/form/eia_457/archive/2020_RECS-457A.pdf</a>.
</div>
<div id="ref-recs-2020-meth" class="csl-entry">
———. 2023a. <span>“<span class="nocase">2020 Residential Energy Consumption Survey: Consumption and Expenditures Technical Documentation Summary</span>.”</span> <a href="https://www.eia.gov/consumption/residential/data/2020/pdf/2020%20RECS%20CE%20Methodology_Final.pdf" class="uri">https://www.eia.gov/consumption/residential/data/2020/pdf/2020%20RECS%20CE%20Methodology_Final.pdf</a>.
</div>
<div id="ref-wickham2019advanced" class="csl-entry">
———. 2019. <em>Advanced <span>R</span></em>. <a href="https://adv-r.hadley.nz/" class="uri">https://adv-r.hadley.nz/</a>; CRC <span>P</span>ress.
</div>
<div id="ref-R-purrr" class="csl-entry">
Wickham, Hadley, and Lionel Henry. 2023. <em><span class="nocase">purrr</span>: Functional Programming Tools</em>. <a href="https://purrr.tidyverse.org/">https://purrr.tidyverse.org/</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="4">
<li id="fn4"><p>RECS has two components: a household survey and an energy supplier survey. For each household that responds, their energy providers are contacted to obtain their energy consumption and expenditure. This value reflects the dollars spent on electricity in 2020, according to the energy supplier. See <span class="citation">U.S. Energy Information Administration (<a href="#ref-recs-2020-meth">2023a</a>)</span> for more details.<a href="c05-descriptive-analysis.html#fnref4" class="footnote-back">↩︎</a></p></li>
<li id="fn5"><p>Question text: “Is any air conditioning equipment used in your home?” <span class="citation">(<a href="#ref-recs-svy">U.S. Energy Information Administration 2020</a>)</span><a href="c05-descriptive-analysis.html#fnref5" class="footnote-back">↩︎</a></p></li>
<li id="fn6"><p>The value of <code>DOLLARLP</code> reflects the annualized amount spent on liquid propane and <code>BTULP</code> reflects the annualized consumption in Btu of liquid propane <span class="citation">(<a href="#ref-recs-svy">U.S. Energy Information Administration 2020</a>)</span>.<a href="c05-descriptive-analysis.html#fnref6" class="footnote-back">↩︎</a></p></li>
<li id="fn7"><p>Question text: “What is the square footage of your home?” <span class="citation">(<a href="#ref-recs-svy">U.S. Energy Information Administration 2020</a>)</span><a href="c05-descriptive-analysis.html#fnref7" class="footnote-back">↩︎</a></p></li>
<li id="fn8"><p><code>BTUEL</code> is derived from the supplier side component of the survey where <code>BTUEL</code> represents the electricity consumption in British thermal units (Btus) converted from kilowatt hours (kWh) in a year <span class="citation">(<a href="#ref-recs-svy">U.S. Energy Information Administration 2020</a>)</span>.<a href="c05-descriptive-analysis.html#fnref8" class="footnote-back">↩︎</a></p></li>
<li id="fn9"><p><code>BTUNG</code> is derived from the supplier side component of the survey where <code>BTUNG</code> represents the natural gas consumption in British thermal units (Btus) in a year <span class="citation">(<a href="#ref-recs-svy">U.S. Energy Information Administration 2020</a>)</span>.<a href="c05-descriptive-analysis.html#fnref9" class="footnote-back">↩︎</a></p></li>
<li id="fn10"><p>Question text: “How often can you trust the federal government in Washington to do what is right? (Always, most of the time, about half the time, some of the time, or never)” <span class="citation">(<a href="#ref-anes-svy">American National Election Studies 2021</a>)</span><a href="c05-descriptive-analysis.html#fnref10" class="footnote-back">↩︎</a></p></li>
<li id="fn11"><p>Question text: “Generally speaking, how often can you trust other people? (Always, most of the time, about half the time, some of the time, or never)” <span class="citation">(<a href="#ref-anes-svy">American National Election Studies 2021</a>)</span><a href="c05-descriptive-analysis.html#fnref11" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="c04-getting-started.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="c06-statistical-testing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": true,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "github"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": "https://github.com/tidy-survey-r/tidy-survey-book/blob/main/05-descriptive-analysis.Rmd",
"text": null
},
"download": null,
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "section"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
