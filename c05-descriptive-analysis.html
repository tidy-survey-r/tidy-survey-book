<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Descriptive Analyses in {srvyr} | Tidy Survey Book</title>
  <meta name="description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  <meta name="generator" content="bookdown 0.34 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Descriptive Analyses in {srvyr} | Tidy Survey Book" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  <meta name="github-repo" content="tidy-survey-r/tidy-survey-book" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Descriptive Analyses in {srvyr} | Tidy Survey Book" />
  
  <meta name="twitter:description" content="Bookdown for upcoming book on survey analysis the tidy way." />
  

<meta name="author" content="Stephanie Zimmer, Rebecca J. Powell, and Isabella Velásquez" />


<meta name="date" content="2023-08-28" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="c04-understanding-survey-data-documentation.html"/>
<link rel="next" href="c06-statistical-testing.html"/>
<script src="libs/jquery/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook/css/style.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections/anchor-sections.js"></script>


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>
<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="css/style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">A Book Example</a></li>

<li class="divider"></li>
<li class="chapter" data-level="" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i>Preface</a></li>
<li class="chapter" data-level="1" data-path="c01-intro.html"><a href="c01-intro.html"><i class="fa fa-check"></i><b>1</b> Introduction</a>
<ul>
<li class="chapter" data-level="1.1" data-path="c01-intro.html"><a href="c01-intro.html#what-to-expect"><i class="fa fa-check"></i><b>1.1</b> What to expect</a></li>
<li class="chapter" data-level="1.2" data-path="c01-intro.html"><a href="c01-intro.html#book-datasets"><i class="fa fa-check"></i><b>1.2</b> Datasets used in this book</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html"><i class="fa fa-check"></i><b>2</b> Overview of Surveys</a>
<ul>
<li class="chapter" data-level="2.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#introduction"><i class="fa fa-check"></i><b>2.1</b> Introduction</a></li>
<li class="chapter" data-level="2.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#pre-survey-planning"><i class="fa fa-check"></i><b>2.2</b> Pre-Survey Planning</a></li>
<li class="chapter" data-level="2.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design"><i class="fa fa-check"></i><b>2.3</b> Study Design</a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-sampdesign"><i class="fa fa-check"></i><b>2.3.1</b> Sampling Design</a></li>
<li class="chapter" data-level="2.3.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-dcplanning"><i class="fa fa-check"></i><b>2.3.2</b> Data Collection Planning</a></li>
<li class="chapter" data-level="2.3.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-design-questionnaire"><i class="fa fa-check"></i><b>2.3.3</b> Questionnaire Design</a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-datacollection"><i class="fa fa-check"></i><b>2.4</b> Data Collection</a></li>
<li class="chapter" data-level="2.5" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post"><i class="fa fa-check"></i><b>2.5</b> Post-Survey Processing</a>
<ul>
<li class="chapter" data-level="2.5.1" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-cleaning"><i class="fa fa-check"></i><b>2.5.1</b> Data Cleaning and Imputation</a></li>
<li class="chapter" data-level="2.5.2" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-weighting"><i class="fa fa-check"></i><b>2.5.2</b> Weighting</a></li>
<li class="chapter" data-level="2.5.3" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-disclosure"><i class="fa fa-check"></i><b>2.5.3</b> Disclosure</a></li>
<li class="chapter" data-level="2.5.4" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#overview-post-documentation"><i class="fa fa-check"></i><b>2.5.4</b> Documentation</a></li>
</ul></li>
<li class="chapter" data-level="2.6" data-path="c02-overview-surveys.html"><a href="c02-overview-surveys.html#post-survey-data-analysis-and-reporting"><i class="fa fa-check"></i><b>2.6</b> Post-survey data analysis and reporting</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html"><i class="fa fa-check"></i><b>3</b> Specifying sample designs and replicate weights in {srvyr}</a>
<ul>
<li class="chapter" data-level="" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#prereq3"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="3.1" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#introduction-1"><i class="fa fa-check"></i><b>3.1</b> Introduction</a></li>
<li class="chapter" data-level="3.2" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#common-sampling-designs"><i class="fa fa-check"></i><b>3.2</b> Common sampling designs</a>
<ul>
<li class="chapter" data-level="3.2.1" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#simple-random-sample-without-replacement"><i class="fa fa-check"></i><b>3.2.1</b> Simple random sample without replacement</a></li>
<li class="chapter" data-level="3.2.2" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#simple-random-sample-with-replacement"><i class="fa fa-check"></i><b>3.2.2</b> Simple random sample with replacement</a></li>
<li class="chapter" data-level="3.2.3" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#stratified-sampling"><i class="fa fa-check"></i><b>3.2.3</b> Stratified sampling</a></li>
<li class="chapter" data-level="3.2.4" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#samp-cluster"><i class="fa fa-check"></i><b>3.2.4</b> Clustered sampling</a></li>
</ul></li>
<li class="chapter" data-level="3.3" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#replicate-weights"><i class="fa fa-check"></i><b>3.3</b> Replicate weights</a>
<ul>
<li class="chapter" data-level="3.3.1" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#balanced-repeated-replication-brr-method"><i class="fa fa-check"></i><b>3.3.1</b> Balanced Repeated Replication (BRR) Method</a></li>
<li class="chapter" data-level="3.3.2" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#fays-brr-method"><i class="fa fa-check"></i><b>3.3.2</b> Fay’s BRR Method</a></li>
<li class="chapter" data-level="3.3.3" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#jackknife-method"><i class="fa fa-check"></i><b>3.3.3</b> Jackknife method</a></li>
<li class="chapter" data-level="3.3.4" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#bootstrap-method"><i class="fa fa-check"></i><b>3.3.4</b> Bootstrap Method</a></li>
</ul></li>
<li class="chapter" data-level="3.4" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#und-surv-doc"><i class="fa fa-check"></i><b>3.4</b> Understanding survey design documentation</a></li>
<li class="chapter" data-level="3.5" data-path="c03-specifying-sample-designs.html"><a href="c03-specifying-sample-designs.html#exercises"><i class="fa fa-check"></i><b>3.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html"><i class="fa fa-check"></i><b>4</b> Understanding Survey Data Documentation</a>
<ul>
<li class="chapter" data-level="" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#prereq4"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="4.1" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#introduction-2"><i class="fa fa-check"></i><b>4.1</b> Introduction</a></li>
<li class="chapter" data-level="4.2" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#types-of-survey-documentation"><i class="fa fa-check"></i><b>4.2</b> Types of Survey Documentation</a>
<ul>
<li class="chapter" data-level="4.2.1" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#technical-documentation"><i class="fa fa-check"></i><b>4.2.1</b> Technical Documentation</a></li>
<li class="chapter" data-level="4.2.2" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#questionnaires"><i class="fa fa-check"></i><b>4.2.2</b> Questionnaires</a></li>
<li class="chapter" data-level="4.2.3" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#codebooks"><i class="fa fa-check"></i><b>4.2.3</b> Codebooks</a></li>
<li class="chapter" data-level="4.2.4" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#errata"><i class="fa fa-check"></i><b>4.2.4</b> Errata</a></li>
<li class="chapter" data-level="4.2.5" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#additional-resources"><i class="fa fa-check"></i><b>4.2.5</b> Additional Resources</a></li>
</ul></li>
<li class="chapter" data-level="4.3" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#working-with-missing-data"><i class="fa fa-check"></i><b>4.3</b> Working with Missing Data</a>
<ul>
<li class="chapter" data-level="4.3.1" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#accounting-for-questionnaire-skip-patterns"><i class="fa fa-check"></i><b>4.3.1</b> Accounting for Questionnaire Skip Patterns</a></li>
<li class="chapter" data-level="4.3.2" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#accounting-for-unintentional-missing-data"><i class="fa fa-check"></i><b>4.3.2</b> Accounting for Unintentional Missing Data</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#example-american-national-election-studies-anes-2020-survey-documentation"><i class="fa fa-check"></i><b>4.4</b> Example: American National Election Studies (ANES) 2020 Survey Documentation</a></li>
<li class="chapter" data-level="4.5" data-path="c04-understanding-survey-data-documentation.html"><a href="c04-understanding-survey-data-documentation.html#searching-for-public-use-survey-data"><i class="fa fa-check"></i><b>4.5</b> Searching for Public-Use Survey Data</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html"><i class="fa fa-check"></i><b>5</b> Descriptive Analyses in {srvyr}</a>
<ul>
<li class="chapter" data-level="" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#prereq5"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#introduction-4"><i class="fa fa-check"></i><b>5.1</b> Introduction</a></li>
<li class="chapter" data-level="5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#similarities-between-dplyr-and-srvyr-functions"><i class="fa fa-check"></i><b>5.2</b> Similarities Between {dplyr} and {srvyr} Functions</a></li>
<li class="chapter" data-level="5.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#counts-and-cross-tabulations"><i class="fa fa-check"></i><b>5.3</b> Counts and Cross-Tabulations</a>
<ul>
<li class="chapter" data-level="5.3.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-count-syntax"><i class="fa fa-check"></i><b>5.3.1</b> Syntax</a></li>
<li class="chapter" data-level="5.3.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples"><i class="fa fa-check"></i><b>5.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#totals-and-sums"><i class="fa fa-check"></i><b>5.4</b> Totals and Sums</a>
<ul>
<li class="chapter" data-level="5.4.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax"><i class="fa fa-check"></i><b>5.4.1</b> Syntax</a></li>
<li class="chapter" data-level="5.4.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-1"><i class="fa fa-check"></i><b>5.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop"><i class="fa fa-check"></i><b>5.5</b> Means and Proportions</a>
<ul>
<li class="chapter" data-level="5.5.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-meanprop-syntax"><i class="fa fa-check"></i><b>5.5.1</b> Syntax</a></li>
<li class="chapter" data-level="5.5.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-2"><i class="fa fa-check"></i><b>5.5.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.6" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#quantiles-and-medians"><i class="fa fa-check"></i><b>5.6</b> Quantiles and Medians</a>
<ul>
<li class="chapter" data-level="5.6.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-1"><i class="fa fa-check"></i><b>5.6.1</b> Syntax</a></li>
<li class="chapter" data-level="5.6.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-3"><i class="fa fa-check"></i><b>5.6.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.7" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#ratios"><i class="fa fa-check"></i><b>5.7</b> Ratios</a>
<ul>
<li class="chapter" data-level="5.7.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-2"><i class="fa fa-check"></i><b>5.7.1</b> Syntax</a></li>
<li class="chapter" data-level="5.7.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-4"><i class="fa fa-check"></i><b>5.7.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.8" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#correlations"><i class="fa fa-check"></i><b>5.8</b> Correlations</a>
<ul>
<li class="chapter" data-level="5.8.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-3"><i class="fa fa-check"></i><b>5.8.1</b> Syntax</a></li>
<li class="chapter" data-level="5.8.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-5"><i class="fa fa-check"></i><b>5.8.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.9" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#standard-deviation-and-variance"><i class="fa fa-check"></i><b>5.9</b> Standard Deviation and Variance</a>
<ul>
<li class="chapter" data-level="5.9.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#syntax-4"><i class="fa fa-check"></i><b>5.9.1</b> Syntax</a></li>
<li class="chapter" data-level="5.9.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#examples-6"><i class="fa fa-check"></i><b>5.9.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="5.10" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#additional-topics"><i class="fa fa-check"></i><b>5.10</b> Additional Topics</a>
<ul>
<li class="chapter" data-level="5.10.1" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#unweighted-analysis"><i class="fa fa-check"></i><b>5.10.1</b> Unweighted Analysis</a></li>
<li class="chapter" data-level="5.10.2" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#subpopulation-analysis"><i class="fa fa-check"></i><b>5.10.2</b> Subpopulation Analysis</a></li>
<li class="chapter" data-level="5.10.3" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#desc-deff"><i class="fa fa-check"></i><b>5.10.3</b> Design Effects</a></li>
<li class="chapter" data-level="5.10.4" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#creating-summary-rows"><i class="fa fa-check"></i><b>5.10.4</b> Creating Summary Rows</a></li>
<li class="chapter" data-level="5.10.5" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#calculating-estimates-for-many-outcomes"><i class="fa fa-check"></i><b>5.10.5</b> Calculating Estimates for Many Outcomes</a></li>
</ul></li>
<li class="chapter" data-level="5.11" data-path="c05-descriptive-analysis.html"><a href="c05-descriptive-analysis.html#exercises-1"><i class="fa fa-check"></i><b>5.11</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html"><i class="fa fa-check"></i><b>6</b> Statistical testing</a>
<ul>
<li class="chapter" data-level="" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#prereq6"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="6.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#introduction-5"><i class="fa fa-check"></i><b>6.1</b> Introduction</a></li>
<li class="chapter" data-level="6.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#dot-notation"><i class="fa fa-check"></i><b>6.2</b> Dot Notation</a></li>
<li class="chapter" data-level="6.3" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest"><i class="fa fa-check"></i><b>6.3</b> Comparison of Proportions and Means</a>
<ul>
<li class="chapter" data-level="6.3.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-syntax"><i class="fa fa-check"></i><b>6.3.1</b> Syntax</a></li>
<li class="chapter" data-level="6.3.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-ttest-examples"><i class="fa fa-check"></i><b>6.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.4" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi"><i class="fa fa-check"></i><b>6.4</b> Chi-Square Tests</a>
<ul>
<li class="chapter" data-level="6.4.1" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-syntax"><i class="fa fa-check"></i><b>6.4.1</b> Syntax</a></li>
<li class="chapter" data-level="6.4.2" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-chi-examples"><i class="fa fa-check"></i><b>6.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="6.5" data-path="c06-statistical-testing.html"><a href="c06-statistical-testing.html#stattest-exercises"><i class="fa fa-check"></i><b>6.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="7" data-path="c07-modeling.html"><a href="c07-modeling.html"><i class="fa fa-check"></i><b>7</b> Modeling</a>
<ul>
<li class="chapter" data-level="" data-path="c07-modeling.html"><a href="c07-modeling.html#prereq7"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="7.1" data-path="c07-modeling.html"><a href="c07-modeling.html#introduction-6"><i class="fa fa-check"></i><b>7.1</b> Introduction</a></li>
<li class="chapter" data-level="7.2" data-path="c07-modeling.html"><a href="c07-modeling.html#analysis-of-variance-anova"><i class="fa fa-check"></i><b>7.2</b> Analysis of Variance (ANOVA)</a>
<ul>
<li class="chapter" data-level="7.2.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-6"><i class="fa fa-check"></i><b>7.2.1</b> Syntax</a></li>
<li class="chapter" data-level="7.2.2" data-path="c07-modeling.html"><a href="c07-modeling.html#example-10"><i class="fa fa-check"></i><b>7.2.2</b> Example</a></li>
</ul></li>
<li class="chapter" data-level="7.3" data-path="c07-modeling.html"><a href="c07-modeling.html#gaussian-linear-regression"><i class="fa fa-check"></i><b>7.3</b> Gaussian Linear Regression</a>
<ul>
<li class="chapter" data-level="7.3.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-7"><i class="fa fa-check"></i><b>7.3.1</b> Syntax</a></li>
<li class="chapter" data-level="7.3.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-7"><i class="fa fa-check"></i><b>7.3.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.4" data-path="c07-modeling.html"><a href="c07-modeling.html#logistic-regression"><i class="fa fa-check"></i><b>7.4</b> Logistic Regression</a>
<ul>
<li class="chapter" data-level="7.4.1" data-path="c07-modeling.html"><a href="c07-modeling.html#syntax-8"><i class="fa fa-check"></i><b>7.4.1</b> Syntax</a></li>
<li class="chapter" data-level="7.4.2" data-path="c07-modeling.html"><a href="c07-modeling.html#examples-8"><i class="fa fa-check"></i><b>7.4.2</b> Examples</a></li>
</ul></li>
<li class="chapter" data-level="7.5" data-path="c07-modeling.html"><a href="c07-modeling.html#exercises-2"><i class="fa fa-check"></i><b>7.5</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="8" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html"><i class="fa fa-check"></i><b>8</b> Communicating Results</a>
<ul>
<li class="chapter" data-level="" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#prereq8"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="8.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#introduction-7"><i class="fa fa-check"></i><b>8.1</b> Introduction</a></li>
<li class="chapter" data-level="8.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#describing-results-through-text"><i class="fa fa-check"></i><b>8.2</b> Describing Results through Text</a>
<ul>
<li class="chapter" data-level="8.2.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#methodology"><i class="fa fa-check"></i><b>8.2.1</b> Methodology</a></li>
<li class="chapter" data-level="8.2.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#analysis"><i class="fa fa-check"></i><b>8.2.2</b> Analysis</a></li>
<li class="chapter" data-level="8.2.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#results"><i class="fa fa-check"></i><b>8.2.3</b> Results</a></li>
</ul></li>
<li class="chapter" data-level="8.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#visualizing-data"><i class="fa fa-check"></i><b>8.3</b> Visualizing Data</a>
<ul>
<li class="chapter" data-level="8.3.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#tables"><i class="fa fa-check"></i><b>8.3.1</b> Tables</a></li>
<li class="chapter" data-level="8.3.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#charts-and-plots"><i class="fa fa-check"></i><b>8.3.2</b> Charts and Plots</a></li>
</ul></li>
<li class="chapter" data-level="8.4" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#reproducibility"><i class="fa fa-check"></i><b>8.4</b> Reproducibility</a>
<ul>
<li class="chapter" data-level="8.4.1" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#setting-random-number-seeds"><i class="fa fa-check"></i><b>8.4.1</b> Setting Random Number Seeds</a></li>
<li class="chapter" data-level="8.4.2" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#git"><i class="fa fa-check"></i><b>8.4.2</b> Git</a></li>
<li class="chapter" data-level="8.4.3" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#renv"><i class="fa fa-check"></i><b>8.4.3</b> {renv}</a></li>
<li class="chapter" data-level="8.4.4" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#quartor-markdown"><i class="fa fa-check"></i><b>8.4.4</b> Quarto/R Markdown</a></li>
<li class="chapter" data-level="8.4.5" data-path="c08-communicating-results.html"><a href="c08-communicating-results.html#the-targets-package"><i class="fa fa-check"></i><b>8.4.5</b> The {targets} package</a></li>
</ul></li>
</ul></li>
<li class="chapter" data-level="9" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html"><i class="fa fa-check"></i><b>9</b> National Crime Victimization Survey Vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#prereq9"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="9.1" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#introduction-8"><i class="fa fa-check"></i><b>9.1</b> Introduction</a></li>
<li class="chapter" data-level="9.2" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#data-structure"><i class="fa fa-check"></i><b>9.2</b> Data Structure</a></li>
<li class="chapter" data-level="9.3" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#survey-notation"><i class="fa fa-check"></i><b>9.3</b> Survey Notation</a></li>
<li class="chapter" data-level="9.4" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#data-file-preparation"><i class="fa fa-check"></i><b>9.4</b> Data File Preparation</a>
<ul>
<li class="chapter" data-level="9.4.1" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#preparing-files-for-estimation-of-victimization-rates"><i class="fa fa-check"></i><b>9.4.1</b> Preparing Files for Estimation of Victimization Rates</a></li>
<li class="chapter" data-level="9.4.2" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#derived-demographic-variables"><i class="fa fa-check"></i><b>9.4.2</b> Derived Demographic Variables</a></li>
</ul></li>
<li class="chapter" data-level="9.5" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#survey-design-objects"><i class="fa fa-check"></i><b>9.5</b> Survey Design Objects</a></li>
<li class="chapter" data-level="9.6" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#calculating-estimates"><i class="fa fa-check"></i><b>9.6</b> Calculating Estimates</a>
<ul>
<li class="chapter" data-level="9.6.1" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#vic-tot"><i class="fa fa-check"></i><b>9.6.1</b> Estimation 1: Victimization Totals</a></li>
<li class="chapter" data-level="9.6.2" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#vic-prop"><i class="fa fa-check"></i><b>9.6.2</b> Estimation 2: Victimization Proportions</a></li>
<li class="chapter" data-level="9.6.3" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#vic-rate"><i class="fa fa-check"></i><b>9.6.3</b> Estimation 3: Victimization Rates</a></li>
<li class="chapter" data-level="9.6.4" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#prev-rate"><i class="fa fa-check"></i><b>9.6.4</b> Estimation 4: Prevalence Rates</a></li>
</ul></li>
<li class="chapter" data-level="9.7" data-path="c09-ncvs-vignette.html"><a href="c09-ncvs-vignette.html#exercises-3"><i class="fa fa-check"></i><b>9.7</b> Exercises</a></li>
</ul></li>
<li class="chapter" data-level="10" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html"><i class="fa fa-check"></i><b>10</b> AmericasBarometer Vignette</a>
<ul>
<li class="chapter" data-level="" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#prereq10"><i class="fa fa-check"></i>Prerequisites</a></li>
<li class="chapter" data-level="10.1" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#introduction-9"><i class="fa fa-check"></i><b>10.1</b> Introduction</a></li>
<li class="chapter" data-level="10.2" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#data-structure-1"><i class="fa fa-check"></i><b>10.2</b> Data Structure</a></li>
<li class="chapter" data-level="10.3" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#preparing-files"><i class="fa fa-check"></i><b>10.3</b> Preparing files</a></li>
<li class="chapter" data-level="10.4" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#survey-design-objects-1"><i class="fa fa-check"></i><b>10.4</b> Survey design objects</a></li>
<li class="chapter" data-level="10.5" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#ambarom-tables"><i class="fa fa-check"></i><b>10.5</b> Calculating estimates and making tables</a></li>
<li class="chapter" data-level="10.6" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#mapping-survey-data"><i class="fa fa-check"></i><b>10.6</b> Mapping survey data</a></li>
<li class="chapter" data-level="10.7" data-path="c10-ambarom-vignette.html"><a href="c10-ambarom-vignette.html#exercises-4"><i class="fa fa-check"></i><b>10.7</b> Exercises</a></li>
</ul></li>
<li class="appendix"><span><b>Appendix</b></span></li>
<li class="chapter" data-level="" data-path="references.html"><a href="references.html"><i class="fa fa-check"></i>References</a></li>
<li class="divider"></li>
<li><a href="https://bookdown.org" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Tidy Survey Book</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="c05-descriptive-analysis" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Descriptive Analyses in {srvyr}<a href="c05-descriptive-analysis.html#c05-descriptive-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="prereq5" class="section level3 unnumbered hasAnchor prereqbox-header">
<h3>Prerequisites<a href="c05-descriptive-analysis.html#prereq5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div class="prereqbox">
<p>For this chapter, here are the packages and helper functions we will need:</p>
<div class="sourceCode" id="cb98"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb98-1"><a href="c05-descriptive-analysis.html#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb98-2"><a href="c05-descriptive-analysis.html#cb98-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survey)</span>
<span id="cb98-3"><a href="c05-descriptive-analysis.html#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(srvyr)</span>
<span id="cb98-4"><a href="c05-descriptive-analysis.html#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(osfr)</span>
<span id="cb98-5"><a href="c05-descriptive-analysis.html#cb98-5" aria-hidden="true" tabindex="-1"></a><span class="fu">source</span>(<span class="st">&quot;helper-fun/helper-functions.R&quot;</span>)</span>
<span id="cb98-6"><a href="c05-descriptive-analysis.html#cb98-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span></code></pre></div>
<p>To help explain the similarities between {dplyr} functions and {srvyr} functions, this chapter will use the <code>mtcars</code> and <code>iris</code> datasets that are built-in to R and <code>apistrat</code> data that comes in the {survey} package:</p>
<div class="sourceCode" id="cb99"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb99-1"><a href="c05-descriptive-analysis.html#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(api)</span>
<span id="cb99-2"><a href="c05-descriptive-analysis.html#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="c05-descriptive-analysis.html#cb99-3" aria-hidden="true" tabindex="-1"></a>dstrata <span class="ot">&lt;-</span> apistrat <span class="sc">%&gt;%</span></span>
<span id="cb99-4"><a href="c05-descriptive-analysis.html#cb99-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(<span class="at">strata =</span> stype, <span class="at">weights =</span> pw)</span></code></pre></div>
<p>We will be using data from ANES and RECS. Here is the code to create the design objects for each to use throughout this chapter. For ANES, we need to adjust the weight so it sums to the population instead of the sample (see the ANES documentation and Chapter <a href="c04-understanding-survey-data-documentation.html#c04-understanding-survey-data-documentation">4</a> for more information).</p>
<div class="sourceCode" id="cb100"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb100-1"><a href="c05-descriptive-analysis.html#cb100-1" aria-hidden="true" tabindex="-1"></a>anes_in <span class="ot">&lt;-</span> <span class="fu">read_osf</span>(<span class="st">&quot;anes_2020.rds&quot;</span>)</span>
<span id="cb100-2"><a href="c05-descriptive-analysis.html#cb100-2" aria-hidden="true" tabindex="-1"></a>targetpop <span class="ot">&lt;-</span> <span class="dv">231592693</span></span>
<span id="cb100-3"><a href="c05-descriptive-analysis.html#cb100-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-4"><a href="c05-descriptive-analysis.html#cb100-4" aria-hidden="true" tabindex="-1"></a>anes_adjwgt <span class="ot">&lt;-</span> anes_in <span class="sc">%&gt;%</span></span>
<span id="cb100-5"><a href="c05-descriptive-analysis.html#cb100-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Weight =</span> Weight <span class="sc">/</span> <span class="fu">sum</span>(Weight) <span class="sc">*</span> targetpop)</span>
<span id="cb100-6"><a href="c05-descriptive-analysis.html#cb100-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-7"><a href="c05-descriptive-analysis.html#cb100-7" aria-hidden="true" tabindex="-1"></a>anes_des <span class="ot">&lt;-</span> anes_adjwgt <span class="sc">%&gt;%</span></span>
<span id="cb100-8"><a href="c05-descriptive-analysis.html#cb100-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_survey_design</span>(</span>
<span id="cb100-9"><a href="c05-descriptive-analysis.html#cb100-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">weights =</span> Weight,</span>
<span id="cb100-10"><a href="c05-descriptive-analysis.html#cb100-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">strata =</span> Stratum,</span>
<span id="cb100-11"><a href="c05-descriptive-analysis.html#cb100-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">ids =</span> VarUnit,</span>
<span id="cb100-12"><a href="c05-descriptive-analysis.html#cb100-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nest =</span> <span class="cn">TRUE</span></span>
<span id="cb100-13"><a href="c05-descriptive-analysis.html#cb100-13" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>For RECS, details are included in the RECS documentation and Chapter <a href="c03-specifying-sample-designs.html#c03-specifying-sample-designs">3</a>.</p>
<div class="sourceCode" id="cb101"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb101-1"><a href="c05-descriptive-analysis.html#cb101-1" aria-hidden="true" tabindex="-1"></a>recs_in <span class="ot">&lt;-</span> <span class="fu">read_osf</span>(<span class="st">&quot;recs_2015.rds&quot;</span>)</span>
<span id="cb101-2"><a href="c05-descriptive-analysis.html#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="c05-descriptive-analysis.html#cb101-3" aria-hidden="true" tabindex="-1"></a>recs_des <span class="ot">&lt;-</span> recs_in <span class="sc">%&gt;%</span></span>
<span id="cb101-4"><a href="c05-descriptive-analysis.html#cb101-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">as_survey_rep</span>(</span>
<span id="cb101-5"><a href="c05-descriptive-analysis.html#cb101-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">weights =</span> NWEIGHT,</span>
<span id="cb101-6"><a href="c05-descriptive-analysis.html#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">repweights =</span> <span class="fu">starts_with</span>(<span class="st">&quot;BRRWT&quot;</span>),</span>
<span id="cb101-7"><a href="c05-descriptive-analysis.html#cb101-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">type =</span> <span class="st">&quot;Fay&quot;</span>,</span>
<span id="cb101-8"><a href="c05-descriptive-analysis.html#cb101-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">rho =</span> <span class="fl">0.5</span>,</span>
<span id="cb101-9"><a href="c05-descriptive-analysis.html#cb101-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">mse =</span> <span class="cn">TRUE</span></span>
<span id="cb101-10"><a href="c05-descriptive-analysis.html#cb101-10" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
</div>
<div id="introduction-4" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> Introduction<a href="c05-descriptive-analysis.html#introduction-4" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Descriptive analyses, such as basic counts, cross-tabulations, or means, are one of the first steps a researcher takes before conducting statistical tests or developing models. Reviewing findings from descriptive analyses can help researchers glean insight into the data, the underlying population, and any unique aspects of the data or population. For example, if the data shows a proportion of males of only 10% in the data, this could indicate either a unique population or a potential error in the data. Additionally, researchers can use descriptive analyses to provide means, proportions, or other measures to summarize the data and make estimates about the population.</p>
<p>We will discuss many different types of descriptive analyses in this chapter, but it is important to know what type of data we have and what statistics to use for that type of data. In survey data, we typically consider data to be one of these four main data types:</p>
<ul>
<li>Categorical/nominal data: variables with levels or descriptions that cannot be ordered, such as the region of the country (North, South, East, and West)</li>
<li>Ordinal data: variables that can be ordered, such as those from a Likert scale (strongly disagree, disagree, agree, and strongly agree)</li>
<li>Discrete data: variables that are counted or measured, such as number of children</li>
<li>Continuous data, variables that are measured and whose values can lie anywhere on an interval, such as weight</li>
</ul>
<p>When we pull the data from surveys into R, the data will be listed as character, factor, numeric, or logical/Boolean. They will not clearly indicate the type of survey data (e.g., ordinal). When working with survey data, researchers need to properly use the questionnaire and codebook along with the data (see Chapter <a href="c04-understanding-survey-data-documentation.html#c04-understanding-survey-data-documentation">4</a>) to understand what the values for each variable represent. For example, our survey data may represent categorical variables (e.g., the North, South, East, and West regions of the United States) using numeric codes (e.g., 1, 2, 3, and 4). Though this is a categorical variable from the survey, this variable might be automatically read as numeric values when we import our data into R. This can lead to the common mistake of applying a mean function to categorical values instead of a proportion function. Choosing appropriate measures is crucial to reach valid conclusions. Different variable types have distinct properties and levels of measurement, and we cannot apply all measures to all variables.</p>
<p>This chapter will discuss how to analyze <em>measures of distribution</em> (e.g., cross-tabulations), <em>central tendency</em> (e.g., means), <em>relationship</em> (e.g., ratios), and <em>dispersion</em> (e.g., standard). Measures of distribution describe how often an event or response occurs. These measures include counts and totals. Measures of central tendency find the central (or average) responses. These measures include means and medians. Measures of relationship describe how variables relate to each other. These measures include correlations and ratios. Measures of dispersion describe how data spreads around the central tendency for continuous variables. These measures include standard deviations and variances. Specifically, we will cover the following functions from the {srvyr} package:</p>
<ul>
<li>Count of observations (<code>survey_count()</code> and <code>survey_tally()</code>)</li>
<li>Summation of variables (<code>survey_total()</code>)</li>
<li>Means and proportions (<code>survey_mean()</code> and <code>survey_prop()</code>)</li>
<li>Quantiles and medians (<code>survey_quantile()</code> and <code>survey_median()</code>)</li>
<li>Correlations (<code>survey_corr()</code>)</li>
<li>Ratios (<code>survey_ratio()</code>)</li>
<li>Variances and standard deviations (<code>survey_var()</code> and <code>survey_sd()</code>)</li>
</ul>
<p>To incorporate each of these survey functions, recall the general process for survey estimation from Chapter <a href="c03-specifying-sample-designs.html#c03-specifying-sample-designs">3</a>:</p>
<ol style="list-style-type: decimal">
<li>Create a <code>tbl_svy</code> object using <code>srvyr::as_survey_design()</code> or <code>srvyr::as_survey_rep()</code>.</li>
<li>Subset the data for subpopulations using <code>srvyr::filter()</code>, if needed.</li>
<li>Specify domains of analysis using <code>srvyr::group_by()</code>, if needed.</li>
<li>Analyze the data with survey-specific functions.</li>
</ol>
<p>We have already discussed how to create the survey design objects in Chapter <a href="c03-specifying-sample-designs.html#c03-specifying-sample-designs">3</a>, and the code for creating these for the two datasets used in this chapter is provided in the Prerequisites box at the beginning of this chapter. We will apply the survey functions covered in this chapter in Step 4. To look at the data by different subgroups, we can choose to filter and/or group the data. It is very important that we filter and group the data only <em>after</em> creating the design object. This is necessary to ensure that the results accurately account for the survey design. Removing any data before creating the survey design object means that the data for those cases is not included in the survey design information and estimations of the variance.</p>
</div>
<div id="similarities-between-dplyr-and-srvyr-functions" class="section level2 hasAnchor" number="5.2">
<h2><span class="header-section-number">5.2</span> Similarities Between {dplyr} and {srvyr} Functions<a href="c05-descriptive-analysis.html#similarities-between-dplyr-and-srvyr-functions" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>One of the major advantages of using {srvyr} is that it applies {dplyr}-like syntax to the {survey} package. We can use pipes to specify a tbl_svy object, apply a function, and then feed that output into the next function’s first argument. Functions follow the ‘tidy’ convention of snake_case function names. The example below calculates the mean and median for the variable <code>mpg</code> (miles per gallon) in the <code>mtcars</code> dataset.</p>
<div class="sourceCode" id="cb102"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb102-1"><a href="c05-descriptive-analysis.html#cb102-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb102-2"><a href="c05-descriptive-analysis.html#cb102-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mpg_mean =</span> <span class="fu">mean</span>(mpg),</span>
<span id="cb102-3"><a href="c05-descriptive-analysis.html#cb102-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">mpg_median =</span> <span class="fu">median</span>(mpg))</span></code></pre></div>
<pre><code>##   mpg_mean mpg_median
## 1    20.09       19.2</code></pre>
<p>Similarly, in the next example, the variance and standard deviation of the variable <code>api00</code> are calculated for the tbl_svy object <code>dstrata</code>. Note the similarity in the syntax. When we dig into the functions later, we will show that the results output are similar in that one row is output for each group (if there are groups), but there will be more columns output. Specifically, by default, the standard error of the statistic is calculated in addition to the statistic.</p>
<div class="sourceCode" id="cb104"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb104-1"><a href="c05-descriptive-analysis.html#cb104-1" aria-hidden="true" tabindex="-1"></a>dstrata <span class="sc">%&gt;%</span></span>
<span id="cb104-2"><a href="c05-descriptive-analysis.html#cb104-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">api00_mean =</span> <span class="fu">survey_mean</span>(api00),</span>
<span id="cb104-3"><a href="c05-descriptive-analysis.html#cb104-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">api00_med =</span> <span class="fu">survey_median</span>(api00))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   api00_mean api00_mean_se api00_med api00_med_se
##        &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;        &lt;dbl&gt;
## 1       662.          9.54       668         13.7</code></pre>
<p>The functions in {srvyr} also play nicely with other tidyverse functions. If we wanted to select columns that have something in common, we use {tidyselect} functions such as <code>starts_with()</code>, <code>num_range()</code>, etc. In the examples below, a combination of <code>across()</code> and <code>starts_with()</code> to calculate the mean of variables starting with “Sepal” in the <code>iris</code> data frame and then starting with <code>api</code> in the <code>dstrata</code> survey object.</p>
<div class="sourceCode" id="cb106"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb106-1"><a href="c05-descriptive-analysis.html#cb106-1" aria-hidden="true" tabindex="-1"></a>iris <span class="sc">%&gt;%</span></span>
<span id="cb106-2"><a href="c05-descriptive-analysis.html#cb106-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;Sepal&quot;</span>), mean))</span></code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width
## 1        5.843       3.057</code></pre>
<div class="sourceCode" id="cb108"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb108-1"><a href="c05-descriptive-analysis.html#cb108-1" aria-hidden="true" tabindex="-1"></a>dstrata <span class="sc">%&gt;%</span></span>
<span id="cb108-2"><a href="c05-descriptive-analysis.html#cb108-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">starts_with</span>(<span class="st">&quot;api&quot;</span>), survey_mean))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   api00 api00_se api99 api99_se api.stu api.stu_se
##   &lt;dbl&gt;    &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;   &lt;dbl&gt;      &lt;dbl&gt;
## 1  662.     9.54  629.     10.1    498.       16.4</code></pre>
<p>We can use {dplyr} verbs such as <code>mutate()</code>, <code>filter()</code>, etc., on our survey object.</p>
<div class="sourceCode" id="cb110"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb110-1"><a href="c05-descriptive-analysis.html#cb110-1" aria-hidden="true" tabindex="-1"></a>dstrata_mod <span class="ot">&lt;-</span> dstrata <span class="sc">%&gt;%</span></span>
<span id="cb110-2"><a href="c05-descriptive-analysis.html#cb110-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">api_diff =</span> api00 <span class="sc">-</span> api99) <span class="sc">%&gt;%</span></span>
<span id="cb110-3"><a href="c05-descriptive-analysis.html#cb110-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(stype <span class="sc">==</span> <span class="st">&quot;E&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb110-4"><a href="c05-descriptive-analysis.html#cb110-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(stype, api99, api00, api_diff, <span class="at">api_students =</span> api.stu)</span>
<span id="cb110-5"><a href="c05-descriptive-analysis.html#cb110-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-6"><a href="c05-descriptive-analysis.html#cb110-6" aria-hidden="true" tabindex="-1"></a>dstrata_mod</span></code></pre></div>
<pre><code>## Stratified Independent Sampling design (with replacement)
## Called via srvyr
## Sampling variables:
##  - ids: `1`
##  - strata: stype
##  - weights: pw
## Data variables: stype (fct), api99 (int), api00 (int), api_diff (int),
##   api_students (int)</code></pre>
<div class="sourceCode" id="cb112"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb112-1"><a href="c05-descriptive-analysis.html#cb112-1" aria-hidden="true" tabindex="-1"></a>dstrata</span></code></pre></div>
<pre><code>## Stratified Independent Sampling design (with replacement)
## Called via srvyr
## Sampling variables:
##  - ids: `1`
##  - strata: stype
##  - weights: pw
## Data variables: cds (chr), stype (fct), name (chr), sname (chr), snum
##   (dbl), dname (chr), dnum (int), cname (chr), cnum (int), flag (int),
##   pcttest (int), api00 (int), api99 (int), target (int), growth (int),
##   sch.wide (fct), comp.imp (fct), both (fct), awards (fct), meals
##   (int), ell (int), yr.rnd (fct), mobility (int), acs.k3 (int), acs.46
##   (int), acs.core (int), pct.resp (int), not.hsg (int), hsg (int),
##   some.col (int), col.grad (int), grad.sch (int), avg.ed (dbl), full
##   (int), emer (int), enroll (int), api.stu (int), pw (dbl), fpc (dbl)</code></pre>
<p>Instead of data frames or tibbles, {srvyr} functions are meant for <code>tbl_svy</code> objects. Attempting to run data manipulation on non-<code>tbl_svy</code> objects will result in an error, as shown in the example below when using the mtcars data frame (which is not <code>tbl_svy</code> object).</p>
<div class="sourceCode" id="cb114"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb114-1"><a href="c05-descriptive-analysis.html#cb114-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb114-2"><a href="c05-descriptive-analysis.html#cb114-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">mpg_mean =</span> <span class="fu">survey_mean</span>(mpg))</span></code></pre></div>
<pre><code>## Error in `summarize()`:
## ℹ In argument: `mpg_mean = survey_mean(mpg)`.
## Caused by error in `cur_svy()`:
## ! Survey context not set</code></pre>
<p>A few functions in {srvyr} parallel functions in {dplyr}, such as <code>srvyr::summarize()</code> and <code>srvyr::group_by()</code>. Unlike {srvyr}-specific verbs, the package recognizes these parallel functions on a non-survey object. It will not error and instead give the equivalent output from {dplyr}:</p>
<div class="sourceCode" id="cb116"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb116-1"><a href="c05-descriptive-analysis.html#cb116-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb116-2"><a href="c05-descriptive-analysis.html#cb116-2" aria-hidden="true" tabindex="-1"></a>  srvyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">mpg_mean =</span> <span class="fu">mean</span>(mpg))</span></code></pre></div>
<pre><code>##   mpg_mean
## 1    20.09</code></pre>
<p>Because this book focuses on survey analysis, most of our pipes will stem from a survey object. We will not include the namespace for each function (e.g., <code>srvyr::summarize()</code>).</p>
<p>Several functions in {srvyr} must be called within <code>srvyr::summarize()</code> with the exception of <code>srvyr::survey_count()</code> and <code>srvyr::survey_tally()</code> much like <code>dplyr::count()</code> and <code>dplyr::tally()</code> are not called within <code>dplyr::summarize()</code>. These verbs can be used in conjunction with <code>group_by()</code> or <code>by/.by</code>, applying the functions on a group-by-group basis to create grouped summaries.</p>
<div class="sourceCode" id="cb118"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb118-1"><a href="c05-descriptive-analysis.html#cb118-1" aria-hidden="true" tabindex="-1"></a>mtcars <span class="sc">%&gt;%</span></span>
<span id="cb118-2"><a href="c05-descriptive-analysis.html#cb118-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(cyl) <span class="sc">%&gt;%</span></span>
<span id="cb118-3"><a href="c05-descriptive-analysis.html#cb118-3" aria-hidden="true" tabindex="-1"></a>  dplyr<span class="sc">::</span><span class="fu">summarize</span>(<span class="at">mpg_mean =</span> <span class="fu">mean</span>(mpg))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 2
##     cyl mpg_mean
##   &lt;dbl&gt;    &lt;dbl&gt;
## 1     4     26.7
## 2     6     19.7
## 3     8     15.1</code></pre>
<p>We use a similar setup to summarize data in {srvyr}.</p>
<div class="sourceCode" id="cb120"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb120-1"><a href="c05-descriptive-analysis.html#cb120-1" aria-hidden="true" tabindex="-1"></a>dstrata <span class="sc">%&gt;%</span></span>
<span id="cb120-2"><a href="c05-descriptive-analysis.html#cb120-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(stype) <span class="sc">%&gt;%</span></span>
<span id="cb120-3"><a href="c05-descriptive-analysis.html#cb120-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">api00_mean =</span> <span class="fu">survey_mean</span>(api00),</span>
<span id="cb120-4"><a href="c05-descriptive-analysis.html#cb120-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">api00_median =</span> <span class="fu">survey_median</span>(api00))</span></code></pre></div>
<pre><code>## # A tibble: 3 × 5
##   stype api00_mean api00_mean_se api00_median api00_median_se
##   &lt;fct&gt;      &lt;dbl&gt;         &lt;dbl&gt;        &lt;dbl&gt;           &lt;dbl&gt;
## 1 E           674.          12.5          671            20.7
## 2 H           626.          15.5          635            21.6
## 3 M           637.          16.6          648            24.1</code></pre>
</div>
<div id="counts-and-cross-tabulations" class="section level2 hasAnchor" number="5.3">
<h2><span class="header-section-number">5.3</span> Counts and Cross-Tabulations<a href="c05-descriptive-analysis.html#counts-and-cross-tabulations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>With <code>survey_count()</code> and <code>survey_tally()</code>, we can calculate the estimated population counts for a given variable or combination of variables. Sometimes, these are referred to as cross-tabulations or crosstabs, for short. These summaries should be applied to categorical data and are used to get estimated counts of the population size of groups from the survey.</p>
<div id="desc-count-syntax" class="section level3 hasAnchor" number="5.3.1">
<h3><span class="header-section-number">5.3.1</span> Syntax<a href="c05-descriptive-analysis.html#desc-count-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_count()</code> is very similar to the <code>dplyr::count()</code> syntax; however, as noted above, it can only be called on <code>tbl_svy</code> objects. Let’s explore the syntax:</p>
<div class="sourceCode" id="cb122"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb122-1"><a href="c05-descriptive-analysis.html#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_count</span>(</span>
<span id="cb122-2"><a href="c05-descriptive-analysis.html#cb122-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb122-3"><a href="c05-descriptive-analysis.html#cb122-3" aria-hidden="true" tabindex="-1"></a>  ...,</span>
<span id="cb122-4"><a href="c05-descriptive-analysis.html#cb122-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">wt =</span> <span class="cn">NULL</span>,</span>
<span id="cb122-5"><a href="c05-descriptive-analysis.html#cb122-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">sort =</span> <span class="cn">FALSE</span>,</span>
<span id="cb122-6"><a href="c05-descriptive-analysis.html#cb122-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb122-7"><a href="c05-descriptive-analysis.html#cb122-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">.drop =</span> dplyr<span class="sc">::</span><span class="fu">group_by_drop_default</span>(x),</span>
<span id="cb122-8"><a href="c05-descriptive-analysis.html#cb122-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb122-9"><a href="c05-descriptive-analysis.html#cb122-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: a <code>tbl_svy</code> object created by <code>as_survey</code></li>
<li><code>...</code>: variables to group by, passed to <code>group_by</code></li>
<li><code>wt</code>: a variable to weight on in addition to the survey weights, defaults to <code>NULL</code></li>
<li><code>sort</code>: how to sort the variables, defaults to <code>FALSE</code></li>
<li><code>name</code>: the name of the count variable, defaults to <code>n</code></li>
<li><code>.drop</code>: whether to drop empty groups</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
</ul>
<p>To capture a count or crosstabs by different variables, we include them in the (<code>...</code>) argument. This argument can take any number of variables and will break down the counts by all combinations of the provided variables. This is the same as with <code>dplyr::count()</code>. We can also obtain an estimate of the overall population by not including any variables in the (<code>...</code>) argument or by using the <code>survey_tally()</code> function. The <code>survey_tally()</code> function has a similar syntax to the <code>survey_count()</code> function, but it does not include the (<code>...</code>) or the <code>.drop</code> arguments:</p>
<div class="sourceCode" id="cb123"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb123-1"><a href="c05-descriptive-analysis.html#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_tally</span>(</span>
<span id="cb123-2"><a href="c05-descriptive-analysis.html#cb123-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb123-3"><a href="c05-descriptive-analysis.html#cb123-3" aria-hidden="true" tabindex="-1"></a>  wt,</span>
<span id="cb123-4"><a href="c05-descriptive-analysis.html#cb123-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">sort =</span> <span class="cn">FALSE</span>,</span>
<span id="cb123-5"><a href="c05-descriptive-analysis.html#cb123-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">name =</span> <span class="st">&quot;n&quot;</span>,</span>
<span id="cb123-6"><a href="c05-descriptive-analysis.html#cb123-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb123-7"><a href="c05-descriptive-analysis.html#cb123-7" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Both functions include the <code>vartype</code> argument with four different values:</p>
<ul>
<li><code>se</code>: standard error
<ul>
<li>The estimated standard deviation of the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_se”</li>
</ul></li>
<li><code>ci</code>: confidence interval
<ul>
<li>The lower and upper limits of a confidence interval</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_low” and “_upp”</li>
<li>By default, this is a 95% confidence interval but can be changed by using the argument level and specifying a number between 0 and 1. For example, <code>level=0.8</code> would produce a 80% confidence interval.</li>
</ul></li>
<li><code>var</code>: variance
<ul>
<li>The estimated variance of the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_var”</li>
</ul></li>
<li><code>cv</code>: coefficient of variation
<ul>
<li>A ratio of the standard error and the estimate</li>
<li>Output has a column with the variable name specified in the <code>name</code> argument with a suffix of “_cv”</li>
</ul></li>
</ul>
<p>The confidence intervals are always calculated using a symmetric t-distribution based confidence interval as follows:</p>
<p><span class="math display">\[ \text{estimate} \pm t^*_{df}\times SE\]</span>
where <span class="math inline">\(t^*_{df}\)</span> is the critical value from a t-distribution based on the confidence level and the degrees of freedom. By default, the degrees of freedom are calculated based on the design or number of replicates, but they can be specified using the argument <code>df</code>. For survey design objects, the degrees of freedom are calculated as the number of PSUs minus the number of strata. For replicate-based objects, the degrees of freedom are calculated as one less than the rank of the matrix of replicate weight, where the number of replicates is typically the rank. Note that specifying <code>df = Inf</code> is equivalent to using a normal (z-based) confidence interval. These variability types are the same for most of the survey functions, and we will provide examples using different types of variability throughout this chapter.</p>
</div>
<div id="examples" class="section level3 hasAnchor" number="5.3.2">
<h3><span class="header-section-number">5.3.2</span> Examples<a href="c05-descriptive-analysis.html#examples" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-estimated-population-count" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Estimated Population Count<a href="c05-descriptive-analysis.html#example-1-estimated-population-count" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we wanted to obtain the estimated number of households in the U.S. (the target population) using the Residential Energy Consumption Survey (RECS) data, we could use <code>survey_count()</code>. If we do not specify any variables in the <code>survey_count()</code> function, it will output the estimated population count (<code>n</code>) and standard error (<code>n_se</code>).</p>
<div class="sourceCode" id="cb124"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb124-1"><a href="c05-descriptive-analysis.html#cb124-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb124-2"><a href="c05-descriptive-analysis.html#cb124-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>() </span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##            n   n_se
##        &lt;dbl&gt;  &lt;dbl&gt;
## 1 118208250. 0.0320</code></pre>
<p>Thus, the estimated number of households in the U.S. is 118,208,250.</p>
<p>We could also use the <code>survey_tally()</code> function and the example below yields the same results as using <code>survey_count()</code> previously.</p>
<div class="sourceCode" id="cb126"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb126-1"><a href="c05-descriptive-analysis.html#cb126-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb126-2"><a href="c05-descriptive-analysis.html#cb126-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_tally</span>() </span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##            n   n_se
##        &lt;dbl&gt;  &lt;dbl&gt;
## 1 118208250. 0.0320</code></pre>
</div>
<div id="example-2-estimated-counts-by-subgroups-crosstabs" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Estimated Counts by Subgroups (Crosstabs)<a href="c05-descriptive-analysis.html#example-2-estimated-counts-by-subgroups-crosstabs" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To calculate the estimated number of observations for subgroups, such as Region and Division, we can add the variables of interest into the <code>survey_count()</code> function. In the example below, the estimated number of housing units by region and division is calculated. Additionally, one of the arguments allows us to change the name of the count variable from the default (<code>n</code>) using <code>name =</code>. In this case, we are changing the name to <code>"N"</code>.</p>
<div class="sourceCode" id="cb128"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb128-1"><a href="c05-descriptive-analysis.html#cb128-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb128-2"><a href="c05-descriptive-analysis.html#cb128-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>(Region, Division, <span class="at">name =</span> <span class="st">&quot;N&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##    Region    Division                   N     N_se
##    &lt;fct&gt;     &lt;fct&gt;                  &lt;dbl&gt;    &lt;dbl&gt;
##  1 Northeast New England         5628844. 0.00642 
##  2 Northeast Middle Atlantic    15377694. 0.000130
##  3 Midwest   East North Central 18094391. 0.000274
##  4 Midwest   West North Central  8277344. 0.000113
##  5 South     South Atlantic     23474851. 0.00555 
##  6 South     East South Central  7197189. 0.0240  
##  7 South     West South Central 13769934. 0.000423
##  8 West      Mountain North      4246877. 0.000147
##  9 West      Mountain South      4266870. 0.0193  
## 10 West      Pacific            17874256. 0.000481</code></pre>
<p>When we run the crosstab, we see there are an estimated 5,628,844 housing units in the New England Division.</p>
<p>If we wanted to use <code>survey_tally()</code> to output the same results, we would get an error if we try to use the same syntax as <code>survey_count()</code>:</p>
<div class="sourceCode" id="cb130"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb130-1"><a href="c05-descriptive-analysis.html#cb130-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb130-2"><a href="c05-descriptive-analysis.html#cb130-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_tally</span>(Region, Division, <span class="at">name =</span> <span class="st">&quot;N&quot;</span>) </span></code></pre></div>
<pre><code>## Error in `dplyr::summarise()`:
## ℹ In argument: `N = survey_total(Region, vartype = vartype,
##   na.rm = TRUE)`.
## Caused by error:
## ! Factor not allowed in survey functions, should be used as a grouping variable.</code></pre>
<p>Instead, use a the <code>group_by()</code> function prior to using <code>survey_tally()</code> to obtain this crosstab:</p>
<div class="sourceCode" id="cb132"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb132-1"><a href="c05-descriptive-analysis.html#cb132-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb132-2"><a href="c05-descriptive-analysis.html#cb132-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, Division) <span class="sc">%&gt;%</span></span>
<span id="cb132-3"><a href="c05-descriptive-analysis.html#cb132-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_tally</span>(<span class="at">name =</span> <span class="st">&quot;N&quot;</span>) </span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
## # Groups:   Region [4]
##    Region    Division                   N     N_se
##    &lt;fct&gt;     &lt;fct&gt;                  &lt;dbl&gt;    &lt;dbl&gt;
##  1 Northeast New England         5628844. 0.00642 
##  2 Northeast Middle Atlantic    15377694. 0.000130
##  3 Midwest   East North Central 18094391. 0.000274
##  4 Midwest   West North Central  8277344. 0.000113
##  5 South     South Atlantic     23474851. 0.00555 
##  6 South     East South Central  7197189. 0.0240  
##  7 South     West South Central 13769934. 0.000423
##  8 West      Mountain North      4246877. 0.000147
##  9 West      Mountain South      4266870. 0.0193  
## 10 West      Pacific            17874256. 0.000481</code></pre>
</div>
</div>
</div>
<div id="totals-and-sums" class="section level2 hasAnchor" number="5.4">
<h2><span class="header-section-number">5.4</span> Totals and Sums<a href="c05-descriptive-analysis.html#totals-and-sums" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The <code>survey_total()</code> function is analogous to <code>sum</code>. This can be used to find the estimated aggregate sum of an outcome and should be applied to continuous variables to obtain the estimated total quantity in a population. All the functions introduced from this point on in this chapter must be called from within <code>summarize()</code>.</p>
<div id="syntax" class="section level3 hasAnchor" number="5.4.1">
<h3><span class="header-section-number">5.4.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Here is the syntax:</p>
<div class="sourceCode" id="cb134"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb134-1"><a href="c05-descriptive-analysis.html#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_total</span>(</span>
<span id="cb134-2"><a href="c05-descriptive-analysis.html#cb134-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb134-3"><a href="c05-descriptive-analysis.html#cb134-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb134-4"><a href="c05-descriptive-analysis.html#cb134-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb134-5"><a href="c05-descriptive-analysis.html#cb134-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb134-6"><a href="c05-descriptive-analysis.html#cb134-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb134-7"><a href="c05-descriptive-analysis.html#cb134-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb134-8"><a href="c05-descriptive-analysis.html#cb134-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: a variable, expression, or empty</li>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>deff</code>: a logical value stating whether the design effect should be returned, defaults to FALSE (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.10.3</a>)</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
</div>
<div id="examples-1" class="section level3 hasAnchor" number="5.4.2">
<h3><span class="header-section-number">5.4.2</span> Examples<a href="c05-descriptive-analysis.html#examples-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-estimated-population-count-1" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Estimated Population Count<a href="c05-descriptive-analysis.html#example-1-estimated-population-count-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>To calculate a population count estimate with <code>survey_total()</code>, the argument <code>x</code> can be left empty as shown in the example below:</p>
<div class="sourceCode" id="cb135"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb135-1"><a href="c05-descriptive-analysis.html#cb135-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb135-2"><a href="c05-descriptive-analysis.html#cb135-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">survey_total</span>())  </span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##         coef  `_se`
##        &lt;dbl&gt;  &lt;dbl&gt;
## 1 118208250. 0.0320</code></pre>
<p>Note that the result from <code>recs_des %&gt;% summarize(survey_total())</code> is equivalent to the <code>survey_count()</code> and <code>survey_tally()</code> functions. However, the <code>survey_total()</code> function is called within <code>summarize</code>, whereas <code>survey_count()</code> and <code>survey_tally()</code> are not.</p>
</div>
<div id="example-2-overall-summation-of-continuous-variables" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Overall Summation of Continuous Variables<a href="c05-descriptive-analysis.html#example-2-overall-summation-of-continuous-variables" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The difference between <code>survey_total()</code> and <code>survey_count()</code> is more evident when specifying continuous variables to sum. Let’s compute the total cost of electricity in whole dollars from variable <code>DOLLAREL</code><a href="#fn14" class="footnote-ref" id="fnref14"><sup>14</sup></a>.</p>
<div class="sourceCode" id="cb137"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb137-1"><a href="c05-descriptive-analysis.html#cb137-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb137-2"><a href="c05-descriptive-analysis.html#cb137-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_total</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##       elec_bill elec_bill_se
##           &lt;dbl&gt;        &lt;dbl&gt;
## 1 162495237023.  1666895091.</code></pre>
<p>It is estimated that American residential households spent a total of $162,495,237,023 on electricity in 2015, and the estimate has a standard error of $1,666,895,091.</p>
</div>
<div id="example-3-summation-by-groups" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Summation by Groups<a href="c05-descriptive-analysis.html#example-3-summation-by-groups" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As we are using the {srvyr} package, we can use <code>group_by()</code> to calculate the cost of electricity by different groups. Let’s see how much the cost of electricity in whole dollars differed between regions and output the confidence interval instead of the default standard error.</p>
<div class="sourceCode" id="cb139"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb139-1"><a href="c05-descriptive-analysis.html#cb139-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb139-2"><a href="c05-descriptive-analysis.html#cb139-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb139-3"><a href="c05-descriptive-analysis.html#cb139-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_total</span>(DOLLAREL,</span>
<span id="cb139-4"><a href="c05-descriptive-analysis.html#cb139-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vartype =</span> <span class="st">&quot;ci&quot;</span>))   </span></code></pre></div>
<pre><code>## # A tibble: 4 × 4
##   Region       elec_bill elec_bill_low elec_bill_upp
##   &lt;fct&gt;            &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 Northeast 28271369286.  26845972323.  29696766249.
## 2 Midwest   31527659004.  30468473687.  32586844321.
## 3 South     72463508778.  70230847218.  74696170337.
## 4 West      30232699955.  28542681631.  31922718279.</code></pre>
<p>The survey results estimate that households in the Northeast spent $28,271,369,286 with a confidence interval of ($26,845,972,323, $29,696,766,249) on electricity in 2015 while households in the South spent an estimated $72,463,508,778 with a confidence interval of ($26,845,972,323, $74,696,170,337).</p>
</div>
</div>
</div>
<div id="desc-meanprop" class="section level2 hasAnchor" number="5.5">
<h2><span class="header-section-number">5.5</span> Means and Proportions<a href="c05-descriptive-analysis.html#desc-meanprop" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Means and proportions are the backbone of most research. The estimates calculated are often the first things we look for when reviewing research on a given topic. The <code>survey_mean()</code> and <code>survey_prop()</code> functions calculate means and proportions while incorporating the survey design elements. The <code>survey_mean()</code> function should be used on continuous variables of survey data, while the <code>survey_prop()</code> function should be used on categorical variables. These topics are grouped together because a proportion is simply a mean of a logical (Boolean) variable.</p>
<div id="desc-meanprop-syntax" class="section level3 hasAnchor" number="5.5.1">
<h3><span class="header-section-number">5.5.1</span> Syntax<a href="c05-descriptive-analysis.html#desc-meanprop-syntax" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for both means and proportions are very similar:</p>
<div class="sourceCode" id="cb141"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb141-1"><a href="c05-descriptive-analysis.html#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_mean</span>(</span>
<span id="cb141-2"><a href="c05-descriptive-analysis.html#cb141-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb141-3"><a href="c05-descriptive-analysis.html#cb141-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-4"><a href="c05-descriptive-analysis.html#cb141-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb141-5"><a href="c05-descriptive-analysis.html#cb141-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb141-6"><a href="c05-descriptive-analysis.html#cb141-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-7"><a href="c05-descriptive-analysis.html#cb141-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop_method =</span> <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>),</span>
<span id="cb141-8"><a href="c05-descriptive-analysis.html#cb141-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-9"><a href="c05-descriptive-analysis.html#cb141-9" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb141-10"><a href="c05-descriptive-analysis.html#cb141-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb141-11"><a href="c05-descriptive-analysis.html#cb141-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-12"><a href="c05-descriptive-analysis.html#cb141-12" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_prop</span>(</span>
<span id="cb141-13"><a href="c05-descriptive-analysis.html#cb141-13" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-14"><a href="c05-descriptive-analysis.html#cb141-14" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb141-15"><a href="c05-descriptive-analysis.html#cb141-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb141-16"><a href="c05-descriptive-analysis.html#cb141-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">proportion =</span> <span class="cn">TRUE</span>,</span>
<span id="cb141-17"><a href="c05-descriptive-analysis.html#cb141-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">prop_method =</span> <span class="fu">c</span>(<span class="st">&quot;logit&quot;</span>, <span class="st">&quot;likelihood&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;mean&quot;</span>, <span class="st">&quot;xlogit&quot;</span>),</span>
<span id="cb141-18"><a href="c05-descriptive-analysis.html#cb141-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb141-19"><a href="c05-descriptive-analysis.html#cb141-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb141-20"><a href="c05-descriptive-analysis.html#cb141-20" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>Both functions have the following arguments and defaults:</p>
<ul>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>prop_method</code>: Method to calculate the confidence interval for confidence intervals</li>
<li><code>deff</code>: a logical value stating whether the design effect should be returned, defaults to FALSE (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.10.3</a>)</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
<p>There are two main differences in the syntax. The <code>survey_mean()</code> function includes the first argument of <code>x</code>, while <code>survey_prop()</code> does not. The <code>x</code> argument includes the variable or expression on which the mean should be calculated. There is no argument to include variables in the <code>survey_prop()</code> function. Instead, prior to <code>summarize()</code>, we need to use the <code>group_by()</code> function to specify the variables of interest. For <code>survey_mean()</code>, including a <code>group_by()</code> function will allow us to obtain the means by the different groups.</p>
<p>The other main difference is with the <code>proportion</code> argument. In the <code>survey_mean()</code> function, this defaults to <code>FALSE</code>, while in the <code>survey_prop()</code> function, this defaults to <code>TRUE</code>. This is because the <code>survey_mean()</code> function can be used to calculate both means and proportions. If we wish to calculate a proportion using this function, we will need to set the <code>proportion</code> argument to <code>TRUE</code>.</p>
<p>In section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a>, we provide an overview of the different variability types. The interval used in confidence intervals for most measures, such as means and counts, is referred to as a Wald-type interval. While a Wald-type interval using a symmetric t-based confidence interval is an option for proportions, this generally does not have the correct coverage rate when sample sizes are small and/or the proportion is “near” 0 or 1. Thus, other methods have been developed to calculate confidence intervals and can be specified using the <code>prop_method</code> option in <code>survey_prop()</code>. The options include:</p>
<ul>
<li><code>logit</code>: fits a logistic regression model and computes a Wald-type interval on the log-odds scale, which is then transformed to the probability scale. This is the default method.</li>
<li><code>likelihood</code>: uses the (Rao-Scott) scaled chi-squared distribution for the log-likelihood from a binomial distribution.</li>
<li><code>asin</code>: uses the variance-stabilizing transformation for the binomial distribution, the arcsine square root, and then back-transforms the interval to the probability scale</li>
<li><code>beta</code>: uses the incomplete beta function with an effective sample size based on the estimated variance of the proportion.</li>
<li><code>mean</code>: the Wald-type interval</li>
<li><code>xlogit</code>: uses a logit transformation of the proportion, calculates a Wald-type interval, and then back-transforms to the probability scale. This method is implemented in SUDAAN and SPSS.</li>
</ul>
<p>Each option will provide slightly different confidence interval bounds when dealing with proportions. Please note that when working with <code>survey_mean()</code>, this method does not need to be specified unless the <code>proprtion</code> argument is <code>TRUE</code>.</p>
</div>
<div id="examples-2" class="section level3 hasAnchor" number="5.5.2">
<h3><span class="header-section-number">5.5.2</span> Examples<a href="c05-descriptive-analysis.html#examples-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-one-variable-proportion" class="section level4 unnumbered hasAnchor">
<h4>Example 1: One Variable Proportion<a href="c05-descriptive-analysis.html#example-1-one-variable-proportion" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we are interested in obtaining the proportion of people in each region in the RECS data, we can use <code>group_by()</code> and <code>survey_prop()</code> to obtain this.</p>
<div class="sourceCode" id="cb142"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb142-1"><a href="c05-descriptive-analysis.html#cb142-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb142-2"><a href="c05-descriptive-analysis.html#cb142-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb142-3"><a href="c05-descriptive-analysis.html#cb142-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>()) </span></code></pre></div>
<pre><code>## When `proportion` is unspecified, `survey_prop()` now defaults to `proportion = TRUE`.
## ℹ This should improve confidence interval coverage.
## This message is displayed once per session.</code></pre>
<pre><code>## # A tibble: 4 × 3
##   Region        p     p_se
##   &lt;fct&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 Northeast 0.178 6.84e-11
## 2 Midwest   0.223 6.07e-11
## 3 South     0.376 1.43e-10
## 4 West      0.223 1.37e-10</code></pre>
<p>17.8% of the households are in the Northeast, 22.3% in the Midwest, and so on.</p>
<p>Note: <code>survey_prop()</code> is essentially the same as using <code>survey_mean()</code> with a categorical variable and without specifying a numeric variable in the <code>x</code> argument. The following code will give us the same results as above:</p>
<div class="sourceCode" id="cb145"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb145-1"><a href="c05-descriptive-analysis.html#cb145-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb145-2"><a href="c05-descriptive-analysis.html#cb145-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb145-3"><a href="c05-descriptive-analysis.html#cb145-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>())</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region        p     p_se
##   &lt;fct&gt;     &lt;dbl&gt;    &lt;dbl&gt;
## 1 Northeast 0.178 6.84e-11
## 2 Midwest   0.223 6.07e-11
## 3 South     0.376 1.43e-10
## 4 West      0.223 1.37e-10</code></pre>
</div>
<div id="example-2-conditional-proportions" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Conditional Proportions<a href="c05-descriptive-analysis.html#example-2-conditional-proportions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>It is possible to obtain proportions by more than one variable. In the following example, we look at the proportion of housing units by Region and whether air conditioning is used (<code>ACUsed</code>).<a href="#fn15" class="footnote-ref" id="fnref15"><sup>15</sup></a></p>
<div class="sourceCode" id="cb147"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb147-1"><a href="c05-descriptive-analysis.html#cb147-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb147-2"><a href="c05-descriptive-analysis.html#cb147-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb147-3"><a href="c05-descriptive-analysis.html#cb147-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
## # Groups:   Region [4]
##   Region    ACUsed      p    p_se
##   &lt;fct&gt;     &lt;lgl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Northeast FALSE  0.151  0.0200 
## 2 Northeast TRUE   0.849  0.0200 
## 3 Midwest   FALSE  0.0766 0.00957
## 4 Midwest   TRUE   0.923  0.00957
## 5 South     FALSE  0.0511 0.00649
## 6 South     TRUE   0.949  0.00649
## 7 West      FALSE  0.301  0.0298 
## 8 West      TRUE   0.699  0.0298</code></pre>
<p>When specifying multiple variables, the proportions are conditional. In the results above, notice that the proportions sum to 1 within each region. This can be interpreted as the proportion of housing units with air conditioning
<em>within</em> each region.</p>
</div>
<div id="example-3-joint-proportions" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Joint Proportions<a href="c05-descriptive-analysis.html#example-3-joint-proportions" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>If we want the joint proportion instead, the interact function is necessary. In the example below, the interact function is used on <code>Region</code> and <code>ACUsed</code>:</p>
<div class="sourceCode" id="cb149"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb149-1"><a href="c05-descriptive-analysis.html#cb149-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb149-2"><a href="c05-descriptive-analysis.html#cb149-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">interact</span>(Region, ACUsed)) <span class="sc">%&gt;%</span></span>
<span id="cb149-3"><a href="c05-descriptive-analysis.html#cb149-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 8 × 4
##   Region    ACUsed      p    p_se
##   &lt;fct&gt;     &lt;lgl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
## 1 Northeast FALSE  0.0268 0.00355
## 2 Northeast TRUE   0.151  0.00355
## 3 Midwest   FALSE  0.0171 0.00214
## 4 Midwest   TRUE   0.206  0.00214
## 5 South     FALSE  0.0192 0.00244
## 6 South     TRUE   0.357  0.00244
## 7 West      FALSE  0.0672 0.00665
## 8 West      TRUE   0.156  0.00665</code></pre>
<p>As noted earlier, both the <code>survey_prop()</code> and <code>survey_mean()</code> functions can be used here and will provide the same results.</p>
</div>
<div id="example-4-overall-mean" class="section level4 unnumbered hasAnchor">
<h4>Example 4: Overall Mean<a href="c05-descriptive-analysis.html#example-4-overall-mean" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the estimated average cost of electricity in the U.S. and include both the standard error and the confidence interval:</p>
<div class="sourceCode" id="cb151"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb151-1"><a href="c05-descriptive-analysis.html#cb151-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb151-2"><a href="c05-descriptive-analysis.html#cb151-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL,</span>
<span id="cb151-3"><a href="c05-descriptive-analysis.html#cb151-3" aria-hidden="true" tabindex="-1"></a>                                    <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   elec_bill elec_bill_se elec_bill_low elec_bill_upp
##       &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1     1375.         14.1         1347.         1403.</code></pre>
<p>Nationally, the average household spent $$1,375 in 2015.</p>
</div>
<div id="example-5-means-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 5: Means by Subgroup<a href="c05-descriptive-analysis.html#example-5-means-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can also calculate the estimated average cost of electricity in the U.S. by each region. To do this, we include a <code>group_by()</code> function with the variable of interest before the <code>summarize()</code> function:</p>
<div class="sourceCode" id="cb153"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb153-1"><a href="c05-descriptive-analysis.html#cb153-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb153-2"><a href="c05-descriptive-analysis.html#cb153-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb153-3"><a href="c05-descriptive-analysis.html#cb153-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    elec_bill elec_bill_se
##   &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;
## 1 Northeast     1346.         34.2
## 2 Midwest       1196.         20.2
## 3 South         1631.         25.3
## 4 West          1146.         32.3</code></pre>
<p>Households from the West spent $1,146 on electricity, and in the South, they spent an average of $1,631.</p>
</div>
</div>
</div>
<div id="quantiles-and-medians" class="section level2 hasAnchor" number="5.6">
<h2><span class="header-section-number">5.6</span> Quantiles and Medians<a href="c05-descriptive-analysis.html#quantiles-and-medians" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>To better understand the distribution of a continuous variable, quantiles can be calculated at specific points to help gain insight. For example, we might want estimates of the quartiles (25%, 50%, 75%) of income in a population to understand how the income is distributed. We use the <code>survey_quantile()</code> function to calculate quantiles in survey data.</p>
<p>Medians are often used to find the midpoint of a continuous distribution when the data is considered to be skewed, as medians are less subject to outliers than means. The median in the data is the same as the 50th percentile. In other words, it is the value where 50% of the data is higher than it and 50% is lower. Medians are a special case of quantiles that are used more often; thus, a unique function has been created for it (<code>survey_median()</code>). We can calculate the median of the data using both the <code>survey_median()</code> function and the <code>survey_quantile()</code> function with the 50% quantile provided as an argument.</p>
<div id="syntax-1" class="section level3 hasAnchor" number="5.6.1">
<h3><span class="header-section-number">5.6.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_quantile()</code> and <code>survey_median()</code> are nearly identical:</p>
<div class="sourceCode" id="cb155"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb155-1"><a href="c05-descriptive-analysis.html#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_quantile</span>(</span>
<span id="cb155-2"><a href="c05-descriptive-analysis.html#cb155-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb155-3"><a href="c05-descriptive-analysis.html#cb155-3" aria-hidden="true" tabindex="-1"></a>  quantiles,</span>
<span id="cb155-4"><a href="c05-descriptive-analysis.html#cb155-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb155-5"><a href="c05-descriptive-analysis.html#cb155-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb155-6"><a href="c05-descriptive-analysis.html#cb155-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb155-7"><a href="c05-descriptive-analysis.html#cb155-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval_type =</span> <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;xlogit&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;score&quot;</span>, <span class="st">&quot;quantile&quot;</span>),</span>
<span id="cb155-8"><a href="c05-descriptive-analysis.html#cb155-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">qrule =</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;school&quot;</span>, <span class="st">&quot;shahvaish&quot;</span>, <span class="st">&quot;hf1&quot;</span>, <span class="st">&quot;hf2&quot;</span>, <span class="st">&quot;hf3&quot;</span>, </span>
<span id="cb155-9"><a href="c05-descriptive-analysis.html#cb155-9" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;hf4&quot;</span>, <span class="st">&quot;hf5&quot;</span>, <span class="st">&quot;hf6&quot;</span>, <span class="st">&quot;hf7&quot;</span>, <span class="st">&quot;hf8&quot;</span>, <span class="st">&quot;hf9&quot;</span>),</span>
<span id="cb155-10"><a href="c05-descriptive-analysis.html#cb155-10" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb155-11"><a href="c05-descriptive-analysis.html#cb155-11" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb155-12"><a href="c05-descriptive-analysis.html#cb155-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-13"><a href="c05-descriptive-analysis.html#cb155-13" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_median</span>(</span>
<span id="cb155-14"><a href="c05-descriptive-analysis.html#cb155-14" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb155-15"><a href="c05-descriptive-analysis.html#cb155-15" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb155-16"><a href="c05-descriptive-analysis.html#cb155-16" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb155-17"><a href="c05-descriptive-analysis.html#cb155-17" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb155-18"><a href="c05-descriptive-analysis.html#cb155-18" aria-hidden="true" tabindex="-1"></a>  <span class="at">interval_type =</span> <span class="fu">c</span>(<span class="st">&quot;mean&quot;</span>, <span class="st">&quot;beta&quot;</span>, <span class="st">&quot;xlogit&quot;</span>, <span class="st">&quot;asin&quot;</span>, <span class="st">&quot;score&quot;</span>, <span class="st">&quot;quantile&quot;</span>),</span>
<span id="cb155-19"><a href="c05-descriptive-analysis.html#cb155-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">qrule =</span> <span class="fu">c</span>(<span class="st">&quot;math&quot;</span>, <span class="st">&quot;school&quot;</span>, <span class="st">&quot;shahvaish&quot;</span>, <span class="st">&quot;hf1&quot;</span>, <span class="st">&quot;hf2&quot;</span>, <span class="st">&quot;hf3&quot;</span>, </span>
<span id="cb155-20"><a href="c05-descriptive-analysis.html#cb155-20" aria-hidden="true" tabindex="-1"></a>            <span class="st">&quot;hf4&quot;</span>, <span class="st">&quot;hf5&quot;</span>, <span class="st">&quot;hf6&quot;</span>, <span class="st">&quot;hf7&quot;</span>, <span class="st">&quot;hf8&quot;</span>, <span class="st">&quot;hf9&quot;</span>),</span>
<span id="cb155-21"><a href="c05-descriptive-analysis.html#cb155-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb155-22"><a href="c05-descriptive-analysis.html#cb155-22" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments that are in both functions are:</p>
<ul>
<li><code>x</code>: a variable, expression, or empty</li>
<li><code>na.rm</code>: an indicator of whether missing values should be dropped, defaults to <code>FALSE</code></li>
<li><code>vartype</code>: type(s) of variation estimate to calculate, defaults to <code>se</code> (standard error)</li>
<li><code>level</code>: a number or a vector indicating the confidence level, defaults to 0.95</li>
<li><code>interval_type</code>: method for calculating a confidence interval</li>
<li><code>qrule</code>: rule for defining quantiles. The default is the lower end of the quantile interval (“math”). The midpoint of the quantile interval is the “school” rule. “hf1” to “hf9” are weighted analogs to type=1 to 9 in <code>quantile()</code>. “shahvaish” corresponds to a rule proposed by <span class="citation">Shah and Vaish (<a href="#ref-shahvaish" role="doc-biblioref">2006</a>)</span>. See <code>vignette("qrule", package="survey")</code> for more information.</li>
<li><code>df</code>: (for <code>vartype = 'ci'</code>), a numeric value indicating degrees of freedom for the t-distribution</li>
</ul>
<p>The only difference between <code>survey_quantile()</code> and <code>survey_median()</code> is the inclusion of the <code>quantiles</code> argument in the <code>survey_quantile()</code> function. This argument takes a vector with values between 0 and 1 to indicate which quantiles to calculate. For example, if we wanted the quartiles of a variable, we would provide <code>quantiles = c(0.25, 0.5, 0.75)</code>. While we can specify quantiles of 0 and 1, which represent the minimum and maximum, this is not recommended. It only returns the minimum and maximum of the respondents and cannot be extrapolated to the population as there is no valid definition of standard error.</p>
<p>In section <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a>, we provide an overview of the different variability types. The interval used in confidence intervals for most measures, such as means and counts, is referred to as a Wald-type interval. However, like confidence intervals for proportions, this is not always the most accurate interval for quantiles. With quantiles, the methods for interval types are many of the same as those for proportions (asin, beta, mean, and xlogit; see section <a href="c05-descriptive-analysis.html#desc-meanprop-syntax">5.5.1</a>) with the addition of two more methods:</p>
<ul>
<li><code>score</code>: the Francisco &amp; Fuller confidence interval based on inverting a score test (only available for design-based survey objects and not replicate-based objects)</li>
<li><code>quantile</code>: based on the replicates of the quantile. This is not valid for jackknife-type replicates but is available for bootstrap and BRR replicates.</li>
</ul>
<p>One thing of note with the <code>score</code> method is that when there are many ties in the data, this method can produce confidence intervals that do not contain the estimate. When dealing with a high propensity for ties (e.g., many respondents will have the same age), it is recommended to use another method. This is the method implemented in SUDAAN. However, SUDAAN adds noise to the values to prevent the issue with the ties, while the documentation in the {survey} package indicates this method generally has lower performance than the beta and logit intervals.</p>
</div>
<div id="examples-3" class="section level3 hasAnchor" number="5.6.2">
<h3><span class="header-section-number">5.6.2</span> Examples<a href="c05-descriptive-analysis.html#examples-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-quartiles" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall Quartiles<a href="c05-descriptive-analysis.html#example-1-overall-quartiles" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Quantiles are useful in learning about the distribution of a variable. Let’s look into the quartiles, specifically, the first quartile (p=0.25), the median (p=0.5), and the third quartile (p=0.75) of electric bills.</p>
<div class="sourceCode" id="cb156"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb156-1"><a href="c05-descriptive-analysis.html#cb156-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb156-2"><a href="c05-descriptive-analysis.html#cb156-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb156-3"><a href="c05-descriptive-analysis.html#cb156-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, .<span class="dv">5</span>, <span class="fl">0.75</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   elec_bill_q25 elec_bill_q50 elec_bill_q75 elec_bill_q25_se
##           &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
## 1           795         1219.         1790.             12.5
## # ℹ 2 more variables: elec_bill_q50_se &lt;dbl&gt;, elec_bill_q75_se &lt;dbl&gt;</code></pre>
<p>The output above shows the three quartiles and their respective standard errors.</p>
</div>
<div id="example-2-quartiles-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Quartiles by Subgroup<a href="c05-descriptive-analysis.html#example-2-quartiles-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can also estimate the quantiles of electric bills by region by incorporating the <code>group_by()</code> function:</p>
<div class="sourceCode" id="cb158"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb158-1"><a href="c05-descriptive-analysis.html#cb158-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb158-2"><a href="c05-descriptive-analysis.html#cb158-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb158-3"><a href="c05-descriptive-analysis.html#cb158-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb158-4"><a href="c05-descriptive-analysis.html#cb158-4" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, .<span class="dv">5</span>, <span class="fl">0.75</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 7
##   Region    elec_bill_q25 elec_bill_q50 elec_bill_q75 elec_bill_q25_se
##   &lt;fct&gt;             &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;            &lt;dbl&gt;
## 1 Northeast          749.         1190.         1741.             19.4
## 2 Midwest            738.         1067.         1524.             24.2
## 3 South             1041          1503.         2091.             21.7
## 4 West               605.          941.         1502.             18.8
## # ℹ 2 more variables: elec_bill_q50_se &lt;dbl&gt;, elec_bill_q75_se &lt;dbl&gt;</code></pre>
</div>
<div id="example-3-minimum-and-maximum" class="section level4 unnumbered hasAnchor">
<h4>Example 3: Minimum and Maximum<a href="c05-descriptive-analysis.html#example-3-minimum-and-maximum" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As mentioned in the syntax section, we can specify quantiles of 0 (minimum) and 1 (maximum). R will calculate these two values and provide results. However, these are only the minimum and maximum values in the data. There is not sufficient information to determine what the standard errors should be:</p>
<div class="sourceCode" id="cb160"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb160-1"><a href="c05-descriptive-analysis.html#cb160-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb160-2"><a href="c05-descriptive-analysis.html#cb160-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_quantile</span>(DOLLAREL,</span>
<span id="cb160-3"><a href="c05-descriptive-analysis.html#cb160-3" aria-hidden="true" tabindex="-1"></a>                                        <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">1</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   elec_bill_q00 elec_bill_q100 elec_bill_q00_se elec_bill_q100_se
##           &lt;dbl&gt;          &lt;dbl&gt;            &lt;dbl&gt;             &lt;dbl&gt;
## 1          21.8          8122.              NaN                 0</code></pre>
</div>
<div id="example-4-overall-median" class="section level4 unnumbered hasAnchor">
<h4>Example 4: Overall Median<a href="c05-descriptive-analysis.html#example-4-overall-median" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the estimated median cost of electricity in the U.S. using the <code>survey_median()</code> function:</p>
<div class="sourceCode" id="cb162"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb162-1"><a href="c05-descriptive-analysis.html#cb162-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb162-2"><a href="c05-descriptive-analysis.html#cb162-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_median</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   elec_bill elec_bill_se
##       &lt;dbl&gt;        &lt;dbl&gt;
## 1     1219.         17.3</code></pre>
<p>Nationally, the median household spent $1,219 in 2015. This is the same result as we obtained using the <code>survey_quantile()</code> function ($1,219). It is also interesting to note that the average electric bill for households that we calculated in section <a href="c05-descriptive-analysis.html#desc-meanprop">5.5</a> is $1,375, but the estimated median electric bill is $1,219 indicating the distribution is likely right-skewed.</p>
</div>
<div id="example-5-medians-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 5: Medians by Subgroup<a href="c05-descriptive-analysis.html#example-5-medians-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can also calculate the estimated median cost of electricity in the U.S. by each region. This is similar to finding the mean by region in that we include a <code>group_by()</code> function with the variable of interest before the <code>summarize()</code> function:</p>
<div class="sourceCode" id="cb164"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb164-1"><a href="c05-descriptive-analysis.html#cb164-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb164-2"><a href="c05-descriptive-analysis.html#cb164-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb164-3"><a href="c05-descriptive-analysis.html#cb164-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_median</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    elec_bill elec_bill_se
##   &lt;fct&gt;         &lt;dbl&gt;        &lt;dbl&gt;
## 1 Northeast     1190.         36.3
## 2 Midwest       1067.         28.0
## 3 South         1503.         28.0
## 4 West           941.         28.8</code></pre>
<p>Households from the West spent $941 on electricity, and in the South, they spent an average of $1,503.</p>
</div>
</div>
</div>
<div id="ratios" class="section level2 hasAnchor" number="5.7">
<h2><span class="header-section-number">5.7</span> Ratios<a href="c05-descriptive-analysis.html#ratios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Many are not familiar with the ratio estimate. The ratio is a measure of the ratio of the sum of two variables, specifically in the form of:</p>
<p><span class="math display">\[ \frac{\sum x_i}{\sum y_i}.\]</span>
The ratio is not the same as calculating the following:</p>
<p><span class="math display">\[ \frac{1}{N} \sum \frac{x_i}{y_i} \]</span></p>
<p>which could be calculated with <code>survey_mean()</code> by creating a derived variable <span class="math inline">\(z=x/y\)</span> and then calculating the mean of <span class="math inline">\(z\)</span>.</p>
<p>Consider a survey of police agencies in the United States. We might want to estimate the ratio of female police officers to total police officers. We could run <code>survey_ratio(Female_Officers, Total_Officers)</code>. If, instead, we used <code>survey_means(Female_Officers/Total_Officers)</code>, we would be estimating the average percentage of female officers across agencies, which is a different quantity.</p>
<div id="syntax-2" class="section level3 hasAnchor" number="5.7.1">
<h3><span class="header-section-number">5.7.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_ratio()</code> is as follows:</p>
<div class="sourceCode" id="cb166"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb166-1"><a href="c05-descriptive-analysis.html#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_ratio</span>(</span>
<span id="cb166-2"><a href="c05-descriptive-analysis.html#cb166-2" aria-hidden="true" tabindex="-1"></a>  numerator,</span>
<span id="cb166-3"><a href="c05-descriptive-analysis.html#cb166-3" aria-hidden="true" tabindex="-1"></a>  denominator,</span>
<span id="cb166-4"><a href="c05-descriptive-analysis.html#cb166-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb166-5"><a href="c05-descriptive-analysis.html#cb166-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb166-6"><a href="c05-descriptive-analysis.html#cb166-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb166-7"><a href="c05-descriptive-analysis.html#cb166-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">deff =</span> <span class="cn">FALSE</span>,</span>
<span id="cb166-8"><a href="c05-descriptive-analysis.html#cb166-8" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb166-9"><a href="c05-descriptive-analysis.html#cb166-9" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>numerator</code>: The numerator of the ratio</li>
<li><code>denominator</code>: The denominator of the ratio</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
<li><code>level</code>: A single number or vector of numbers indicating the confidence level</li>
<li><code>deff</code>: A logical value to indicate whether the design effect should be returned (this is described in more detail in Section <a href="c05-descriptive-analysis.html#desc-deff">5.10.3</a>)</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-4" class="section level3 hasAnchor" number="5.7.2">
<h3><span class="header-section-number">5.7.2</span> Examples<a href="c05-descriptive-analysis.html#examples-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-ratios" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall Ratios<a href="c05-descriptive-analysis.html#example-1-overall-ratios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose we wanted to find the ratio of dollars spent on liquid propane per unit (in British thermal unit [Btu]) nationally. If we wanted to find the average cost to a household, we could use <code>survey_mean()</code>, but to find the national unit rate, we can use ratio. In the following example, we will show both methods and discuss the interpretation of each:</p>
<div class="sourceCode" id="cb167"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb167-1"><a href="c05-descriptive-analysis.html#cb167-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb167-2"><a href="c05-descriptive-analysis.html#cb167-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(</span>
<span id="cb167-3"><a href="c05-descriptive-analysis.html#cb167-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">DOLLARLP_Tot =</span> <span class="fu">survey_total</span>(DOLLARLP, <span class="at">vartype =</span> <span class="cn">NULL</span>),</span>
<span id="cb167-4"><a href="c05-descriptive-analysis.html#cb167-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">BTULP_Tot =</span> <span class="fu">survey_total</span>(BTULP, <span class="at">vartype =</span> <span class="cn">NULL</span>),</span>
<span id="cb167-5"><a href="c05-descriptive-analysis.html#cb167-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">DOL_BTU_Rat =</span> <span class="fu">survey_ratio</span>(DOLLARLP, BTULP),</span>
<span id="cb167-6"><a href="c05-descriptive-analysis.html#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">DOL_BTU_Avg =</span> <span class="fu">survey_mean</span>(DOLLARLP <span class="sc">/</span> BTULP, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb167-7"><a href="c05-descriptive-analysis.html#cb167-7" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   DOLLARLP_Tot     BTULP_Tot DOL_BTU_Rat DOL_BTU_Rat_se DOL_BTU_Avg
##          &lt;dbl&gt;         &lt;dbl&gt;       &lt;dbl&gt;          &lt;dbl&gt;       &lt;dbl&gt;
## 1  7759788903. 360915832595.      0.0215       0.000602      0.0242
## # ℹ 1 more variable: DOL_BTU_Avg_se &lt;dbl&gt;</code></pre>
<p>The ratio of the total spent on liquid propane to the total consumption was 0.0215, but the average rate was 0.0242. With a bit of calculation, we can show that the ratio is the ratio of the totals DOLLARLP_Tot/BTULP_Tot=7,759,788,903/360,915,832,595=0.0215. While the ratio could be calculated manually in this manner, the standard error requires the use of the <code>survey_ratio()</code> function. The average can be interpreted as the average rate paid by a household.</p>
</div>
<div id="example-2-ratios-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Ratios by Subgroup<a href="c05-descriptive-analysis.html#example-2-ratios-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As previously done with other estimates, we can use <code>group_by()</code> to examine whether this rate varies by region.</p>
<div class="sourceCode" id="cb169"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb169-1"><a href="c05-descriptive-analysis.html#cb169-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb169-2"><a href="c05-descriptive-analysis.html#cb169-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb169-3"><a href="c05-descriptive-analysis.html#cb169-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">DOL_BTU_Rat =</span> <span class="fu">survey_ratio</span>(DOLLARLP, BTULP))</span></code></pre></div>
<pre><code>## # A tibble: 4 × 3
##   Region    DOL_BTU_Rat DOL_BTU_Rat_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast      0.0263       0.000888
## 2 Midwest        0.0167       0.000371
## 3 South          0.0218       0.000986
## 4 West           0.0232       0.000912</code></pre>
<p>Though not a statistical test, it does appear the cost rates in the Midwest for liquid propane are the lowest.</p>
</div>
</div>
</div>
<div id="correlations" class="section level2 hasAnchor" number="5.8">
<h2><span class="header-section-number">5.8</span> Correlations<a href="c05-descriptive-analysis.html#correlations" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The correlation is a measure of linear relationship between two continuous variables, which ranges between -1 and 1. The most common one used is Pearson’s correlation (referred to as correlation henceforth). A sample correlation for a simple random sample is calculated as follows:</p>
<p><span class="math display">\[\frac{\sum (x_i-\bar{x})(y_i-\bar{y})}{\sqrt{\sum (x_i-\bar{x})^2} \sqrt{\sum(y_i-\bar{y})^2}} \]</span></p>
<p>When using <code>survey_corr()</code> for designs other than a simple random sample, the weights are applied when estimating the correlation.</p>
<div id="syntax-3" class="section level3 hasAnchor" number="5.8.1">
<h3><span class="header-section-number">5.8.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-3" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The syntax for <code>survey_corr()</code> is as follows:</p>
<div class="sourceCode" id="cb171"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb171-1"><a href="c05-descriptive-analysis.html#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_corr</span>(</span>
<span id="cb171-2"><a href="c05-descriptive-analysis.html#cb171-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb171-3"><a href="c05-descriptive-analysis.html#cb171-3" aria-hidden="true" tabindex="-1"></a>  y,</span>
<span id="cb171-4"><a href="c05-descriptive-analysis.html#cb171-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb171-5"><a href="c05-descriptive-analysis.html#cb171-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>, <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb171-6"><a href="c05-descriptive-analysis.html#cb171-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb171-7"><a href="c05-descriptive-analysis.html#cb171-7" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb171-8"><a href="c05-descriptive-analysis.html#cb171-8" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: A variable or expression</li>
<li><code>y</code>: A variable or expression</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var", "cv")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
<li><code>level</code>: (For vartype = “ci” only) A single number or vector of numbers indicating the confidence level</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-5" class="section level3 hasAnchor" number="5.8.2">
<h3><span class="header-section-number">5.8.2</span> Examples<a href="c05-descriptive-analysis.html#examples-5" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-correlation" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall Correlation<a href="c05-descriptive-analysis.html#example-1-overall-correlation" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>We can calculate the correlation between total square footage (<code>TOTSQFT_EN</code>)<a href="#fn16" class="footnote-ref" id="fnref16"><sup>16</sup></a> and electricity consumption (<code>BTUEL</code>)<a href="#fn17" class="footnote-ref" id="fnref17"><sup>17</sup></a>.</p>
<div class="sourceCode" id="cb172"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb172-1"><a href="c05-descriptive-analysis.html#cb172-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb172-2"><a href="c05-descriptive-analysis.html#cb172-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">SQFT_Elec_Corr =</span> <span class="fu">survey_corr</span>(TOTSQFT_EN, BTUEL))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   SQFT_Elec_Corr SQFT_Elec_Corr_se
##            &lt;dbl&gt;             &lt;dbl&gt;
## 1          0.367            0.0172</code></pre>
</div>
<div id="example-2-correlations-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Correlations by Subgroup<a href="c05-descriptive-analysis.html#example-2-correlations-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Like with other statistics, we can do this by subgroups. For example, we can examine the correlation by whether air conditioning is used (<code>ACUsed</code>).</p>
<div class="sourceCode" id="cb174"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb174-1"><a href="c05-descriptive-analysis.html#cb174-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb174-2"><a href="c05-descriptive-analysis.html#cb174-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb174-3"><a href="c05-descriptive-analysis.html#cb174-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">SQFT_Elec_Corr =</span> <span class="fu">survey_corr</span>(TOTSQFT_EN, DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   ACUsed SQFT_Elec_Corr SQFT_Elec_Corr_se
##   &lt;lgl&gt;           &lt;dbl&gt;             &lt;dbl&gt;
## 1 FALSE           0.327            0.0468
## 2 TRUE            0.384            0.0189</code></pre>
</div>
</div>
</div>
<div id="standard-deviation-and-variance" class="section level2 hasAnchor" number="5.9">
<h2><span class="header-section-number">5.9</span> Standard Deviation and Variance<a href="c05-descriptive-analysis.html#standard-deviation-and-variance" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>All survey functions produce an estimate of the variability of a given estimate. No additional function is needed when dealing with variable estimates. However, if estimates of the population variance and population standard deviation are needed, we can use the <code>survey_var()</code> and <code>survey_sd()</code> functions. In our experience, most researchers will not use these functions. These are sometimes used when designing a future study, as understanding the variability in the population can help inform the precision of a future sampling design.</p>
<div id="syntax-4" class="section level3 hasAnchor" number="5.9.1">
<h3><span class="header-section-number">5.9.1</span> Syntax<a href="c05-descriptive-analysis.html#syntax-4" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>As with non-survey data, the standard deviation estimate is the square root of the variance estimate, and thus, the functions have the same arguments, except the standard deviation does not allow the usage of <code>vartype</code>.</p>
<div class="sourceCode" id="cb176"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb176-1"><a href="c05-descriptive-analysis.html#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_var</span>(</span>
<span id="cb176-2"><a href="c05-descriptive-analysis.html#cb176-2" aria-hidden="true" tabindex="-1"></a>  x,</span>
<span id="cb176-3"><a href="c05-descriptive-analysis.html#cb176-3" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span>,</span>
<span id="cb176-4"><a href="c05-descriptive-analysis.html#cb176-4" aria-hidden="true" tabindex="-1"></a>  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>, <span class="st">&quot;var&quot;</span>),</span>
<span id="cb176-5"><a href="c05-descriptive-analysis.html#cb176-5" aria-hidden="true" tabindex="-1"></a>  <span class="at">level =</span> <span class="fl">0.95</span>,</span>
<span id="cb176-6"><a href="c05-descriptive-analysis.html#cb176-6" aria-hidden="true" tabindex="-1"></a>  <span class="at">df =</span> <span class="cn">NULL</span></span>
<span id="cb176-7"><a href="c05-descriptive-analysis.html#cb176-7" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb176-8"><a href="c05-descriptive-analysis.html#cb176-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-9"><a href="c05-descriptive-analysis.html#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="fu">survey_sd</span>(</span>
<span id="cb176-10"><a href="c05-descriptive-analysis.html#cb176-10" aria-hidden="true" tabindex="-1"></a>  x, </span>
<span id="cb176-11"><a href="c05-descriptive-analysis.html#cb176-11" aria-hidden="true" tabindex="-1"></a>  <span class="at">na.rm =</span> <span class="cn">FALSE</span></span>
<span id="cb176-12"><a href="c05-descriptive-analysis.html#cb176-12" aria-hidden="true" tabindex="-1"></a>)</span></code></pre></div>
<p>The arguments are:</p>
<ul>
<li><code>x</code>: A variable or expression, or empty</li>
<li><code>na.rm</code>: A logical value to indicate whether missing values should be dropped</li>
<li><code>vartype</code>: type(s) of variation estimate to calculate including any of <code>c("se", "ci", "var")</code>, defaults to <code>se</code> (standard error) (see <a href="c05-descriptive-analysis.html#desc-count-syntax">5.3.1</a> for more information)</li>
<li><code>level</code>: (For vartype = “ci” only) A single number or vector of numbers indicating the confidence level.</li>
<li><code>df</code>: (For vartype = “ci” only) A numeric value indicating the degrees of freedom for t-distribution</li>
</ul>
</div>
<div id="examples-6" class="section level3 hasAnchor" number="5.9.2">
<h3><span class="header-section-number">5.9.2</span> Examples<a href="c05-descriptive-analysis.html#examples-6" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="example-1-overall-variability" class="section level4 unnumbered hasAnchor">
<h4>Example 1: Overall Variability<a href="c05-descriptive-analysis.html#example-1-overall-variability" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Returning to electricity bills, we look at the variability in electricity expenditure.</p>
<div class="sourceCode" id="cb177"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb177-1"><a href="c05-descriptive-analysis.html#cb177-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb177-2"><a href="c05-descriptive-analysis.html#cb177-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">var_elbill =</span> <span class="fu">survey_var</span>(DOLLAREL),</span>
<span id="cb177-3"><a href="c05-descriptive-analysis.html#cb177-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_elbill =</span> <span class="fu">survey_sd</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## Warning: There were 2 warnings in `dplyr::summarise()`.
## The first warning was:
## ℹ In argument: `var_elbill = survey_var(DOLLAREL)`.
## Caused by warning in `thetas - meantheta`:
## ! Recycling array of length 1 in vector-array arithmetic is deprecated.
##   Use c() or as.vector() instead.
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 1 remaining warning.</code></pre>
<pre><code>## # A tibble: 1 × 3
##   var_elbill var_elbill_se sd_elbill
##        &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
## 1    647540.        27163.      805.</code></pre>
<p>A warning message may be displayed if using a replicate design. The results are still valid. The results above give an estimate of the population variance of electricity bills (<code>var_elbill</code>), the standard error of that variance (<code>var_elbill_se</code>), and the estimated population standard deviation of electricity bills (<code>sd_elbill</code>). Note that no standard error is associated with the standard deviation - this is the only estimate that does not include a standard error.</p>
</div>
<div id="example-2-variability-by-subgroup" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Variability by Subgroup<a href="c05-descriptive-analysis.html#example-2-variability-by-subgroup" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Like other estimates, we can calculate the variance by region. This would be useful to learn if the variability is similar across regions:</p>
<div class="sourceCode" id="cb180"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb180-1"><a href="c05-descriptive-analysis.html#cb180-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb180-2"><a href="c05-descriptive-analysis.html#cb180-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb180-3"><a href="c05-descriptive-analysis.html#cb180-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">var_elbill =</span> <span class="fu">survey_var</span>(DOLLAREL),</span>
<span id="cb180-4"><a href="c05-descriptive-analysis.html#cb180-4" aria-hidden="true" tabindex="-1"></a>            <span class="at">sd_elbill =</span> <span class="fu">survey_sd</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## Warning: There were 8 warnings in `dplyr::summarise()`.
## The first warning was:
## ℹ In argument: `var_elbill = survey_var(DOLLAREL)`.
## ℹ In group 1: `Region = Northeast`.
## Caused by warning in `thetas - meantheta`:
## ! Recycling array of length 1 in vector-array arithmetic is deprecated.
##   Use c() or as.vector() instead.
## ℹ Run `dplyr::last_dplyr_warnings()` to see the 7 remaining warnings.</code></pre>
<pre><code>## # A tibble: 4 × 4
##   Region    var_elbill var_elbill_se sd_elbill
##   &lt;fct&gt;          &lt;dbl&gt;         &lt;dbl&gt;     &lt;dbl&gt;
## 1 Northeast    714269.        54305.      845.
## 2 Midwest      410548.        26708.      641.
## 3 South        682280.        54320.      826.
## 4 West         578803.        39280.      761.</code></pre>
</div>
</div>
</div>
<div id="additional-topics" class="section level2 hasAnchor" number="5.10">
<h2><span class="header-section-number">5.10</span> Additional Topics<a href="c05-descriptive-analysis.html#additional-topics" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="unweighted-analysis" class="section level3 hasAnchor" number="5.10.1">
<h3><span class="header-section-number">5.10.1</span> Unweighted Analysis<a href="c05-descriptive-analysis.html#unweighted-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Sometimes, it is helpful to calculate an unweighted estimate of a given variable. For this, we use the <code>unweighted()</code> function in the <code>summarize()</code> function. The <code>unweighted()</code> function calculates unweighted summaries from <code>tbl_svy</code> object, which reflects the summary among the <em>respondents</em> and does not extrapolate to a population estimate. The unweighted function can be used in conjunction with any {dplyr} functions. Here is an example looking at the average household electricity cost.</p>
<div class="sourceCode" id="cb183"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb183-1"><a href="c05-descriptive-analysis.html#cb183-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb183-2"><a href="c05-descriptive-analysis.html#cb183-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">elec_bill =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb183-3"><a href="c05-descriptive-analysis.html#cb183-3" aria-hidden="true" tabindex="-1"></a>            <span class="at">elec_unweight =</span> <span class="fu">unweighted</span>(<span class="fu">mean</span>(DOLLAREL)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   elec_bill elec_bill_se elec_unweight
##       &lt;dbl&gt;        &lt;dbl&gt;         &lt;dbl&gt;
## 1     1375.         14.1         1404.</code></pre>
<p>It is estimated that American residential households spent an average of $1,375 on electricity in 2015, and the estimate has a standard error of $14. The unweighted function calculates the unweighted average and illustrates the average amount of money the <em>respondents</em> spent on electricity in 2015, which was $1,404.</p>
</div>
<div id="subpopulation-analysis" class="section level3 hasAnchor" number="5.10.2">
<h3><span class="header-section-number">5.10.2</span> Subpopulation Analysis<a href="c05-descriptive-analysis.html#subpopulation-analysis" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Briefly, we mentioned using <code>filter()</code> to subset a survey object for analysis. This operation should be done after creating the design object. In rare circumstances, subsetting data before creating the object can lead to incorrect variability estimates. This can occur if subsetting removes an entire PSU.</p>
<p>Suppose we wanted estimates of the average amount spent on natural gas among housing units that use natural gas. This could be obtained by first filtering records to only include records where <code>BTUNG &gt; s0</code> and then finding the average amount of money spent.</p>
<div class="sourceCode" id="cb185"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb185-1"><a href="c05-descriptive-analysis.html#cb185-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb185-2"><a href="c05-descriptive-analysis.html#cb185-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(BTUNG <span class="sc">&gt;</span> <span class="dv">0</span>) <span class="sc">%&gt;%</span></span>
<span id="cb185-3"><a href="c05-descriptive-analysis.html#cb185-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">NG_mean =</span> <span class="fu">survey_mean</span>(DOLLARNG,</span>
<span id="cb185-4"><a href="c05-descriptive-analysis.html#cb185-4" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   NG_mean NG_mean_se NG_mean_low NG_mean_upp
##     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1    601.       9.49        582.        620.</code></pre>
<p>Note that this yields a higher mean than when not applying the filter. When including housing units that do not use natural gas, many $0 amounts are included in the mean calculation.</p>
<div class="sourceCode" id="cb187"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb187-1"><a href="c05-descriptive-analysis.html#cb187-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb187-2"><a href="c05-descriptive-analysis.html#cb187-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">NG_mean =</span> <span class="fu">survey_mean</span>(DOLLARNG,</span>
<span id="cb187-3"><a href="c05-descriptive-analysis.html#cb187-3" aria-hidden="true" tabindex="-1"></a>                                  <span class="at">vartype =</span> <span class="fu">c</span>(<span class="st">&quot;se&quot;</span>, <span class="st">&quot;ci&quot;</span>)))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   NG_mean NG_mean_se NG_mean_low NG_mean_upp
##     &lt;dbl&gt;      &lt;dbl&gt;       &lt;dbl&gt;       &lt;dbl&gt;
## 1    349.       9.04        331.        367.</code></pre>
</div>
<div id="desc-deff" class="section level3 hasAnchor" number="5.10.3">
<h3><span class="header-section-number">5.10.3</span> Design Effects<a href="c05-descriptive-analysis.html#desc-deff" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>The design effect measures how the precision of an estimate is impacted by the sampling design. A design effect is calculated as the ratio of the variance of an estimate under the design at hand to the variance of the estimate under a simple random sample without replacement (SRS). A design effect less than 1 indicates that the design is <em>more</em> statistically efficient than a SRS design. This is rare but possible in a stratified sampling design where the outcome is correlated with the stratification variable(s). A design effect greater than 1 indicates that the design is <em>less</em> statistically efficient than a SRS design. From a design effect, we can calculate the effective sample size as follows:</p>
<p><span class="math display">\[n_{eff}=\frac{n}{D_{eff}} \]</span></p>
<p>where <span class="math inline">\(n\)</span> is the nominal sample size (number of survey responses) and <span class="math inline">\(D_{eff}\)</span> is the estimated design effect. The effective sample size has an interesting interpretation that a survey using an SRS design would need a sample size of <span class="math inline">\(n_{eff}\)</span> to obtain the same precision as the design at hand, which is where the efficiency interpretation comes in. Design effects are outcome-specific — outcomes that are less clustered in the population have smaller design effects than outcomes that are clustered.</p>
<p>In the {srvyr} package, design effects can be calculated for totals, proportions, means, and ratio estimates by setting the <code>deff</code> argument to TRUE in the corresponding functions. For example, the design effect can be calculated for the average consumption of electricity (BTUEL), natural gas (BTUNG), liquid propane (BTULP), fuel oil (BTUFO), wood (BTUWOOD), and wood pellets (BTUPELLET).</p>
<div class="sourceCode" id="cb189"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb189-1"><a href="c05-descriptive-analysis.html#cb189-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb189-2"><a href="c05-descriptive-analysis.html#cb189-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(</span>
<span id="cb189-3"><a href="c05-descriptive-analysis.html#cb189-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">c</span>(BTUEL, BTUNG, BTULP, BTUFO, BTUWOOD, BTUPELLET),</span>
<span id="cb189-4"><a href="c05-descriptive-analysis.html#cb189-4" aria-hidden="true" tabindex="-1"></a>    <span class="sc">~</span> <span class="fu">survey_mean</span>(.x, <span class="at">deff =</span> <span class="cn">TRUE</span>, <span class="at">vartype =</span> <span class="cn">NULL</span>)</span>
<span id="cb189-5"><a href="c05-descriptive-analysis.html#cb189-5" aria-hidden="true" tabindex="-1"></a>  )) <span class="sc">%&gt;%</span></span>
<span id="cb189-6"><a href="c05-descriptive-analysis.html#cb189-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(<span class="fu">ends_with</span>(<span class="st">&quot;deff&quot;</span>))</span></code></pre></div>
<pre><code>## # A tibble: 1 × 6
##   BTUEL_deff BTUNG_deff BTULP_deff BTUFO_deff BTUWOOD_deff
##        &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;      &lt;dbl&gt;        &lt;dbl&gt;
## 1       1.59       2.39       4.37       1.75         2.17
## # ℹ 1 more variable: BTUPELLET_deff &lt;dbl&gt;</code></pre>
</div>
<div id="creating-summary-rows" class="section level3 hasAnchor" number="5.10.4">
<h3><span class="header-section-number">5.10.4</span> Creating Summary Rows<a href="c05-descriptive-analysis.html#creating-summary-rows" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>When using <code>group_by()</code> in analysis, results are returned with a row for each group or group combination. Often, we want both the breakdowns by group and a summary row for the estimate for the entire population. For example, we may want the average electricity consumption by region AND nationally. The {srvyr} package has a function <code>cascade()</code>, which adds summary rows for the total of a group. It is used in place of <code>summarize()</code> and has similar functions along with some additional features.</p>
<div id="syntax-5" class="section level4 unnumbered hasAnchor">
<h4>Syntax<a href="c05-descriptive-analysis.html#syntax-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>The syntax is as follows:</p>
<pre><code>cascade(
  .data, 
  ..., 
  .fill = NA, 
  .fill_level_top = FALSE, 
  .groupings = NULL
)</code></pre>
<p>where the arguments are:</p>
<ul>
<li><code>.data</code>: A <code>tbl_svy</code> object</li>
<li><code>...</code>: Name-value pairs of summary functions (same as the <code>summarize()</code> function)</li>
<li><code>.fill</code>: Value to fill in for group summaries (defaults to <code>NA</code>)</li>
<li><code>.fill_level_top</code>: When filling factor variables, whether to put the value ‘.fill’ in the first position (defaults to FALSE, placing it in the bottom).</li>
<li><code>.groupings</code>: (Experimental) A list of quosures to manually specify the groupings to use, rather than the default.</li>
</ul>
</div>
<div id="example-9" class="section level4 unnumbered hasAnchor">
<h4>Example<a href="c05-descriptive-analysis.html#example-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>First, let’s look at a simple example and then build on it to examine the features of the function. In the first example, all default values are used.</p>
<div class="sourceCode" id="cb192"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb192-1"><a href="c05-descriptive-analysis.html#cb192-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb192-2"><a href="c05-descriptive-analysis.html#cb192-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb192-3"><a href="c05-descriptive-analysis.html#cb192-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cascade</span>(<span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL))</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast       1346.           34.2
## 2 Midwest         1196.           20.2
## 3 South           1631.           25.3
## 4 West            1146.           32.3
## 5 &lt;NA&gt;            1375.           14.1</code></pre>
<p>The last row where <code>Region = NA</code> is the national average electricity bill. We might wish to have a better name for it and can do that using the <code>.fill</code> argument.</p>
<div class="sourceCode" id="cb194"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb194-1"><a href="c05-descriptive-analysis.html#cb194-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb194-2"><a href="c05-descriptive-analysis.html#cb194-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb194-3"><a href="c05-descriptive-analysis.html#cb194-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cascade</span>(<span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb194-4"><a href="c05-descriptive-analysis.html#cb194-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">.fill =</span> <span class="st">&quot;National&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 Northeast       1346.           34.2
## 2 Midwest         1196.           20.2
## 3 South           1631.           25.3
## 4 West            1146.           32.3
## 5 National        1375.           14.1</code></pre>
<p>We can also have more than one grouping variable as follows:</p>
<div class="sourceCode" id="cb196"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb196-1"><a href="c05-descriptive-analysis.html#cb196-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb196-2"><a href="c05-descriptive-analysis.html#cb196-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region, Urbanicity) <span class="sc">%&gt;%</span></span>
<span id="cb196-3"><a href="c05-descriptive-analysis.html#cb196-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cascade</span>(<span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb196-4"><a href="c05-descriptive-analysis.html#cb196-4" aria-hidden="true" tabindex="-1"></a>          <span class="at">.fill =</span> <span class="st">&quot;Total&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb196-5"><a href="c05-descriptive-analysis.html#cb196-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<pre><code>## # A tibble: 17 × 4
##    Region    Urbanicity    DOLLAREL_mn DOLLAREL_mn_se
##    &lt;fct&gt;     &lt;fct&gt;               &lt;dbl&gt;          &lt;dbl&gt;
##  1 Northeast Urban Area          1350.           30.8
##  2 Northeast Urban Cluster       1123.          113. 
##  3 Northeast Rural               1473.           68.6
##  4 Northeast Total               1346.           34.2
##  5 Midwest   Urban Area          1062.           28.6
##  6 Midwest   Urban Cluster       1163.           64.3
##  7 Midwest   Rural               1623.           54.0
##  8 Midwest   Total               1196.           20.2
##  9 South     Urban Area          1581.           34.3
## 10 South     Urban Cluster       1377.           59.7
## 11 South     Rural               1879.           65.8
## 12 South     Total               1631.           25.3
## 13 West      Urban Area          1110.           34.6
## 14 West      Urban Cluster       1134.           69.7
## 15 West      Rural               1363.           83.0
## 16 West      Total               1146.           32.3
## 17 Total     Total               1375.           14.1</code></pre>
<p>We can move the summary row to the first row:</p>
<div class="sourceCode" id="cb198"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb198-1"><a href="c05-descriptive-analysis.html#cb198-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb198-2"><a href="c05-descriptive-analysis.html#cb198-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(Region) <span class="sc">%&gt;%</span></span>
<span id="cb198-3"><a href="c05-descriptive-analysis.html#cb198-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">cascade</span>(</span>
<span id="cb198-4"><a href="c05-descriptive-analysis.html#cb198-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">DOLLAREL_mn =</span> <span class="fu">survey_mean</span>(DOLLAREL),</span>
<span id="cb198-5"><a href="c05-descriptive-analysis.html#cb198-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fill =</span> <span class="st">&quot;National&quot;</span>,</span>
<span id="cb198-6"><a href="c05-descriptive-analysis.html#cb198-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">.fill_level_top =</span> <span class="cn">TRUE</span></span>
<span id="cb198-7"><a href="c05-descriptive-analysis.html#cb198-7" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb198-8"><a href="c05-descriptive-analysis.html#cb198-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span></code></pre></div>
<pre><code>## # A tibble: 5 × 3
##   Region    DOLLAREL_mn DOLLAREL_mn_se
##   &lt;fct&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1 National        1375.           14.1
## 2 Northeast       1346.           34.2
## 3 Midwest         1196.           20.2
## 4 South           1631.           25.3
## 5 West            1146.           32.3</code></pre>
</div>
</div>
<div id="calculating-estimates-for-many-outcomes" class="section level3 hasAnchor" number="5.10.5">
<h3><span class="header-section-number">5.10.5</span> Calculating Estimates for Many Outcomes<a href="c05-descriptive-analysis.html#calculating-estimates-for-many-outcomes" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Often, we are interested in a summary statistic across many variables. Two useful tools in doing this are the <code>across()</code> function in {dplyr} which has been shown a few times above and the <code>map()</code> function in {purrr}.</p>
<p>The <code>across()</code> function allows you to apply the same function to several columns within <code>summarize()</code>. This works well for usage with all functions shown above except <code>survey_prop()</code>. In a later example, we will tackle several proportions.</p>
<div id="example-1-across" class="section level4 unnumbered hasAnchor">
<h4>Example 1: <code>across()</code><a href="c05-descriptive-analysis.html#example-1-across" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Suppose we want to calculate the total consumption for each fuel type and the average consumption for each fuel type with coefficients of variation. These include the consumption of electricity (BTUEL), natural gas (BTUNG), liquid propane (BTULP), fuel oil (BTUFO), wood (BTUWOOD), and wood pellets (BTUPELLET), as illustrated in the discussion on design effects. These are the only variables that start with “BTU”, so we can use that to our advantage.</p>
<div class="sourceCode" id="cb200"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb200-1"><a href="c05-descriptive-analysis.html#cb200-1" aria-hidden="true" tabindex="-1"></a>consumption_ests <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb200-2"><a href="c05-descriptive-analysis.html#cb200-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(</span>
<span id="cb200-3"><a href="c05-descriptive-analysis.html#cb200-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">starts_with</span>(<span class="st">&quot;BTU&quot;</span>),</span>
<span id="cb200-4"><a href="c05-descriptive-analysis.html#cb200-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">list</span>(</span>
<span id="cb200-5"><a href="c05-descriptive-analysis.html#cb200-5" aria-hidden="true" tabindex="-1"></a>      <span class="at">Total =</span>  <span class="sc">~</span> <span class="fu">survey_total</span>(.x, <span class="at">vartype =</span> <span class="st">&quot;cv&quot;</span>),</span>
<span id="cb200-6"><a href="c05-descriptive-analysis.html#cb200-6" aria-hidden="true" tabindex="-1"></a>      <span class="at">Mean =</span>  <span class="sc">~</span> <span class="fu">survey_mean</span>(.x, <span class="at">vartype =</span> <span class="st">&quot;cv&quot;</span>)</span>
<span id="cb200-7"><a href="c05-descriptive-analysis.html#cb200-7" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb200-8"><a href="c05-descriptive-analysis.html#cb200-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">.unpack =</span> <span class="st">&quot;{outer}.{inner}&quot;</span></span>
<span id="cb200-9"><a href="c05-descriptive-analysis.html#cb200-9" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb200-10"><a href="c05-descriptive-analysis.html#cb200-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-11"><a href="c05-descriptive-analysis.html#cb200-11" aria-hidden="true" tabindex="-1"></a>consumption_ests</span></code></pre></div>
<pre><code>## # A tibble: 1 × 24
##   BTUEL_Total.coef BTUEL_Total._cv BTUEL_Mean.coef BTUEL_Mean._cv
##              &lt;dbl&gt;           &lt;dbl&gt;           &lt;dbl&gt;          &lt;dbl&gt;
## 1          4.32e12          0.0108          36578.         0.0108
## # ℹ 20 more variables: BTUNG_Total.coef &lt;dbl&gt;, BTUNG_Total._cv &lt;dbl&gt;,
## #   BTUNG_Mean.coef &lt;dbl&gt;, BTUNG_Mean._cv &lt;dbl&gt;,
## #   BTULP_Total.coef &lt;dbl&gt;, BTULP_Total._cv &lt;dbl&gt;,
## #   BTULP_Mean.coef &lt;dbl&gt;, BTULP_Mean._cv &lt;dbl&gt;,
## #   BTUFO_Total.coef &lt;dbl&gt;, BTUFO_Total._cv &lt;dbl&gt;,
## #   BTUFO_Mean.coef &lt;dbl&gt;, BTUFO_Mean._cv &lt;dbl&gt;,
## #   BTUWOOD_Total.coef &lt;dbl&gt;, BTUWOOD_Total._cv &lt;dbl&gt;, …</code></pre>
<p>In the example above, this results in a very wide table. We may instead want a row for each fuel type. Using the <code>pivot_longer()</code> and <code>pivot_wider()</code> functions from {tidyr} can help us get there. We will first make the data longer and split out the components of the name with <code>pivot_longer()</code>:</p>
<div class="sourceCode" id="cb202"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb202-1"><a href="c05-descriptive-analysis.html#cb202-1" aria-hidden="true" tabindex="-1"></a>consumption_ests_long <span class="ot">&lt;-</span> consumption_ests <span class="sc">%&gt;%</span></span>
<span id="cb202-2"><a href="c05-descriptive-analysis.html#cb202-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(</span>
<span id="cb202-3"><a href="c05-descriptive-analysis.html#cb202-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">cols =</span> <span class="fu">everything</span>(),</span>
<span id="cb202-4"><a href="c05-descriptive-analysis.html#cb202-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;FuelType&quot;</span>, <span class="st">&quot;Stat&quot;</span>, <span class="st">&quot;Type&quot;</span>),</span>
<span id="cb202-5"><a href="c05-descriptive-analysis.html#cb202-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_pattern =</span> <span class="st">&quot;BTU(.*)_(.*)</span><span class="sc">\\</span><span class="st">.(.*)&quot;</span></span>
<span id="cb202-6"><a href="c05-descriptive-analysis.html#cb202-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb202-7"><a href="c05-descriptive-analysis.html#cb202-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-8"><a href="c05-descriptive-analysis.html#cb202-8" aria-hidden="true" tabindex="-1"></a>consumption_ests_long</span></code></pre></div>
<pre><code>## # A tibble: 24 × 4
##    FuelType Stat  Type     value
##    &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1 EL       Total coef  4.32e+12
##  2 EL       Total _cv   1.08e- 2
##  3 EL       Mean  coef  3.66e+ 4
##  4 EL       Mean  _cv   1.08e- 2
##  5 NG       Total coef  3.96e+12
##  6 NG       Total _cv   2.55e- 2
##  7 NG       Mean  coef  3.35e+ 4
##  8 NG       Mean  _cv   2.55e- 2
##  9 LP       Total coef  3.61e+11
## 10 LP       Total _cv   1.25e- 1
## # ℹ 14 more rows</code></pre>
<p>Then, we make the names for each element more descriptive and informative before using <code>pivot_wider()</code> to create a table that is almost ready for publication. A bit more on that will be covered in Chapter <a href="c08-communicating-results.html#c08-communicating-results">8</a>.</p>
<div class="sourceCode" id="cb204"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb204-1"><a href="c05-descriptive-analysis.html#cb204-1" aria-hidden="true" tabindex="-1"></a>consumption_ests_long <span class="sc">%&gt;%</span></span>
<span id="cb204-2"><a href="c05-descriptive-analysis.html#cb204-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Type =</span> <span class="fu">case_when</span>(Type <span class="sc">==</span> <span class="st">&quot;coef&quot;</span> <span class="sc">~</span> <span class="st">&quot;&quot;</span>,</span>
<span id="cb204-3"><a href="c05-descriptive-analysis.html#cb204-3" aria-hidden="true" tabindex="-1"></a>                          Type <span class="sc">==</span> <span class="st">&quot;_cv&quot;</span> <span class="sc">~</span> <span class="st">&quot; (CV)&quot;</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb204-4"><a href="c05-descriptive-analysis.html#cb204-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb204-5"><a href="c05-descriptive-analysis.html#cb204-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">id_cols =</span> FuelType,</span>
<span id="cb204-6"><a href="c05-descriptive-analysis.html#cb204-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> <span class="fu">c</span>(Stat, Type),</span>
<span id="cb204-7"><a href="c05-descriptive-analysis.html#cb204-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_glue =</span> <span class="st">&quot;{Stat}{Type}&quot;</span>,</span>
<span id="cb204-8"><a href="c05-descriptive-analysis.html#cb204-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> value</span>
<span id="cb204-9"><a href="c05-descriptive-analysis.html#cb204-9" aria-hidden="true" tabindex="-1"></a>  )</span></code></pre></div>
<pre><code>## # A tibble: 6 × 5
##   FuelType   Total `Total (CV)`   Mean `Mean (CV)`
##   &lt;chr&gt;      &lt;dbl&gt;        &lt;dbl&gt;  &lt;dbl&gt;       &lt;dbl&gt;
## 1 EL       4.32e12       0.0108 36578.      0.0108
## 2 NG       3.96e12       0.0255 33541.      0.0255
## 3 LP       3.61e11       0.125   3053.      0.125 
## 4 FO       4.64e11       0.0853  3927.      0.0853
## 5 WOOD     4.92e11       0.0908  4159.      0.0908
## 6 PELLET   2.11e10       0.242    179.      0.242</code></pre>
</div>
<div id="example-2-proportions-with-across" class="section level4 unnumbered hasAnchor">
<h4>Example 2: Proportions with <code>across()</code><a href="c05-descriptive-analysis.html#example-2-proportions-with-across" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>As mentioned earlier, proportions will not work as well directly with the <code>across()</code> method. If we want the proportion of houses with air conditioning and the proportion of houses with heating, we need two <code>group_by()</code> statements as follows:</p>
<div class="sourceCode" id="cb206"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb206-1"><a href="c05-descriptive-analysis.html#cb206-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb206-2"><a href="c05-descriptive-analysis.html#cb206-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ACUsed) <span class="sc">%&gt;%</span></span>
<span id="cb206-3"><a href="c05-descriptive-analysis.html#cb206-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   ACUsed     p    p_se
##   &lt;lgl&gt;  &lt;dbl&gt;   &lt;dbl&gt;
## 1 FALSE  0.130 0.00826
## 2 TRUE   0.870 0.00826</code></pre>
<div class="sourceCode" id="cb208"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb208-1"><a href="c05-descriptive-analysis.html#cb208-1" aria-hidden="true" tabindex="-1"></a>recs_des <span class="sc">%&gt;%</span></span>
<span id="cb208-2"><a href="c05-descriptive-analysis.html#cb208-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(SpaceHeatingUsed) <span class="sc">%&gt;%</span></span>
<span id="cb208-3"><a href="c05-descriptive-analysis.html#cb208-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>())</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   SpaceHeatingUsed      p    p_se
##   &lt;lgl&gt;             &lt;dbl&gt;   &lt;dbl&gt;
## 1 FALSE            0.0435 0.00370
## 2 TRUE             0.957  0.00370</code></pre>
<p>If we are <em>only</em> interested in the <code>TRUE</code> outcomes, that is, the proportion that have air conditioning and the proportion that have heating, we can use the fact that <code>survey_mean()</code> applied to a logical variable is the same as using <code>survey_prop()</code>, as shown below:</p>
<div class="sourceCode" id="cb210"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb210-1"><a href="c05-descriptive-analysis.html#cb210-1" aria-hidden="true" tabindex="-1"></a>cool_heat_tab <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb210-2"><a href="c05-descriptive-analysis.html#cb210-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="fu">across</span>(<span class="fu">c</span>(ACUsed, SpaceHeatingUsed), <span class="sc">~</span> <span class="fu">survey_mean</span>(.x),</span>
<span id="cb210-3"><a href="c05-descriptive-analysis.html#cb210-3" aria-hidden="true" tabindex="-1"></a>                   <span class="at">.unpack =</span> <span class="st">&quot;{outer}.{inner}&quot;</span>))</span>
<span id="cb210-4"><a href="c05-descriptive-analysis.html#cb210-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-5"><a href="c05-descriptive-analysis.html#cb210-5" aria-hidden="true" tabindex="-1"></a>cool_heat_tab</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   ACUsed.coef ACUsed._se SpaceHeatingUsed.coef SpaceHeatingUsed._se
##         &lt;dbl&gt;      &lt;dbl&gt;                 &lt;dbl&gt;                &lt;dbl&gt;
## 1       0.870    0.00826                 0.957              0.00370</code></pre>
<p>Note that the estimates are the same as when using the separate <code>group_by()</code> statements. Like previously done, we can use <code>pivot_longer()</code> to create a table in a format better suited for distribution.</p>
<div class="sourceCode" id="cb212"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb212-1"><a href="c05-descriptive-analysis.html#cb212-1" aria-hidden="true" tabindex="-1"></a>cool_heat_tab <span class="sc">%&gt;%</span></span>
<span id="cb212-2"><a href="c05-descriptive-analysis.html#cb212-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_longer</span>(<span class="fu">everything</span>(),</span>
<span id="cb212-3"><a href="c05-descriptive-analysis.html#cb212-3" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_to =</span> <span class="fu">c</span>(<span class="st">&quot;Comfort&quot;</span>, <span class="st">&quot;.value&quot;</span>),</span>
<span id="cb212-4"><a href="c05-descriptive-analysis.html#cb212-4" aria-hidden="true" tabindex="-1"></a>               <span class="at">names_pattern =</span> <span class="st">&quot;(.*)</span><span class="sc">\\</span><span class="st">.(.*)&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb212-5"><a href="c05-descriptive-analysis.html#cb212-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">p =</span> coef,</span>
<span id="cb212-6"><a href="c05-descriptive-analysis.html#cb212-6" aria-hidden="true" tabindex="-1"></a>         <span class="at">se =</span> <span class="st">`</span><span class="at">_se</span><span class="st">`</span>)</span></code></pre></div>
<pre><code>## # A tibble: 2 × 3
##   Comfort              p      se
##   &lt;chr&gt;            &lt;dbl&gt;   &lt;dbl&gt;
## 1 ACUsed           0.870 0.00826
## 2 SpaceHeatingUsed 0.957 0.00370</code></pre>
</div>
<div id="example-3-purrrmap" class="section level4 unnumbered hasAnchor">
<h4>Example 3: <code>purrr::map()</code><a href="c05-descriptive-analysis.html#example-3-purrrmap" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Loops are a common tool if we want to calculate the same thing for many elements. The {purrr} package has the <code>map()</code> functions. Like a loop, they allow you to do something in the same way many times. In our case, we may want to calculate proportions from the same design multiple times. An easy way to do this is to think about how we would do it for one outcome, build a function from there, and then iterate.</p>
<p>Suppose we want to create a table that shows the proportion of people that trust in their government (<code>TrustGovernment</code>)<a href="#fn18" class="footnote-ref" id="fnref18"><sup>18</sup></a> as well as those that trust in people (<code>TrustPeople</code>)<a href="#fn19" class="footnote-ref" id="fnref19"><sup>19</sup></a>.</p>
<p>First, we do this for a single variable. We create a table that has the variable name as a column, the answer as a column, and then the percentage and its standard error.</p>
<div class="sourceCode" id="cb214"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb214-1"><a href="c05-descriptive-analysis.html#cb214-1" aria-hidden="true" tabindex="-1"></a>anes_des <span class="sc">%&gt;%</span></span>
<span id="cb214-2"><a href="c05-descriptive-analysis.html#cb214-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">drop_na</span>(TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb214-3"><a href="c05-descriptive-analysis.html#cb214-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb214-4"><a href="c05-descriptive-analysis.html#cb214-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>() <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb214-5"><a href="c05-descriptive-analysis.html#cb214-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">Variable =</span> <span class="st">&quot;TrustGovernment&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb214-6"><a href="c05-descriptive-analysis.html#cb214-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">Answer =</span> TrustGovernment) <span class="sc">%&gt;%</span></span>
<span id="cb214-7"><a href="c05-descriptive-analysis.html#cb214-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(Variable, <span class="fu">everything</span>())</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable        Answer                  p  p_se
##   &lt;chr&gt;           &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustGovernment Always               1.55 0.204
## 2 TrustGovernment Most of the time    13.2  0.553
## 3 TrustGovernment About half the time 30.9  0.829
## 4 TrustGovernment Some of the time    43.4  0.855
## 5 TrustGovernment Never               11.0  0.566</code></pre>
<p>Then, we create a function to replace <code>TrustGovernment</code> with the functions argument. To do this, we need to use a bit of tidy evaluation, which is a more advanced skill. If you want to learn more, we recommend <span class="citation">Wickham (<a href="#ref-wickham2019advanced" role="doc-biblioref">2019</a>)</span>.</p>
<div class="sourceCode" id="cb216"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb216-1"><a href="c05-descriptive-analysis.html#cb216-1" aria-hidden="true" tabindex="-1"></a>calcps <span class="ot">&lt;-</span> <span class="cf">function</span>(var) {</span>
<span id="cb216-2"><a href="c05-descriptive-analysis.html#cb216-2" aria-hidden="true" tabindex="-1"></a>  anes_des <span class="sc">%&gt;%</span></span>
<span id="cb216-3"><a href="c05-descriptive-analysis.html#cb216-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">drop_na</span>(<span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb216-4"><a href="c05-descriptive-analysis.html#cb216-4" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(<span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb216-5"><a href="c05-descriptive-analysis.html#cb216-5" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>() <span class="sc">*</span> <span class="dv">100</span>) <span class="sc">%&gt;%</span></span>
<span id="cb216-6"><a href="c05-descriptive-analysis.html#cb216-6" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Variable =</span> var) <span class="sc">%&gt;%</span></span>
<span id="cb216-7"><a href="c05-descriptive-analysis.html#cb216-7" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="at">Answer :=</span> <span class="sc">!!</span><span class="fu">sym</span>(var)) <span class="sc">%&gt;%</span></span>
<span id="cb216-8"><a href="c05-descriptive-analysis.html#cb216-8" aria-hidden="true" tabindex="-1"></a>    <span class="fu">select</span>(Variable, <span class="fu">everything</span>())</span>
<span id="cb216-9"><a href="c05-descriptive-analysis.html#cb216-9" aria-hidden="true" tabindex="-1"></a>}</span></code></pre></div>
<p>We can then run this function on the two variables of interest:</p>
<div class="sourceCode" id="cb217"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb217-1"><a href="c05-descriptive-analysis.html#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calcps</span>(<span class="st">&quot;TrustGovernment&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable        Answer                  p  p_se
##   &lt;chr&gt;           &lt;fct&gt;               &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustGovernment Always               1.55 0.204
## 2 TrustGovernment Most of the time    13.2  0.553
## 3 TrustGovernment About half the time 30.9  0.829
## 4 TrustGovernment Some of the time    43.4  0.855
## 5 TrustGovernment Never               11.0  0.566</code></pre>
<div class="sourceCode" id="cb219"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb219-1"><a href="c05-descriptive-analysis.html#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="fu">calcps</span>(<span class="st">&quot;TrustPeople&quot;</span>)</span></code></pre></div>
<pre><code>## # A tibble: 5 × 4
##   Variable    Answer                   p  p_se
##   &lt;chr&gt;       &lt;fct&gt;                &lt;dbl&gt; &lt;dbl&gt;
## 1 TrustPeople Always               0.809 0.164
## 2 TrustPeople Most of the time    41.4   0.857
## 3 TrustPeople About half the time 28.2   0.776
## 4 TrustPeople Some of the time    24.5   0.670
## 5 TrustPeople Never                5.05  0.422</code></pre>
<p>Finally, we can use map to iterate over as many variables as we want. It will output a tibble with the variable name in the column “Variable”, the responses in “Answer”, the percentage, and then the standard error. This example extends nicely if we have many variables for which we want the percentage estimate.</p>
<div class="sourceCode" id="cb221"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb221-1"><a href="c05-descriptive-analysis.html#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="fu">c</span>(<span class="st">&quot;TrustGovernment&quot;</span>, <span class="st">&quot;TrustPeople&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb221-2"><a href="c05-descriptive-analysis.html#cb221-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">map</span>(calcps) <span class="sc">%&gt;%</span></span>
<span id="cb221-3"><a href="c05-descriptive-analysis.html#cb221-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">list_rbind</span>()</span></code></pre></div>
<pre><code>## # A tibble: 10 × 4
##    Variable        Answer                   p  p_se
##    &lt;chr&gt;           &lt;fct&gt;                &lt;dbl&gt; &lt;dbl&gt;
##  1 TrustGovernment Always               1.55  0.204
##  2 TrustGovernment Most of the time    13.2   0.553
##  3 TrustGovernment About half the time 30.9   0.829
##  4 TrustGovernment Some of the time    43.4   0.855
##  5 TrustGovernment Never               11.0   0.566
##  6 TrustPeople     Always               0.809 0.164
##  7 TrustPeople     Most of the time    41.4   0.857
##  8 TrustPeople     About half the time 28.2   0.776
##  9 TrustPeople     Some of the time    24.5   0.670
## 10 TrustPeople     Never                5.05  0.422</code></pre>
</div>
</div>
</div>
<div id="exercises-1" class="section level2 hasAnchor" number="5.11">
<h2><span class="header-section-number">5.11</span> Exercises<a href="c05-descriptive-analysis.html#exercises-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>The exercises use the design objects <code>anes_des</code> and <code>recs_des</code> as provided in the Prerequisites box in the beginning of the chapter.</p>
<ol style="list-style-type: decimal">
<li>How many females have a graduate degree? Hint: the variables <code>Gender</code> and <code>Education</code> will be useful.</li>
</ol>
<div class="sourceCode" id="cb223"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb223-1"><a href="c05-descriptive-analysis.html#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1:</span></span>
<span id="cb223-2"><a href="c05-descriptive-analysis.html#cb223-2" aria-hidden="true" tabindex="-1"></a>femgd_option1 <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb223-3"><a href="c05-descriptive-analysis.html#cb223-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>, Education <span class="sc">==</span> <span class="st">&quot;Graduate&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb223-4"><a href="c05-descriptive-analysis.html#cb223-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">survey_count</span>(<span class="at">name =</span> <span class="st">&quot;n&quot;</span>)</span>
<span id="cb223-5"><a href="c05-descriptive-analysis.html#cb223-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-6"><a href="c05-descriptive-analysis.html#cb223-6" aria-hidden="true" tabindex="-1"></a>femgd_option1</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##           n    n_se
##       &lt;dbl&gt;   &lt;dbl&gt;
## 1 15072196. 837872.</code></pre>
<div class="sourceCode" id="cb225"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb225-1"><a href="c05-descriptive-analysis.html#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 2:</span></span>
<span id="cb225-2"><a href="c05-descriptive-analysis.html#cb225-2" aria-hidden="true" tabindex="-1"></a>femgd_option2 <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb225-3"><a href="c05-descriptive-analysis.html#cb225-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(Gender <span class="sc">==</span> <span class="st">&quot;Female&quot;</span>, Education <span class="sc">==</span> <span class="st">&quot;Graduate&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb225-4"><a href="c05-descriptive-analysis.html#cb225-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">N =</span> <span class="fu">survey_total</span>(), <span class="at">.groups =</span> <span class="st">&quot;drop&quot;</span>)</span>
<span id="cb225-5"><a href="c05-descriptive-analysis.html#cb225-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-6"><a href="c05-descriptive-analysis.html#cb225-6" aria-hidden="true" tabindex="-1"></a>femgd_option2</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##           N    N_se
##       &lt;dbl&gt;   &lt;dbl&gt;
## 1 15072196. 837872.</code></pre>
<ol start="2" style="list-style-type: decimal">
<li>What percentage of people identify as “Strong Democrat”? Hint: The variable <code>PartyID</code> indicates someone’s party affiliation.</li>
</ol>
<div class="sourceCode" id="cb227"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb227-1"><a href="c05-descriptive-analysis.html#cb227-1" aria-hidden="true" tabindex="-1"></a>psd <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb227-2"><a href="c05-descriptive-analysis.html#cb227-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PartyID) <span class="sc">%&gt;%</span></span>
<span id="cb227-3"><a href="c05-descriptive-analysis.html#cb227-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb227-4"><a href="c05-descriptive-analysis.html#cb227-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PartyID <span class="sc">==</span> <span class="st">&quot;Strong democrat&quot;</span>)</span>
<span id="cb227-5"><a href="c05-descriptive-analysis.html#cb227-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-6"><a href="c05-descriptive-analysis.html#cb227-6" aria-hidden="true" tabindex="-1"></a>psd</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   PartyID             p    p_se
##   &lt;fct&gt;           &lt;dbl&gt;   &lt;dbl&gt;
## 1 Strong democrat 0.219 0.00646</code></pre>
<ol start="3" style="list-style-type: decimal">
<li>What percentage of people who voted in the 2020 election identify as “Strong Republican”? Hint: The variable <code>VotedPres2020</code> indicates whether someone voted in 2020.</li>
</ol>
<div class="sourceCode" id="cb229"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb229-1"><a href="c05-descriptive-analysis.html#cb229-1" aria-hidden="true" tabindex="-1"></a>psr <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb229-2"><a href="c05-descriptive-analysis.html#cb229-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(VotedPres2020 <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>) <span class="sc">%&gt;%</span></span>
<span id="cb229-3"><a href="c05-descriptive-analysis.html#cb229-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(PartyID) <span class="sc">%&gt;%</span></span>
<span id="cb229-4"><a href="c05-descriptive-analysis.html#cb229-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb229-5"><a href="c05-descriptive-analysis.html#cb229-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(PartyID <span class="sc">==</span> <span class="st">&quot;Strong republican&quot;</span>)</span>
<span id="cb229-6"><a href="c05-descriptive-analysis.html#cb229-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-7"><a href="c05-descriptive-analysis.html#cb229-7" aria-hidden="true" tabindex="-1"></a>psr</span></code></pre></div>
<pre><code>## # A tibble: 1 × 3
##   PartyID               p    p_se
##   &lt;fct&gt;             &lt;dbl&gt;   &lt;dbl&gt;
## 1 Strong republican 0.224 0.00790</code></pre>
<ol start="4" style="list-style-type: decimal">
<li>What percentage of people voted in both the 2016 election and the 2020 election? Include the logit confidence interval. Hint: The variable <code>VotedPres2016</code> indicates whether someone voted in 2016.</li>
</ol>
<div class="sourceCode" id="cb231"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb231-1"><a href="c05-descriptive-analysis.html#cb231-1" aria-hidden="true" tabindex="-1"></a>pvb <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb231-2"><a href="c05-descriptive-analysis.html#cb231-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2016),<span class="sc">!</span><span class="fu">is.na</span>(VotedPres2020)) <span class="sc">%&gt;%</span></span>
<span id="cb231-3"><a href="c05-descriptive-analysis.html#cb231-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(<span class="fu">interact</span>(VotedPres2016, VotedPres2020)) <span class="sc">%&gt;%</span></span>
<span id="cb231-4"><a href="c05-descriptive-analysis.html#cb231-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_prop</span>(<span class="at">var =</span> <span class="st">&quot;ci&quot;</span>, <span class="at">method =</span> <span class="st">&quot;logit&quot;</span>),) <span class="sc">%&gt;%</span></span>
<span id="cb231-5"><a href="c05-descriptive-analysis.html#cb231-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(VotedPres2016 <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>, VotedPres2020 <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb231-6"><a href="c05-descriptive-analysis.html#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="c05-descriptive-analysis.html#cb231-7" aria-hidden="true" tabindex="-1"></a>pvb</span></code></pre></div>
<pre><code>## # A tibble: 1 × 5
##   VotedPres2016 VotedPres2020     p p_low p_upp
##   &lt;fct&gt;         &lt;fct&gt;         &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1 Yes           Yes           0.626 0.607 0.644</code></pre>
<ol start="5" style="list-style-type: decimal">
<li>What is the design effect for the proportion of people who voted early? Hint: The variable <code>EarlyVote2020</code> indicates whether someone voted early in 2020.</li>
</ol>
<div class="sourceCode" id="cb233"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb233-1"><a href="c05-descriptive-analysis.html#cb233-1" aria-hidden="true" tabindex="-1"></a>pdeff <span class="ot">&lt;-</span> anes_des <span class="sc">%&gt;%</span></span>
<span id="cb233-2"><a href="c05-descriptive-analysis.html#cb233-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(<span class="sc">!</span><span class="fu">is.na</span>(EarlyVote2020)) <span class="sc">%&gt;%</span></span>
<span id="cb233-3"><a href="c05-descriptive-analysis.html#cb233-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(EarlyVote2020) <span class="sc">%&gt;%</span></span>
<span id="cb233-4"><a href="c05-descriptive-analysis.html#cb233-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">p =</span> <span class="fu">survey_mean</span>(<span class="at">deff =</span> <span class="cn">TRUE</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb233-5"><a href="c05-descriptive-analysis.html#cb233-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(EarlyVote2020 <span class="sc">==</span> <span class="st">&quot;Yes&quot;</span>)</span>
<span id="cb233-6"><a href="c05-descriptive-analysis.html#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="c05-descriptive-analysis.html#cb233-7" aria-hidden="true" tabindex="-1"></a>pdeff</span></code></pre></div>
<pre><code>## # A tibble: 1 × 4
##   EarlyVote2020      p    p_se p_deff
##   &lt;fct&gt;          &lt;dbl&gt;   &lt;dbl&gt;  &lt;dbl&gt;
## 1 Yes           0.0525 0.00420   2.27</code></pre>
<ol start="6" style="list-style-type: decimal">
<li>What is the median temperature people set their thermostats to at night during the winter? Hint: The variable <code>WinterTempNight</code> indicates the temperature that people set their temperature in the winter at night.</li>
</ol>
<div class="sourceCode" id="cb235"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb235-1"><a href="c05-descriptive-analysis.html#cb235-1" aria-hidden="true" tabindex="-1"></a>mean_wintertempnight <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb235-2"><a href="c05-descriptive-analysis.html#cb235-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">wtn_mean =</span> <span class="fu">survey_mean</span>(<span class="at">x =</span> WinterTempNight,</span>
<span id="cb235-3"><a href="c05-descriptive-analysis.html#cb235-3" aria-hidden="true" tabindex="-1"></a>                                   <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb235-4"><a href="c05-descriptive-analysis.html#cb235-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-5"><a href="c05-descriptive-analysis.html#cb235-5" aria-hidden="true" tabindex="-1"></a>mean_wintertempnight</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   wtn_mean wtn_mean_se
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1     68.1      0.0912</code></pre>
<ol start="7" style="list-style-type: decimal">
<li>People sometimes set their temperature differently over different seasons and during the day. What median temperatures do people set their thermostat to in the summer and winter, both during the day and at night? Include confidence intervals. Hint: Use the variables <code>WinterTempDay</code>, <code>WinterTempNight</code>, <code>SummerTempDay</code>, and <code>SummerTempNight</code>.</li>
</ol>
<div class="sourceCode" id="cb237"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb237-1"><a href="c05-descriptive-analysis.html#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Option 1</span></span>
<span id="cb237-2"><a href="c05-descriptive-analysis.html#cb237-2" aria-hidden="true" tabindex="-1"></a>med_wintertempday <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb237-3"><a href="c05-descriptive-analysis.html#cb237-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">wtd_mean =</span> <span class="fu">survey_median</span>(WinterTempDay,</span>
<span id="cb237-4"><a href="c05-descriptive-analysis.html#cb237-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb237-5"><a href="c05-descriptive-analysis.html#cb237-5" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb237-6"><a href="c05-descriptive-analysis.html#cb237-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-7"><a href="c05-descriptive-analysis.html#cb237-7" aria-hidden="true" tabindex="-1"></a>med_wintertempday</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   wtd_mean wtd_mean_se
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1       70       0.252</code></pre>
<div class="sourceCode" id="cb239"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb239-1"><a href="c05-descriptive-analysis.html#cb239-1" aria-hidden="true" tabindex="-1"></a>med_wintertempnight <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb239-2"><a href="c05-descriptive-analysis.html#cb239-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">wtn_mean =</span> <span class="fu">survey_median</span>(WinterTempNight,</span>
<span id="cb239-3"><a href="c05-descriptive-analysis.html#cb239-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb239-4"><a href="c05-descriptive-analysis.html#cb239-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb239-5"><a href="c05-descriptive-analysis.html#cb239-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-6"><a href="c05-descriptive-analysis.html#cb239-6" aria-hidden="true" tabindex="-1"></a>med_wintertempnight</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   wtn_mean wtn_mean_se
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1       68       0.252</code></pre>
<div class="sourceCode" id="cb241"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb241-1"><a href="c05-descriptive-analysis.html#cb241-1" aria-hidden="true" tabindex="-1"></a>med_summertempday <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb241-2"><a href="c05-descriptive-analysis.html#cb241-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">std_mean =</span> <span class="fu">survey_median</span>(SummerTempDay,</span>
<span id="cb241-3"><a href="c05-descriptive-analysis.html#cb241-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb241-4"><a href="c05-descriptive-analysis.html#cb241-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb241-5"><a href="c05-descriptive-analysis.html#cb241-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-6"><a href="c05-descriptive-analysis.html#cb241-6" aria-hidden="true" tabindex="-1"></a>med_summertempday</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   std_mean std_mean_se
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1       72       0.252</code></pre>
<div class="sourceCode" id="cb243"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb243-1"><a href="c05-descriptive-analysis.html#cb243-1" aria-hidden="true" tabindex="-1"></a>med_summertempnight <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb243-2"><a href="c05-descriptive-analysis.html#cb243-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">stn_mean =</span> <span class="fu">survey_median</span>(SummerTempNight,</span>
<span id="cb243-3"><a href="c05-descriptive-analysis.html#cb243-3" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb243-4"><a href="c05-descriptive-analysis.html#cb243-4" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb243-5"><a href="c05-descriptive-analysis.html#cb243-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-6"><a href="c05-descriptive-analysis.html#cb243-6" aria-hidden="true" tabindex="-1"></a>med_summertempnight</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   stn_mean stn_mean_se
##      &lt;dbl&gt;       &lt;dbl&gt;
## 1       72       0.252</code></pre>
<div class="sourceCode" id="cb245"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb245-1"><a href="c05-descriptive-analysis.html#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Alternatively, could use `survey_quantile()` as shown below for WinterTempNight:</span></span>
<span id="cb245-2"><a href="c05-descriptive-analysis.html#cb245-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-3"><a href="c05-descriptive-analysis.html#cb245-3" aria-hidden="true" tabindex="-1"></a>quant_wintertemp <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb245-4"><a href="c05-descriptive-analysis.html#cb245-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">wnt_quant =</span> <span class="fu">survey_quantile</span>(</span>
<span id="cb245-5"><a href="c05-descriptive-analysis.html#cb245-5" aria-hidden="true" tabindex="-1"></a>    WinterTempNight,</span>
<span id="cb245-6"><a href="c05-descriptive-analysis.html#cb245-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="fl">0.5</span>,</span>
<span id="cb245-7"><a href="c05-descriptive-analysis.html#cb245-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb245-8"><a href="c05-descriptive-analysis.html#cb245-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb245-9"><a href="c05-descriptive-analysis.html#cb245-9" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb245-10"><a href="c05-descriptive-analysis.html#cb245-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-11"><a href="c05-descriptive-analysis.html#cb245-11" aria-hidden="true" tabindex="-1"></a>quant_wintertemp</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   wnt_quant_q50 wnt_quant_q50_se
##           &lt;dbl&gt;            &lt;dbl&gt;
## 1            68            0.252</code></pre>
<ol start="8" style="list-style-type: decimal">
<li>What is the correlation between the temperature that people set their temperature at during the night and during the day in the summer?</li>
</ol>
<div class="sourceCode" id="cb247"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb247-1"><a href="c05-descriptive-analysis.html#cb247-1" aria-hidden="true" tabindex="-1"></a>corr_summer_temp <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb247-2"><a href="c05-descriptive-analysis.html#cb247-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">summer_corr =</span> <span class="fu">survey_corr</span>(SummerTempNight, SummerTempDay,</span>
<span id="cb247-3"><a href="c05-descriptive-analysis.html#cb247-3" aria-hidden="true" tabindex="-1"></a>                                      <span class="at">na.rm =</span> <span class="cn">TRUE</span>))</span>
<span id="cb247-4"><a href="c05-descriptive-analysis.html#cb247-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-5"><a href="c05-descriptive-analysis.html#cb247-5" aria-hidden="true" tabindex="-1"></a>corr_summer_temp</span></code></pre></div>
<pre><code>## # A tibble: 1 × 2
##   summer_corr summer_corr_se
##         &lt;dbl&gt;          &lt;dbl&gt;
## 1       0.712         0.0147</code></pre>
<ol start="9" style="list-style-type: decimal">
<li>What is the 1st, 2nd, and 3rd quartile of the amount of money spent on energy by Building America (BA) climate zone? Hint: <code>TOTALDOL</code> indicates the total amount spent on electricity, and <code>ClimateRegion_BA</code> indicates the BA climate zones.</li>
</ol>
<div class="sourceCode" id="cb249"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb249-1"><a href="c05-descriptive-analysis.html#cb249-1" aria-hidden="true" tabindex="-1"></a>quant_baenergyexp <span class="ot">&lt;-</span> recs_des <span class="sc">%&gt;%</span></span>
<span id="cb249-2"><a href="c05-descriptive-analysis.html#cb249-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(ClimateRegion_BA) <span class="sc">%&gt;%</span></span>
<span id="cb249-3"><a href="c05-descriptive-analysis.html#cb249-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarize</span>(<span class="at">dol_quant =</span> <span class="fu">survey_quantile</span>(</span>
<span id="cb249-4"><a href="c05-descriptive-analysis.html#cb249-4" aria-hidden="true" tabindex="-1"></a>    TOTALDOL,</span>
<span id="cb249-5"><a href="c05-descriptive-analysis.html#cb249-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quantiles =</span> <span class="fu">c</span>(<span class="fl">0.25</span>, <span class="fl">0.5</span>, <span class="fl">0.75</span>),</span>
<span id="cb249-6"><a href="c05-descriptive-analysis.html#cb249-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">vartype =</span> <span class="st">&quot;se&quot;</span>,</span>
<span id="cb249-7"><a href="c05-descriptive-analysis.html#cb249-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">na.rm =</span> <span class="cn">TRUE</span></span>
<span id="cb249-8"><a href="c05-descriptive-analysis.html#cb249-8" aria-hidden="true" tabindex="-1"></a>  ))</span>
<span id="cb249-9"><a href="c05-descriptive-analysis.html#cb249-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-10"><a href="c05-descriptive-analysis.html#cb249-10" aria-hidden="true" tabindex="-1"></a>quant_baenergyexp</span></code></pre></div>
<pre><code>## # A tibble: 5 × 7
##   ClimateRegion_BA  dol_quant_q25 dol_quant_q50 dol_quant_q75
##   &lt;fct&gt;                     &lt;dbl&gt;         &lt;dbl&gt;         &lt;dbl&gt;
## 1 Hot-Dry/Mixed-Dry          789.         1194.         1923.
## 2 Hot-Humid                 1159.         1691.         2297.
## 3 Mixed-Humid               1354.         1902.         2629 
## 4 Cold/Very Cold            1213.         1731.         2372.
## 5 Marine                     904.         1342.         1884.
## # ℹ 3 more variables: dol_quant_q25_se &lt;dbl&gt;, dol_quant_q50_se &lt;dbl&gt;,
## #   dol_quant_q75_se &lt;dbl&gt;</code></pre>

</div>
</div>
<h3>References<a href="references.html#references" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-shahvaish" class="csl-entry">
Shah, Babubhai V, and Akhil K Vaish. 2006. <span>“Confidence Intervals for Quantile Estimation from Complex Survey Data.”</span> In <em>Proceedings of the Section on Survey Research Methods</em>.
</div>
<div id="ref-wickham2019advanced" class="csl-entry">
Wickham, Hadley. 2019. <em>Advanced <span>R</span></em>. CRC press. <a href="https://adv-r.hadley.nz/">https://adv-r.hadley.nz/</a>.
</div>
</div>
<div class="footnotes">
<hr />
<ol start="14">
<li id="fn14"><p>RECS has two components: a household survey and an energy supplier survey. For each household that responds, their energy provider(s) are contacted to obtain their energy consumption and expenditure. This value reflects the dollars spent on electricity in 2015, according to the energy supplier. See <a href="https://www.eia.gov/consumption/residential/reports/2015/methodology/pdf/2015C&amp;EMethodology.pdf" class="uri">https://www.eia.gov/consumption/residential/reports/2015/methodology/pdf/2015C&amp;EMethodology.pdf</a> for more details.<a href="c05-descriptive-analysis.html#fnref14" class="footnote-back">↩︎</a></p></li>
<li id="fn15"><p>Question text: Is any air condition equipment used in your home?<a href="c05-descriptive-analysis.html#fnref15" class="footnote-back">↩︎</a></p></li>
<li id="fn16"><p>Question text: What is the square footage of your home?<a href="c05-descriptive-analysis.html#fnref16" class="footnote-back">↩︎</a></p></li>
<li id="fn17"><p>BTUEL is derived from the supplier side component of the survey where BTUEL represents the electricity consumption in British thermal units (Btus) converted from kilowatt hours (kWh) in a year<a href="c05-descriptive-analysis.html#fnref17" class="footnote-back">↩︎</a></p></li>
<li id="fn18"><p>Question: How often can you trust the federal government in Washington to do what is right? (Always, most of the time, about half the time, some of the time, or never / Never, some of the time, about half the time, most of the time, or always)?<a href="c05-descriptive-analysis.html#fnref18" class="footnote-back">↩︎</a></p></li>
<li id="fn19"><p>Question: Generally speaking, how often can you trust other people? (Always, most of the time, about half the time, some of the time, or never / Never, some of the time, about half the time, most of the time, or always)? <a href="c05-descriptive-analysis.html#fnref19" class="footnote-back">↩︎</a></p></li>
</ol>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="c04-understanding-survey-data-documentation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="c06-statistical-testing.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook/js/app.min.js"></script>
<script src="libs/gitbook/js/clipboard.min.js"></script>
<script src="libs/gitbook/js/plugin-search.js"></script>
<script src="libs/gitbook/js/plugin-sharing.js"></script>
<script src="libs/gitbook/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook/js/plugin-bookdown.js"></script>
<script src="libs/gitbook/js/jquery.highlight.js"></script>
<script src="libs/gitbook/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": true,
"facebook": false,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": "https://github.com/yihui/bookdown-crc/edit/master/05-descriptive-analysis.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["bookdown.pdf", "bookdown.epub"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "none"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
